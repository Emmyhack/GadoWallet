/*! For license information please see popup.js.LICENSE.txt */
(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){var e,a,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",c=r.toStringTag||"@@toStringTag";function s(t,r,i,c){var s=r&&r.prototype instanceof l?r:l,d=Object.create(s.prototype);return n(d,"_invoke",function(t,n,r){var i,c,s,l=0,d=r||[],u=!1,h={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(t,n){return i=t,c=0,s=e,h.n=n,o}};function v(t,n){for(c=t,s=n,a=0;!u&&l&&!r&&a<d.length;a++){var r,i=d[a],v=h.p,m=i[2];t>3?(r=m===n)&&(s=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=v&&((r=t<2&&v<i[1])?(c=0,h.v=n,h.n=i[1]):v<m&&(r=t<3||i[0]>n||n>m)&&(i[4]=t,i[5]=n,h.n=m,c=0))}if(r||t>1)return o;throw u=!0,n}return function(r,d,m){if(l>1)throw TypeError("Generator is already running");for(u&&1===d&&v(d,m),c=d,s=m;(a=c<2?e:s)||!u;){i||(c?c<3?(c>1&&(h.n=-1),v(c,s)):h.n=s:h.v=s);try{if(l=2,i){if(c||(r="next"),a=i[r]){if(!(a=a.call(i,s)))throw TypeError("iterator result is not an object");if(!a.done)return a;s=a.value,c<2&&(c=0)}else 1===c&&(a=i.return)&&a.call(i),c<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),c=1);i=e}else if((a=(u=h.n<0)?s:t.call(n,h))!==o)break}catch(t){i=e,c=1,s=t}finally{l=1}}return{value:a,done:u}}}(t,i,c),!0),d}var o={};function l(){}function d(){}function u(){}a=Object.getPrototypeOf;var h=[][i]?a(a([][i]())):(n(a={},i,function(){return this}),a),v=u.prototype=l.prototype=Object.create(h);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,n(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e}return d.prototype=u,n(v,"constructor",u),n(u,"constructor",d),d.displayName="GeneratorFunction",n(u,c,"GeneratorFunction"),n(v),n(v,c,"Generator"),n(v,i,function(){return this}),n(v,"toString",function(){return"[object Generator]"}),(t=function(){return{w:s,m}})()}function n(e,t,a,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}n=function(e,t,a,r){function c(t,a){n(e,t,function(e){return this._invoke(t,a,e)})}t?i?i(e,t,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[t]=a:(c("next",0),c("throw",1),c("return",2))},n(e,t,a,r)}function a(e,t,n,a,r,i,c){try{var s=e[i](c),o=s.value}catch(e){return void n(e)}s.done?t(o):Promise.resolve(o).then(a,r)}function r(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var c=e.apply(t,n);function s(e){a(c,r,i,s,o,"next",e)}function o(e){a(c,r,i,s,o,"throw",e)}s(void 0)})}}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,c(a.key),a)}}function c(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,"string");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}var s=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wallet=null,this.network="devnet",this.isConnected=!1,this.currentTab="dashboard",this.init()},n=[{key:"init",value:(L=r(t().m(function e(){return t().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.loadSettings();case 1:return this.setupEventListeners(),this.setupTabNavigation(),e.n=2,this.checkWalletConnection();case 2:this.startAutoRefresh();case 3:return e.a(2)}},e,this)})),function(){return L.apply(this,arguments)})},{key:"loadSettings",value:(E=r(t().m(function e(){var n;return t().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,chrome.storage.local.get(["network","autoLockTimer","keeperNotifications","confirmationCount"]);case 1:n=e.v,this.network=n.network||"devnet",document.getElementById("networkSelect").value=this.network,document.getElementById("autoLockTimer").value=n.autoLockTimer||"900",document.getElementById("keeperNotifications").checked=!1!==n.keeperNotifications,document.getElementById("confirmationCount").value=n.confirmationCount||"3";case 2:return e.a(2)}},e,this)})),function(){return E.apply(this,arguments)})},{key:"setupEventListeners",value:function(){var e=this;document.getElementById("connectWallet").addEventListener("click",function(){return e.connectWallet()}),document.getElementById("networkSelect").addEventListener("change",function(t){return e.switchNetwork(t.target.value)}),document.getElementById("sendBtn").addEventListener("click",function(){return e.openSendModal()}),document.getElementById("receiveBtn").addEventListener("click",function(){return e.openReceiveModal()}),document.getElementById("addHeirBtn").addEventListener("click",function(){return e.openInheritanceSetup()}),document.getElementById("viewKeeper").addEventListener("click",function(){return e.viewKeeperStatus()}),document.getElementById("refreshBalance").addEventListener("click",function(){return e.refreshBalance()}),document.getElementById("copyAddress").addEventListener("click",function(){return e.copyAddress()}),document.getElementById("createInheritanceBtn").addEventListener("click",function(){return e.openInheritanceSetup()}),document.getElementById("setupFirstInheritance").addEventListener("click",function(){return e.openInheritanceSetup()}),this.setupModalControls(),this.setupSettingsControls()}},{key:"setupModalControls",value:function(){var e=this;document.getElementById("cancelSend").addEventListener("click",function(){return e.closeSendModal()}),document.getElementById("confirmSend").addEventListener("click",function(){return e.processSendTransaction()}),document.getElementById("closeReceive").addEventListener("click",function(){return e.closeReceiveModal()}),document.getElementById("copyReceiveAddress").addEventListener("click",function(){return e.copyReceiveAddress()}),document.querySelectorAll(".modal").forEach(function(t){t.addEventListener("click",function(n){n.target===t&&e.closeAllModals()})}),document.querySelectorAll(".modal-close").forEach(function(t){t.addEventListener("click",function(){return e.closeAllModals()})})}},{key:"setupSettingsControls",value:function(){var e=this;document.getElementById("autoLockTimer").addEventListener("change",function(e){chrome.storage.local.set({autoLockTimer:e.target.value})}),document.getElementById("keeperNotifications").addEventListener("change",function(e){chrome.storage.local.set({keeperNotifications:e.target.checked})}),document.getElementById("confirmationCount").addEventListener("change",function(e){chrome.storage.local.set({confirmationCount:e.target.value})}),document.getElementById("exportWallet").addEventListener("click",function(){return e.exportWallet()}),document.getElementById("resetWallet").addEventListener("click",function(){return e.resetWallet()})}},{key:"setupTabNavigation",value:function(){var e=this,t=document.querySelectorAll(".nav-btn"),n=document.querySelectorAll(".tab-pane");t.forEach(function(a){a.addEventListener("click",function(){var r=a.dataset.tab;t.forEach(function(e){return e.classList.remove("active")}),a.classList.add("active"),n.forEach(function(e){return e.classList.remove("active")}),document.getElementById(r).classList.add("active"),e.currentTab=r,e.loadTabContent(r)})})}},{key:"loadTabContent",value:(b=r(t().m(function e(n){var a;return t().w(function(e){for(;;)switch(e.n){case 0:a=n,e.n="dashboard"===a?1:"inheritance"===a?3:"transactions"===a?5:"settings"===a?7:8;break;case 1:return e.n=2,this.loadDashboard();case 2:case 4:case 6:case 7:return e.a(3,8);case 3:return e.n=4,this.loadInheritanceTab();case 5:return e.n=6,this.loadTransactions();case 8:return e.a(2)}},e,this)})),function(e){return b.apply(this,arguments)})},{key:"connectWallet",value:(g=r(t().m(function e(){var n,a;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,this.showLoading("Connecting wallet..."),e.n=1,chrome.runtime.sendMessage({type:"CONNECT_WALLET",network:this.network});case 1:if(!(n=e.v).success){e.n=4;break}return this.wallet=n.wallet,this.isConnected=!0,e.n=2,this.updateWalletUI();case 2:return e.n=3,this.loadDashboard();case 3:this.showNotification("Wallet connected successfully!","success"),e.n=5;break;case 4:throw new Error(n.error||"Failed to connect wallet");case 5:e.n=7;break;case 6:e.p=6,a=e.v,console.error("Wallet connection error:",a),this.showNotification("Failed to connect wallet: "+a.message,"error");case 7:return e.p=7,this.hideLoading(),e.f(7);case 8:return e.a(2)}},e,this,[[0,6,7,8]])})),function(){return g.apply(this,arguments)})},{key:"switchNetwork",value:(k=r(t().m(function e(n){var a,r;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n!==this.network){e.n=1;break}return e.a(2);case 1:return e.p=1,this.showLoading("Switching network..."),e.n=2,chrome.runtime.sendMessage({type:"SWITCH_NETWORK",network:n});case 2:if(!(a=e.v).success){e.n=6;break}return this.network=n,e.n=3,chrome.storage.local.set({network:n});case 3:if(!this.isConnected){e.n=5;break}return e.n=4,this.refreshBalance();case 4:return e.n=5,this.loadTabContent(this.currentTab);case 5:this.showNotification("Switched to ".concat(n),"success"),e.n=7;break;case 6:throw new Error(a.error||"Failed to switch network");case 7:e.n=9;break;case 8:e.p=8,r=e.v,console.error("Network switch error:",r),this.showNotification("Failed to switch network: "+r.message,"error"),document.getElementById("networkSelect").value=this.network;case 9:return e.p=9,this.hideLoading(),e.f(9);case 10:return e.a(2)}},e,this,[[1,8,9,10]])})),function(e){return k.apply(this,arguments)})},{key:"checkWalletConnection",value:(w=r(t().m(function e(){var n,a;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,chrome.runtime.sendMessage({type:"GET_WALLET_STATUS"});case 1:if(!(n=e.v).success||!n.isConnected){e.n=4;break}return this.wallet=n.wallet,this.isConnected=!0,this.network=n.network||"devnet",document.getElementById("networkSelect").value=this.network,e.n=2,this.updateWalletUI();case 2:return e.n=3,this.loadDashboard();case 3:e.n=5;break;case 4:this.showDisconnectedState();case 5:e.n=7;break;case 6:e.p=6,a=e.v,console.error("Wallet status check error:",a),this.showDisconnectedState();case 7:return e.a(2)}},e,this,[[0,6]])})),function(){return w.apply(this,arguments)})},{key:"updateWalletUI",value:(y=r(t().m(function e(){var n;return t().w(function(e){for(;;)switch(e.n){case 0:if(this.wallet&&this.isConnected){e.n=1;break}return this.showDisconnectedState(),e.a(2);case 1:return n=this.shortenAddress(this.wallet.publicKey),document.getElementById("walletAddress").textContent=n,document.getElementById("receiveAddress").value=this.wallet.publicKey,document.getElementById("disconnectedState").classList.add("hidden"),document.getElementById("connectedState").classList.remove("hidden"),document.getElementById("mainNav").classList.remove("hidden"),e.n=2,this.refreshBalance();case 2:return e.a(2)}},e,this)})),function(){return y.apply(this,arguments)})},{key:"showDisconnectedState",value:function(){document.getElementById("disconnectedState").classList.remove("hidden"),document.getElementById("connectedState").classList.add("hidden"),document.getElementById("mainNav").classList.add("hidden"),this.isConnected=!1}},{key:"refreshBalance",value:(f=r(t().m(function e(){var n,a,r;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.isConnected){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,chrome.runtime.sendMessage({type:"GET_BALANCE"});case 2:(n=e.v).success&&(a=n.balance.toFixed(4),document.getElementById("solBalance").textContent="".concat(a," SOL"),document.getElementById("totalBalance").textContent="".concat(a," SOL")),e.n=4;break;case 3:e.p=3,r=e.v,console.error("Balance refresh error:",r);case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return f.apply(this,arguments)})},{key:"loadDashboard",value:(p=r(t().m(function e(){var n,a,r;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.isConnected){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,chrome.runtime.sendMessage({type:"GET_INHERITANCE_STATS"});case 2:return(n=e.v).success&&(a=n.stats,document.getElementById("protectedAssets").textContent="".concat(a.protectedSOL.toFixed(4)," SOL"),document.getElementById("activeHeirs").textContent=a.totalHeirs),e.n=3,this.loadRecentActivity();case 3:e.n=5;break;case 4:e.p=4,r=e.v,console.error("Dashboard load error:",r);case 5:return e.a(2)}},e,this,[[1,4]])})),function(){return p.apply(this,arguments)})},{key:"loadInheritanceTab",value:(m=r(t().m(function e(){var n,a,r;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.isConnected){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,chrome.runtime.sendMessage({type:"GET_INHERITANCES"});case 2:(n=e.v).success&&(a=n.inheritances,document.getElementById("solInheritanceCount").textContent=a.sol.length,document.getElementById("tokenInheritanceCount").textContent=a.tokens.length,this.renderInheritanceList(a)),e.n=4;break;case 3:e.p=3,r=e.v,console.error("Inheritance load error:",r);case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return m.apply(this,arguments)})},{key:"renderInheritanceList",value:function(e){var t=this,n=document.getElementById("inheritanceList");0===e.sol.length&&0===e.tokens.length||(n.innerHTML="",e.sol.forEach(function(e){n.appendChild(t.createInheritanceCard(e,"SOL"))}),e.tokens.forEach(function(e){n.appendChild(t.createInheritanceCard(e,"TOKEN"))}))}},{key:"createInheritanceCard",value:function(e,t){var n=document.createElement("div");n.className="inheritance-card";var a=e.isClaimed?"claimed":"active",r="SOL"===t?"".concat((e.amount/1e9).toFixed(4)," SOL"):"".concat(e.amount," tokens");return n.innerHTML='\n            <div class="inheritance-header">\n                <div class="inheritance-type">'.concat(t,' Inheritance</div>\n                <div class="inheritance-status ').concat(a,'">\n                    ').concat(e.isClaimed?"Claimed":"Active",'\n                </div>\n            </div>\n            <div class="inheritance-details">\n                <div class="detail-row">\n                    <span class="detail-label">Heir:</span>\n                    <span class="detail-value">').concat(this.shortenAddress(e.heir),'</span>\n                </div>\n                <div class="detail-row">\n                    <span class="detail-label">Amount:</span>\n                    <span class="detail-value">').concat(r,'</span>\n                </div>\n                <div class="detail-row">\n                    <span class="detail-label">Inactivity Period:</span>\n                    <span class="detail-value">').concat(Math.floor(e.inactivityPeriodSeconds/86400),' days</span>\n                </div>\n                <div class="detail-row">\n                    <span class="detail-label">Last Activity:</span>\n                    <span class="detail-value">').concat(new Date(1e3*e.lastActivity).toLocaleDateString(),'</span>\n                </div>\n            </div>\n            <div class="inheritance-actions">\n                <button class="btn btn-secondary btn-sm" onclick="gadaWallet.updateActivity(\'').concat(e.address,"')\">\n                    Update Activity\n                </button>\n                ").concat(e.isClaimed?"":'\n                    <button class="btn btn-danger btn-sm" onclick="gadaWallet.cancelInheritance(\''.concat(e.address,"')\">\n                        Cancel\n                    </button>\n                "),"\n            </div>\n        "),n}},{key:"loadTransactions",value:(v=r(t().m(function e(){var n,a;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.isConnected){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,chrome.runtime.sendMessage({type:"GET_TRANSACTIONS",limit:20});case 2:(n=e.v).success&&this.renderTransactionList(n.transactions),e.n=4;break;case 3:e.p=3,a=e.v,console.error("Transaction load error:",a);case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return v.apply(this,arguments)})},{key:"renderTransactionList",value:function(e){var t=this,n=document.getElementById("transactionList");0!==e.length&&(n.innerHTML="",e.forEach(function(e){n.appendChild(t.createTransactionItem(e))}))}},{key:"createTransactionItem",value:function(e){var t=this,n=document.createElement("div");n.className="transaction-item";var a=this.getTransactionIcon(e.type),r="inheritance"===e.type?"".concat((e.amount/1e9).toFixed(4)," SOL"):"".concat((Math.abs(e.amount)/1e9).toFixed(4)," SOL");return n.innerHTML='\n            <div class="tx-icon">'.concat(a,'</div>\n            <div class="tx-details">\n                <div class="tx-title">').concat(this.getTransactionTitle(e),'</div>\n                <div class="tx-subtitle">').concat(new Date(1e3*e.timestamp).toLocaleString(),'</div>\n            </div>\n            <div class="tx-amount ').concat(e.amount>0?"positive":"negative",'">\n                ').concat(e.amount>0?"+":"").concat(r,'\n            </div>\n            <div class="tx-status ').concat(e.status,'">\n                ').concat(e.status,"\n            </div>\n        "),n.addEventListener("click",function(){t.openTransactionDetails(e)}),n}},{key:"getTransactionIcon",value:function(e){switch(e){case"send":return"📤";case"receive":return"📥";case"inheritance":return"🏛️";case"heir_setup":return"👨‍👩‍👧‍👦";default:return"📝"}}},{key:"getTransactionTitle",value:function(e){switch(e.type){case"send":return"Sent SOL";case"receive":return"Received SOL";case"inheritance":return"Inheritance Setup";case"heir_setup":return"Heir Added";default:return"Transaction"}}},{key:"loadRecentActivity",value:(h=r(t().m(function e(){var n,a;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,chrome.runtime.sendMessage({type:"GET_RECENT_ACTIVITY",limit:5});case 1:(n=e.v).success&&n.activities.length>0&&this.renderRecentActivity(n.activities),e.n=3;break;case 2:e.p=2,a=e.v,console.error("Recent activity load error:",a);case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return h.apply(this,arguments)})},{key:"renderRecentActivity",value:function(e){var t=this,n=document.getElementById("recentActivity");n.innerHTML="",e.forEach(function(e){n.appendChild(t.createActivityItem(e))})}},{key:"createActivityItem",value:function(e){var t=document.createElement("div");return t.className="activity-item",t.innerHTML='\n            <div class="activity-icon">'.concat(this.getTransactionIcon(e.type),'</div>\n            <div class="activity-details">\n                <div class="activity-title">').concat(e.title,'</div>\n                <div class="activity-subtitle">').concat(e.subtitle,"</div>\n            </div>\n        "),t}},{key:"openSendModal",value:function(){document.getElementById("sendModal").classList.remove("hidden")}},{key:"closeSendModal",value:function(){document.getElementById("sendModal").classList.add("hidden"),this.clearSendForm()}},{key:"openReceiveModal",value:function(){document.getElementById("receiveModal").classList.remove("hidden"),this.generateQRCode()}},{key:"closeReceiveModal",value:function(){document.getElementById("receiveModal").classList.add("hidden")}},{key:"closeAllModals",value:function(){document.querySelectorAll(".modal").forEach(function(e){e.classList.add("hidden")}),this.clearSendForm()}},{key:"clearSendForm",value:function(){document.getElementById("sendAddress").value="",document.getElementById("sendAmount").value="",document.getElementById("sendMemo").value=""}},{key:"generateQRCode",value:function(){document.getElementById("qrCode").innerHTML='\n            <div class="qr-placeholder">\n                📱<br>\n                QR Code<br>\n                <small>Install QR library for real QR codes</small>\n            </div>\n        '}},{key:"processSendTransaction",value:(u=r(t().m(function e(){var n,a,r,i,c;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=document.getElementById("sendAddress").value.trim(),a=parseFloat(document.getElementById("sendAmount").value),r=document.getElementById("sendMemo").value.trim(),n&&a&&!(a<=0)){e.n=1;break}return this.showNotification("Please enter a valid address and amount","error"),e.a(2);case 1:return e.p=1,this.showLoading("Sending transaction..."),e.n=2,chrome.runtime.sendMessage({type:"SEND_TRANSACTION",to:n,amount:a,memo:r});case 2:if(!(i=e.v).success){e.n=5;break}return this.closeSendModal(),this.showNotification("Transaction sent successfully!","success"),e.n=3,this.refreshBalance();case 3:return e.n=4,this.loadRecentActivity();case 4:e.n=6;break;case 5:throw new Error(i.error||"Transaction failed");case 6:e.n=8;break;case 7:e.p=7,c=e.v,console.error("Send transaction error:",c),this.showNotification("Failed to send transaction: "+c.message,"error");case 8:return e.p=8,this.hideLoading(),e.f(8);case 9:return e.a(2)}},e,this,[[1,7,8,9]])})),function(){return u.apply(this,arguments)})},{key:"openInheritanceSetup",value:(d=r(t().m(function e(){return t().w(function(e){for(;;)switch(e.n){case 0:document.querySelector('[data-tab="inheritance"]').click(),chrome.tabs.create({url:chrome.runtime.getURL("inheritance.html")});case 1:return e.a(2)}},e)})),function(){return d.apply(this,arguments)})},{key:"viewKeeperStatus",value:(l=r(t().m(function e(){var n,a;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,chrome.runtime.sendMessage({type:"GET_KEEPER_STATUS"});case 1:(n=e.v).success&&this.showKeeperStatusModal(n.status),e.n=3;break;case 2:e.p=2,a=e.v,console.error("Keeper status error:",a),this.showNotification("Failed to get keeper status","error");case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return l.apply(this,arguments)})},{key:"showKeeperStatusModal",value:function(e){var t=document.createElement("div");t.className="modal",t.innerHTML='\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h3>🤖 Keeper Bot Status</h3>\n                    <button class="modal-close">&times;</button>\n                </div>\n                <div class="modal-body">\n                    <div class="keeper-stats">\n                        <div class="stat-row">\n                            <span>Status:</span>\n                            <span class="status-'.concat(e.isRunning?"active":"inactive",'">\n                                ').concat(e.isRunning?"Running":"Stopped",'\n                            </span>\n                        </div>\n                        <div class="stat-row">\n                            <span>SOL Heirs:</span>\n                            <span>').concat(e.totalSolHeirs," (").concat(e.eligibleSolHeirs,' eligible)</span>\n                        </div>\n                        <div class="stat-row">\n                            <span>Token Heirs:</span>\n                            <span>').concat(e.totalTokenHeirs," (").concat(e.eligibleTokenHeirs,' eligible)</span>\n                        </div>\n                        <div class="stat-row">\n                            <span>Protected Value:</span>\n                            <span>').concat(e.totalSolValue.toFixed(4),' SOL</span>\n                        </div>\n                        <div class="stat-row">\n                            <span>Check Interval:</span>\n                            <span>').concat(e.checkInterval,' minutes</span>\n                        </div>\n                    </div>\n                </div>\n                <div class="modal-footer">\n                    <button class="btn btn-primary" onclick="this.closest(\'.modal\').remove()">Close</button>\n                </div>\n            </div>\n        '),document.body.appendChild(t),t.classList.remove("hidden"),t.querySelector(".modal-close").onclick=function(){return t.remove()},t.onclick=function(e){e.target===t&&t.remove()}}},{key:"copyAddress",value:function(){this.wallet&&(navigator.clipboard.writeText(this.wallet.publicKey),this.showNotification("Address copied to clipboard!","success"))}},{key:"copyReceiveAddress",value:function(){var e=document.getElementById("receiveAddress").value;navigator.clipboard.writeText(e),this.showNotification("Address copied to clipboard!","success")}},{key:"shortenAddress",value:function(e){return e?"".concat(e.slice(0,4),"...").concat(e.slice(-4)):""}},{key:"showLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading...",t=document.getElementById("loadingOverlay");t.querySelector(".loading-text").textContent=e,t.classList.remove("hidden")}},{key:"hideLoading",value:function(){document.getElementById("loadingOverlay").classList.add("hidden")}},{key:"showNotification",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=document.createElement("div");n.className="notification notification-".concat(t),n.textContent=e,document.body.appendChild(n),setTimeout(function(){return n.classList.add("show")},100),setTimeout(function(){n.classList.remove("show"),setTimeout(function(){return n.remove()},300)},3e3)}},{key:"startAutoRefresh",value:function(){var e=this;setInterval(function(){e.isConnected&&(e.refreshBalance(),e.loadRecentActivity())},3e4)}},{key:"exportWallet",value:(o=r(t().m(function e(){var n,a,r,i,c;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!confirm("⚠️ Are you sure you want to export your private key? Keep it secure!")){e.n=4;break}return e.p=1,e.n=2,chrome.runtime.sendMessage({type:"EXPORT_WALLET"});case 2:(n=e.v).success&&(a=new Blob([n.privateKey],{type:"text/plain"}),r=URL.createObjectURL(a),(i=document.createElement("a")).href=r,i.download="gada-wallet-private-key.txt",i.click(),URL.revokeObjectURL(r),this.showNotification("Private key exported successfully!","success")),e.n=4;break;case 3:e.p=3,c=e.v,console.error("Export error:",c),this.showNotification("Failed to export private key","error");case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return o.apply(this,arguments)})},{key:"resetWallet",value:(s=r(t().m(function e(){var n;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!confirm("⚠️ Are you sure you want to reset your wallet? This action cannot be undone!")){e.n=4;break}if(!confirm("🚨 Final confirmation: All wallet data will be deleted!")){e.n=4;break}return e.p=1,e.n=2,chrome.runtime.sendMessage({type:"RESET_WALLET"});case 2:e.v.success&&(this.showNotification("Wallet reset successfully!","success"),window.location.reload()),e.n=4;break;case 3:e.p=3,n=e.v,console.error("Reset error:",n),this.showNotification("Failed to reset wallet","error");case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return s.apply(this,arguments)})},{key:"updateActivity",value:(c=r(t().m(function e(n){var a,r;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,this.showLoading("Updating activity..."),e.n=1,chrome.runtime.sendMessage({type:"UPDATE_ACTIVITY",inheritanceAddress:n});case 1:if(!(a=e.v).success){e.n=3;break}return this.showNotification("Activity updated successfully!","success"),e.n=2,this.loadInheritanceTab();case 2:e.n=4;break;case 3:throw new Error(a.error||"Failed to update activity");case 4:e.n=6;break;case 5:e.p=5,r=e.v,console.error("Update activity error:",r),this.showNotification("Failed to update activity: "+r.message,"error");case 6:return e.p=6,this.hideLoading(),e.f(6);case 7:return e.a(2)}},e,this,[[0,5,6,7]])})),function(e){return c.apply(this,arguments)})},{key:"cancelInheritance",value:(a=r(t().m(function e(n){var a,r;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!confirm("Are you sure you want to cancel this inheritance?")){e.n=8;break}return e.p=1,this.showLoading("Cancelling inheritance..."),e.n=2,chrome.runtime.sendMessage({type:"CANCEL_INHERITANCE",inheritanceAddress:n});case 2:if(!(a=e.v).success){e.n=4;break}return this.showNotification("Inheritance cancelled successfully!","success"),e.n=3,this.loadInheritanceTab();case 3:e.n=5;break;case 4:throw new Error(a.error||"Failed to cancel inheritance");case 5:e.n=7;break;case 6:e.p=6,r=e.v,console.error("Cancel inheritance error:",r),this.showNotification("Failed to cancel inheritance: "+r.message,"error");case 7:return e.p=7,this.hideLoading(),e.f(7);case 8:return e.a(2)}},e,this,[[1,6,7,8]])})),function(e){return a.apply(this,arguments)})},{key:"openTransactionDetails",value:function(e){var t=document.createElement("div");t.className="modal",t.innerHTML='\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h3>Transaction Details</h3>\n                    <button class="modal-close">&times;</button>\n                </div>\n                <div class="modal-body">\n                    <div class="tx-details-grid">\n                        <div class="detail-row">\n                            <span class="detail-label">Signature:</span>\n                            <span class="detail-value">'.concat(this.shortenAddress(e.signature),'</span>\n                        </div>\n                        <div class="detail-row">\n                            <span class="detail-label">Type:</span>\n                            <span class="detail-value">').concat(e.type,'</span>\n                        </div>\n                        <div class="detail-row">\n                            <span class="detail-label">Amount:</span>\n                            <span class="detail-value">').concat((Math.abs(e.amount)/1e9).toFixed(9),' SOL</span>\n                        </div>\n                        <div class="detail-row">\n                            <span class="detail-label">Status:</span>\n                            <span class="detail-value">').concat(e.status,'</span>\n                        </div>\n                        <div class="detail-row">\n                            <span class="detail-label">Timestamp:</span>\n                            <span class="detail-value">').concat(new Date(1e3*e.timestamp).toLocaleString(),'</span>\n                        </div>\n                    </div>\n                </div>\n                <div class="modal-footer">\n                    <button class="btn btn-secondary" onclick="window.open(\'https://solscan.io/tx/').concat(e.signature,"?cluster=").concat(this.network,'\')">\n                        View on Solscan\n                    </button>\n                    <button class="btn btn-primary" onclick="this.closest(\'.modal\').remove()">Close</button>\n                </div>\n            </div>\n        '),document.body.appendChild(t),t.querySelector(".modal-close").onclick=function(){return t.remove()},t.onclick=function(e){e.target===t&&t.remove()}}}],n&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,a,c,s,o,l,d,u,h,v,m,p,f,y,w,k,g,b,E,L}();document.addEventListener("DOMContentLoaded",function(){window.gadoWallet=new s}),window.gadoWalletPopup=s})();
//# sourceMappingURL=popup.js.map