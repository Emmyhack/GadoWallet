/*! For license information please see background.js.LICENSE.txt */
(()=>{var t={22:(t,e,r)=>{"use strict";const n=r(341).v4,i=r(289),s=function(t,e){if(!(this instanceof s))return new s(t,e);e||(e={}),this.options={reviver:void 0!==e.reviver?e.reviver:null,replacer:void 0!==e.replacer?e.replacer:null,generator:void 0!==e.generator?e.generator:function(){return n()},version:void 0!==e.version?e.version:2,notificationIdNull:"boolean"==typeof e.notificationIdNull&&e.notificationIdNull},this.callServer=t};t.exports=s,s.prototype.request=function(t,e,r,n){const s=this;let o=null;const a=Array.isArray(t)&&"function"==typeof e;if(1===this.options.version&&a)throw new TypeError("JSON-RPC 1.0 does not support batching");if(a||!a&&t&&"object"==typeof t&&"function"==typeof e)n=e,o=t;else{"function"==typeof r&&(n=r,r=void 0);const s="function"==typeof n;try{o=i(t,e,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(t){if(s)return n(t);throw t}if(!s)return o}let c;try{c=JSON.stringify(o,this.options.replacer)}catch(t){return n(t)}return this.callServer(c,function(t,e){s._parseResponse(t,e,n)}),o},s.prototype._parseResponse=function(t,e,r){if(t)return void r(t);if(!e)return r();let n;try{n=JSON.parse(e,this.options.reviver)}catch(t){return r(t)}if(3===r.length){if(Array.isArray(n)){const t=function(t){return void 0!==t.error},e=function(e){return!t(e)};return r(null,n.filter(t),n.filter(e))}return r(null,n.error,n.result)}r(null,n)}},226:(t,e,r)=>{"use strict";r.d(e,{sc:()=>n});const n=r(442).sc},228:t=>{"use strict";var e=Object.prototype.hasOwnProperty,r="~";function n(){}function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function s(t,e,n,s,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,s||t,o),c=r?r+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function o(t,e){0===--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,n,i=[];if(0===this._eventsCount)return i;for(n in t=this._events)e.call(t,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o},a.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,i,s,o){var a=r?r+t:t;if(!this._events[a])return!1;var c,u,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,i),!0;case 5:return h.fn.call(h.context,e,n,i,s),!0;case 6:return h.fn.call(h.context,e,n,i,s,o),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];h.fn.apply(h.context,c)}else{var d,f=h.length;for(u=0;u<f;u++)switch(h[u].once&&this.removeListener(t,h[u].fn,void 0,!0),l){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,e);break;case 3:h[u].fn.call(h[u].context,e,n);break;case 4:h[u].fn.call(h[u].context,e,n,i);break;default:if(!c)for(d=1,c=new Array(l-1);d<l;d++)c[d-1]=arguments[d];h[u].fn.apply(h[u].context,c)}}return!0},a.prototype.on=function(t,e,r){return s(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return s(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,n,i){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||i&&!a.once||n&&a.context!==n||o(this,s);else{for(var c=0,u=[],h=a.length;c<h;c++)(a[c].fn!==e||i&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[s]=1===u.length?u[0]:u:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&o(this,e)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a},241:(t,e,r)=>{"use strict";r.r(e),r.d(e,{Account:()=>Ur,AddressLookupTableAccount:()=>Gn,AddressLookupTableInstruction:()=>js,AddressLookupTableProgram:()=>Vs,Authorized:()=>no,BLOCKHASH_CACHE_TIMEOUT_MS:()=>ei,BPF_LOADER_DEPRECATED_PROGRAM_ID:()=>zr,BPF_LOADER_PROGRAM_ID:()=>Nn,BpfLoader:()=>Kn,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:()=>Zs,ComputeBudgetInstruction:()=>$s,ComputeBudgetProgram:()=>Gs,Connection:()=>Fs,Ed25519Program:()=>Js,Enum:()=>Pr,EpochSchedule:()=>Vn,FeeCalculatorLayout:()=>Bn,Keypair:()=>Hs,LAMPORTS_PER_SOL:()=>xo,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:()=>qs,Loader:()=>zn,Lockup:()=>io,MAX_SEED_LENGTH:()=>Mr,Message:()=>rn,MessageAccountKeys:()=>qr,MessageV0:()=>nn,NONCE_ACCOUNT_LENGTH:()=>Tn,NonceAccount:()=>On,PACKET_DATA_SIZE:()=>Nr,PUBLIC_KEY_LENGTH:()=>Rr,PublicKey:()=>Cr,SIGNATURE_LENGTH_IN_BYTES:()=>Dr,SOLANA_SCHEMA:()=>Tr,STAKE_CONFIG_ID:()=>ro,STAKE_INSTRUCTION_LAYOUTS:()=>oo,SYSTEM_INSTRUCTION_LAYOUTS:()=>Ln,SYSVAR_CLOCK_PUBKEY:()=>dn,SYSVAR_EPOCH_SCHEDULE_PUBKEY:()=>fn,SYSVAR_INSTRUCTIONS_PUBKEY:()=>pn,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:()=>gn,SYSVAR_RENT_PUBKEY:()=>yn,SYSVAR_REWARDS_PUBKEY:()=>mn,SYSVAR_SLOT_HASHES_PUBKEY:()=>wn,SYSVAR_SLOT_HISTORY_PUBKEY:()=>bn,SYSVAR_STAKE_HISTORY_PUBKEY:()=>vn,Secp256k1Program:()=>to,SendTransactionError:()=>_n,SolanaJSONRPCError:()=>Sn,SolanaJSONRPCErrorCode:()=>kn,StakeAuthorizationLayout:()=>ao,StakeInstruction:()=>so,StakeProgram:()=>co,Struct:()=>Br,SystemInstruction:()=>Rn,SystemProgram:()=>Cn,Transaction:()=>un,TransactionExpiredBlockheightExceededError:()=>Wr,TransactionExpiredNonceInvalidError:()=>Hr,TransactionExpiredTimeoutError:()=>Fr,TransactionInstruction:()=>cn,TransactionMessage:()=>hn,TransactionStatus:()=>on,VALIDATOR_INFO_KEY:()=>go,VERSION_PREFIX_MASK:()=>Kr,VOTE_PROGRAM_ID:()=>wo,ValidatorInfo:()=>mo,VersionedMessage:()=>sn,VersionedTransaction:()=>ln,VoteAccount:()=>vo,VoteAuthorizationLayout:()=>fo,VoteInit:()=>uo,VoteInstruction:()=>ho,VoteProgram:()=>po,clusterApiUrl:()=>Ao,sendAndConfirmRawTransaction:()=>Io,sendAndConfirmTransaction:()=>En});var n=r(287),i=r(442),s=r(531);const o=BigInt(0),a=BigInt(1);function c(t,e=""){if("boolean"!=typeof t)throw new Error((e&&`"${e}"`)+"expected boolean, got type="+typeof t);return t}function u(t,e,r=""){const n=(0,s.aY)(t),i=t?.length,o=void 0!==e;if(!n||o&&i!==e)throw new Error((r&&`"${r}" `)+"expected Uint8Array"+(o?` of length ${e}`:"")+", got "+(n?`length=${i}`:"type="+typeof t));return t}function h(t){const e=t.toString(16);return 1&e.length?"0"+e:e}function l(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return""===t?o:BigInt("0x"+t)}function d(t){return l((0,s.My)(t))}function f(t){return(0,s.DO)(t),l((0,s.My)(Uint8Array.from(t).reverse()))}function p(t,e){return(0,s.aT)(t.toString(16).padStart(2*e,"0"))}function g(t,e){return p(t,e).reverse()}function y(t,e,r){let n;if("string"==typeof e)try{n=(0,s.aT)(e)}catch(e){throw new Error(t+" must be hex string or Uint8Array, cause: "+e)}else{if(!(0,s.aY)(e))throw new Error(t+" must be hex string or Uint8Array");n=Uint8Array.from(e)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function m(t){return Uint8Array.from(t)}const w=t=>"bigint"==typeof t&&o<=t;function b(t,e,r,n){if(!function(t,e,r){return w(t)&&w(e)&&w(r)&&e<=t&&t<r}(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function v(t){let e;for(e=0;t>o;t>>=a,e+=1);return e}const _=t=>(a<<BigInt(t))-a;function k(t,e,r={}){if(!t||"object"!=typeof t)throw new Error("expected valid options object");function n(e,r,n){const i=t[e];if(n&&void 0===i)return;const s=typeof i;if(s!==r||null===i)throw new Error(`param "${e}" is invalid: expected ${r}, got ${s}`)}Object.entries(e).forEach(([t,e])=>n(t,e,!1)),Object.entries(r).forEach(([t,e])=>n(t,e,!0))}const S=()=>{throw new Error("not implemented")};function E(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(void 0!==i)return i;const s=t(r,...n);return e.set(r,s),s}}const A=BigInt(0),I=BigInt(1),x=BigInt(2),B=BigInt(3),P=BigInt(4),T=BigInt(5),O=BigInt(7),M=BigInt(8),R=BigInt(9),L=BigInt(16);function C(t,e){const r=t%e;return r>=A?r:e+r}function U(t,e,r){let n=t;for(;e-- >A;)n*=n,n%=r;return n}function z(t,e){if(t===A)throw new Error("invert: expected non-zero number");if(e<=A)throw new Error("invert: expected positive modulus, got "+e);let r=C(t,e),n=e,i=A,s=I,o=I,a=A;for(;r!==A;){const t=n/r,e=n%r,c=i-o*t,u=s-a*t;n=r,r=e,i=o,s=a,o=c,a=u}if(n!==I)throw new Error("invert: does not exist");return C(i,e)}function N(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function K(t,e){const r=(t.ORDER+I)/P,n=t.pow(e,r);return N(t,n,e),n}function D(t,e){const r=(t.ORDER-T)/M,n=t.mul(e,x),i=t.pow(n,r),s=t.mul(e,i),o=t.mul(t.mul(s,x),i),a=t.mul(s,t.sub(o,t.ONE));return N(t,a,e),a}function W(t){if(t<B)throw new Error("sqrt is not defined for small field");let e=t-I,r=0;for(;e%x===A;)e/=x,r++;let n=x;const i=$(t);for(;1===j(i,n);)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===r)return K;let s=i.pow(n,e);const o=(e+I)/x;return function(t,n){if(t.is0(n))return n;if(1!==j(t,n))throw new Error("Cannot find square root");let i=r,a=t.mul(t.ONE,s),c=t.pow(n,e),u=t.pow(n,o);for(;!t.eql(c,t.ONE);){if(t.is0(c))return t.ZERO;let e=1,r=t.sqr(c);for(;!t.eql(r,t.ONE);)if(e++,r=t.sqr(r),e===i)throw new Error("Cannot find square root");const n=I<<BigInt(i-e-1),s=t.pow(a,n);i=e,a=t.sqr(s),c=t.mul(c,a),u=t.mul(u,s)}return u}}const F=(t,e)=>(C(t,e)&I)===I,H=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function q(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce((e,r,i)=>t.is0(r)?e:(n[i]=e,t.mul(e,r)),t.ONE),s=t.inv(i);return e.reduceRight((e,r,i)=>t.is0(r)?e:(n[i]=t.mul(e,n[i]),t.mul(e,r)),s),n}function j(t,e){const r=(t.ORDER-I)/x,n=t.pow(e,r),i=t.eql(n,t.ONE),s=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function V(t,e){void 0!==e&&(0,s.Fe)(e);const r=void 0!==e?e:t.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function $(t,e,r=!1,n={}){if(t<=A)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,s,o,a=!1;if("object"==typeof e&&null!=e){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const t=e;t.BITS&&(i=t.BITS),t.sqrt&&(s=t.sqrt),"boolean"==typeof t.isLE&&(r=t.isLE),"boolean"==typeof t.modFromBytes&&(a=t.modFromBytes),o=t.allowedLengths}else"number"==typeof e&&(i=e),n.sqrt&&(s=n.sqrt);const{nBitLength:c,nByteLength:u}=V(t,i);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let h;const l=Object.freeze({ORDER:t,isLE:r,BITS:c,BYTES:u,MASK:_(c),ZERO:A,ONE:I,allowedLengths:o,create:e=>C(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("invalid field element: expected bigint, got "+typeof e);return A<=e&&e<t},is0:t=>t===A,isValidNot0:t=>!l.is0(t)&&l.isValid(t),isOdd:t=>(t&I)===I,neg:e=>C(-e,t),eql:(t,e)=>t===e,sqr:e=>C(e*e,t),add:(e,r)=>C(e+r,t),sub:(e,r)=>C(e-r,t),mul:(e,r)=>C(e*r,t),pow:(t,e)=>function(t,e,r){if(r<A)throw new Error("invalid exponent, negatives unsupported");if(r===A)return t.ONE;if(r===I)return e;let n=t.ONE,i=e;for(;r>A;)r&I&&(n=t.mul(n,i)),i=t.sqr(i),r>>=I;return n}(l,t,e),div:(e,r)=>C(e*z(r,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>z(e,t),sqrt:s||(e=>{return h||(h=(r=t)%P===B?K:r%M===T?D:r%L===R?function(t){const e=$(t),r=W(t),n=r(e,e.neg(e.ONE)),i=r(e,n),s=r(e,e.neg(n)),o=(t+O)/L;return(t,e)=>{let r=t.pow(e,o),a=t.mul(r,n);const c=t.mul(r,i),u=t.mul(r,s),h=t.eql(t.sqr(a),e),l=t.eql(t.sqr(c),e);r=t.cmov(r,a,h),a=t.cmov(u,c,l);const d=t.eql(t.sqr(a),e),f=t.cmov(r,a,d);return N(t,f,e),f}}(r):W(r)),h(l,e);var r}),toBytes:t=>r?g(t,u):p(t,u),fromBytes:(e,n=!0)=>{if(o){if(!o.includes(e.length)||e.length>u)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+e.length);const t=new Uint8Array(u);t.set(e,r?0:t.length-e.length),e=t}if(e.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+e.length);let i=r?f(e):d(e);if(a&&(i=C(i,t)),!n&&!l.isValid(i))throw new Error("invalid field element: outside of range 0..ORDER");return i},invertBatch:t=>q(l,t),cmov:(t,e,r)=>r?e:t});return Object.freeze(l)}function Z(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function G(t){const e=Z(t);return e+Math.ceil(e/2)}const Y=BigInt(0),J=BigInt(1);function X(t,e){const r=e.negate();return t?r:e}function Q(t,e){const r=q(t.Fp,e.map(t=>t.Z));return e.map((e,n)=>t.fromAffine(e.toAffine(r[n])))}function tt(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function et(t,e){tt(t,e);const r=2**t;return{windows:Math.ceil(e/t)+1,windowSize:2**(t-1),mask:_(t),maxNumber:r,shiftBy:BigInt(t)}}function rt(t,e,r){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=r;let a=Number(t&i),c=t>>o;a>n&&(a-=s,c+=J);const u=e*n;return{nextN:c,offset:u+Math.abs(a)-1,isZero:0===a,isNeg:a<0,isNegF:e%2!=0,offsetF:u}}const nt=new WeakMap,it=new WeakMap;function st(t){return it.get(t)||1}function ot(t){if(t!==Y)throw new Error("invalid wNAF")}class at{constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}_unsafeLadder(t,e,r=this.ZERO){let n=t;for(;e>Y;)e&J&&(r=r.add(n)),n=n.double(),e>>=J;return r}precomputeWindow(t,e){const{windows:r,windowSize:n}=et(e,this.bits),i=[];let s=t,o=s;for(let t=0;t<r;t++){o=s,i.push(o);for(let t=1;t<n;t++)o=o.add(s),i.push(o);s=o.double()}return i}wNAF(t,e,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let n=this.ZERO,i=this.BASE;const s=et(t,this.bits);for(let t=0;t<s.windows;t++){const{nextN:o,offset:a,isZero:c,isNeg:u,isNegF:h,offsetF:l}=rt(r,t,s);r=o,c?i=i.add(X(h,e[l])):n=n.add(X(u,e[a]))}return ot(r),{p:n,f:i}}wNAFUnsafe(t,e,r,n=this.ZERO){const i=et(t,this.bits);for(let t=0;t<i.windows&&r!==Y;t++){const{nextN:s,offset:o,isZero:a,isNeg:c}=rt(r,t,i);if(r=s,!a){const t=e[o];n=n.add(c?t.negate():t)}}return ot(r),n}getPrecomputes(t,e,r){let n=nt.get(e);return n||(n=this.precomputeWindow(e,t),1!==t&&("function"==typeof r&&(n=r(n)),nt.set(e,n))),n}cached(t,e,r){const n=st(t);return this.wNAF(n,this.getPrecomputes(n,t,r),e)}unsafe(t,e,r,n){const i=st(t);return 1===i?this._unsafeLadder(t,e,n):this.wNAFUnsafe(i,this.getPrecomputes(i,t,r),e,n)}createCache(t,e){tt(e,this.bits),it.set(t,e),nt.delete(t)}hasCache(t){return 1!==st(t)}}function ct(t,e,r,n){(function(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})})(r,t),function(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}(n,e);const i=r.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=v(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=_(c),h=new Array(Number(u)+1).fill(o);let l=o;for(let t=Math.floor((e.BITS-1)/c)*c;t>=0;t-=c){h.fill(o);for(let e=0;e<s;e++){const i=n[e],s=Number(i>>BigInt(t)&u);h[s]=h[s].add(r[e])}let e=o;for(let t=h.length-1,r=o;t>0;t--)r=r.add(h[t]),e=e.add(r);if(l=l.add(e),0!==t)for(let t=0;t<c;t++)l=l.double()}return l}function ut(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return function(t){k(t,H.reduce((t,e)=>(t[e]="function",t),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"}))}(e),e}return $(t,{isLE:r})}function ht(t,e,r={},n){if(void 0===n&&(n="edwards"===t),!e||"object"!=typeof e)throw new Error(`expected valid ${t} CURVE object`);for(const t of["p","n","h"]){const r=e[t];if(!("bigint"==typeof r&&r>Y))throw new Error(`CURVE.${t} must be positive bigint`)}const i=ut(e.p,r.Fp,n),s=ut(e.n,r.Fn,n),o=["Gx","Gy","a","weierstrass"===t?"b":"d"];for(const t of o)if(!i.isValid(e[t]))throw new Error(`CURVE.${t} must be valid field element of CURVE.Fp`);return{CURVE:e=Object.freeze(Object.assign({},e)),Fp:i,Fn:s}}const lt=BigInt(0),dt=BigInt(1),ft=BigInt(2),pt=BigInt(8);class gt{constructor(t){this.ep=t}static fromBytes(t){S()}static fromHex(t){S()}get x(){return this.toAffine().x}get y(){return this.toAffine().y}clearCofactor(){return this}assertValidity(){this.ep.assertValidity()}toAffine(t){return this.ep.toAffine(t)}toHex(){return(0,s.My)(this.toBytes())}toString(){return this.toHex()}isTorsionFree(){return!0}isSmallOrder(){return!1}add(t){return this.assertSame(t),this.init(this.ep.add(t.ep))}subtract(t){return this.assertSame(t),this.init(this.ep.subtract(t.ep))}multiply(t){return this.init(this.ep.multiply(t))}multiplyUnsafe(t){return this.init(this.ep.multiplyUnsafe(t))}double(){return this.init(this.ep.double())}negate(){return this.init(this.ep.negate())}precompute(t,e){return this.init(this.ep.precompute(t,e))}toRawBytes(){return this.toBytes()}}function yt(t){const{CURVE:e,curveOpts:r,hash:n,eddsaOpts:i}=function(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r={Fp:t.Fp,Fn:$(e.n,t.nBitLength,!0),uvRatio:t.uvRatio},n={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:r,hash:t.hash,eddsaOpts:n}}(t),o=function(t,e={}){const r=ht("edwards",t,e,e.FpFnLE),{Fp:n,Fn:i}=r;let o=r.CURVE;const{h:a}=o;k(e,{},{uvRatio:"function"});const h=ft<<BigInt(8*i.BYTES)-dt,l=t=>n.create(t),d=e.uvRatio||((t,e)=>{try{return{isValid:!0,value:n.sqrt(n.div(t,e))}}catch(t){return{isValid:!1,value:lt}}});if(!function(t,e,r,n){const i=t.sqr(r),s=t.sqr(n),o=t.add(t.mul(e.a,i),s),a=t.add(t.ONE,t.mul(e.d,t.mul(i,s)));return t.eql(o,a)}(n,o,o.Gx,o.Gy))throw new Error("bad curve params: generator point");function p(t,e,r=!1){return b("coordinate "+t,e,r?dt:lt,h),e}function g(t){if(!(t instanceof _))throw new Error("ExtendedPoint expected")}const w=E((t,e)=>{const{X:r,Y:i,Z:s}=t,o=t.is0();null==e&&(e=o?pt:n.inv(s));const a=l(r*e),c=l(i*e),u=n.mul(s,e);if(o)return{x:lt,y:dt};if(u!==dt)throw new Error("invZ was invalid");return{x:a,y:c}}),v=E(t=>{const{a:e,d:r}=o;if(t.is0())throw new Error("bad point: ZERO");const{X:n,Y:i,Z:s,T:a}=t,c=l(n*n),u=l(i*i),h=l(s*s),d=l(h*h),f=l(c*e);if(l(h*l(f+u))!==l(d+l(r*l(c*u))))throw new Error("bad point: equation left != right (1)");if(l(n*i)!==l(s*a))throw new Error("bad point: equation left != right (2)");return!0});class _{constructor(t,e,r,n){this.X=p("x",t),this.Y=p("y",e),this.Z=p("z",r,!0),this.T=p("t",n),Object.freeze(this)}static CURVE(){return o}static fromAffine(t){if(t instanceof _)throw new Error("extended point not allowed");const{x:e,y:r}=t||{};return p("x",e),p("y",r),new _(e,r,dt,l(e*r))}static fromBytes(t,e=!1){const r=n.BYTES,{a:i,d:s}=o;t=m(u(t,r,"point")),c(e,"zip215");const a=m(t),p=t[r-1];a[r-1]=-129&p;const g=f(a),y=e?h:n.ORDER;b("point.y",g,lt,y);const w=l(g*g),v=l(w-dt),k=l(s*w-i);let{isValid:S,value:E}=d(v,k);if(!S)throw new Error("bad point: invalid y coordinate");const A=(E&dt)===dt,I=!!(128&p);if(!e&&E===lt&&I)throw new Error("bad point: x=0 and x_0=1");return I!==A&&(E=l(-E)),_.fromAffine({x:E,y:g})}static fromHex(t,e=!1){return _.fromBytes(y("point",t),e)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(t=8,e=!0){return S.createCache(this,t),e||this.multiply(ft),this}assertValidity(){v(this)}equals(t){g(t);const{X:e,Y:r,Z:n}=this,{X:i,Y:s,Z:o}=t,a=l(e*o),c=l(i*n),u=l(r*o),h=l(s*n);return a===c&&u===h}is0(){return this.equals(_.ZERO)}negate(){return new _(l(-this.X),this.Y,this.Z,l(-this.T))}double(){const{a:t}=o,{X:e,Y:r,Z:n}=this,i=l(e*e),s=l(r*r),a=l(ft*l(n*n)),c=l(t*i),u=e+r,h=l(l(u*u)-i-s),d=c+s,f=d-a,p=c-s,g=l(h*f),y=l(d*p),m=l(h*p),w=l(f*d);return new _(g,y,w,m)}add(t){g(t);const{a:e,d:r}=o,{X:n,Y:i,Z:s,T:a}=this,{X:c,Y:u,Z:h,T:d}=t,f=l(n*c),p=l(i*u),y=l(a*r*d),m=l(s*h),w=l((n+i)*(c+u)-f-p),b=m-y,v=m+y,k=l(p-e*f),S=l(w*b),E=l(v*k),A=l(w*k),I=l(b*v);return new _(S,E,I,A)}subtract(t){return this.add(t.negate())}multiply(t){if(!i.isValidNot0(t))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:e,f:r}=S.cached(this,t,t=>Q(_,t));return Q(_,[e,r])[0]}multiplyUnsafe(t,e=_.ZERO){if(!i.isValid(t))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return t===lt?_.ZERO:this.is0()||t===dt?this:S.unsafe(this,t,t=>Q(_,t),e)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}isTorsionFree(){return S.unsafe(this,o.n).is0()}toAffine(t){return w(this,t)}clearCofactor(){return a===dt?this:this.multiplyUnsafe(a)}toBytes(){const{x:t,y:e}=this.toAffine(),r=n.toBytes(e);return r[r.length-1]|=t&dt?128:0,r}toHex(){return(0,s.My)(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(t){return Q(_,t)}static msm(t,e){return ct(_,i,t,e)}_setWindowSize(t){this.precompute(t)}toRawBytes(){return this.toBytes()}}_.BASE=new _(o.Gx,o.Gy,dt,l(o.Gx*o.Gy)),_.ZERO=new _(lt,dt,dt,lt),_.Fp=n,_.Fn=i;const S=new at(_,i.BITS);return _.BASE.precompute(8),_}(e,r);return function(t,e){const r=e.Point;return Object.assign({},e,{ExtendedPoint:r,CURVE:t,nBitLength:r.Fn.BITS,nByteLength:r.Fn.BYTES})}(t,function(t,e,r={}){if("function"!=typeof e)throw new Error('"hash" function param is required');k(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=r,{BASE:i,Fp:o,Fn:a}=t,h=r.randomBytes||s.po,l=r.adjustScalarBytes||(t=>t),d=r.domain||((t,e,r)=>{if(c(r,"phflag"),e.length||r)throw new Error("Contexts/pre-hash are not supported");return t});function p(t){return a.create(f(t))}function g(t){const{head:r,prefix:n,scalar:s}=function(t){const r=_.secretKey;t=y("private key",t,r);const n=y("hashed private key",e(t),2*r),i=l(n.slice(0,r));return{head:i,prefix:n.slice(r,2*r),scalar:p(i)}}(t),o=i.multiply(s),a=o.toBytes();return{head:r,prefix:n,scalar:s,point:o,pointBytes:a}}function m(t){return g(t).pointBytes}function w(t=Uint8Array.of(),...r){const i=(0,s.Id)(...r);return p(e(d(i,y("context",t),!!n)))}const b={zip215:!0},v=o.BYTES,_={secretKey:v,publicKey:v,signature:2*v,seed:v};function S(t=h(_.seed)){return u(t,_.seed,"seed")}const E={getExtendedPublicKey:g,randomSecretKey:S,isValidSecretKey:function(t){return(0,s.aY)(t)&&t.length===a.BYTES},isValidPublicKey:function(e,r){try{return!!t.fromBytes(e,r)}catch(t){return!1}},toMontgomery(e){const{y:r}=t.fromBytes(e),n=_.publicKey,i=32===n;if(!i&&57!==n)throw new Error("only defined for 25519 and 448");const s=i?o.div(dt+r,dt-r):o.div(r-dt,r+dt);return o.toBytes(s)},toMontgomerySecret(t){const r=_.secretKey;u(t,r);const n=e(t.subarray(0,r));return l(n).subarray(0,r)},randomPrivateKey:S,precompute:(e=8,r=t.BASE)=>r.precompute(e,!1)};return Object.freeze({keygen:function(t){const e=E.randomSecretKey(t);return{secretKey:e,publicKey:m(e)}},getPublicKey:m,sign:function(t,e,r={}){t=y("message",t),n&&(t=n(t));const{prefix:o,scalar:c,pointBytes:h}=g(e),l=w(r.context,o,t),d=i.multiply(l).toBytes(),f=w(r.context,d,h,t),p=a.create(l+f*c);if(!a.isValid(p))throw new Error("sign failed: invalid s");return u((0,s.Id)(d,a.toBytes(p)),_.signature,"result")},verify:function(e,r,s,o=b){const{context:a,zip215:u}=o,h=_.signature;e=y("signature",e,h),r=y("message",r),s=y("publicKey",s,_.publicKey),void 0!==u&&c(u,"zip215"),n&&(r=n(r));const l=h/2,d=e.subarray(0,l),p=f(e.subarray(l,h));let g,m,v;try{g=t.fromBytes(s,u),m=t.fromBytes(d,u),v=i.multiplyUnsafe(p)}catch(t){return!1}if(!u&&g.isSmallOrder())return!1;const k=w(a,m.toBytes(),g.toBytes(),r);return m.add(g.multiplyUnsafe(k)).subtract(v).clearCofactor().is0()},utils:E,Point:t,lengths:_})}(o,n,i))}(0,s.AI)("HashToScalar-");const mt=BigInt(0),wt=BigInt(1),bt=BigInt(2),vt=(BigInt(3),BigInt(5)),_t=BigInt(8),kt=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),St=(()=>({p:kt,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:_t,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")}))();function Et(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const At=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function It(t,e){const r=kt,n=C(e*e*e,r),i=C(n*n*e,r);let s=C(t*n*function(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=kt,o=t*t%s*t%s,a=U(o,bt,s)*o%s,c=U(a,wt,s)*t%s,u=U(c,vt,s)*c%s,h=U(u,e,s)*u%s,l=U(h,r,s)*h%s,d=U(l,n,s)*l%s,f=U(d,i,s)*d%s,p=U(f,i,s)*d%s,g=U(p,e,s)*u%s;return{pow_p_5_8:U(g,bt,s)*t%s,b2:o}}(t*i).pow_p_5_8,r);const o=C(e*s*s,r),a=s,c=C(s*At,r),u=o===t,h=o===C(-t,r),l=o===C(-t*At,r);return u&&(s=a),(h||l)&&(s=c),F(s,r)&&(s=C(-s,r)),{isValid:u||h,value:s}}const xt=(()=>$(St.p,{isLE:!0}))(),Bt=(()=>$(St.n,{isLE:!0}))(),Pt=(()=>({...St,Fp:xt,hash:i.Zf,adjustScalarBytes:Et,uvRatio:It}))(),Tt=(()=>yt(Pt))(),Ot=At,Mt=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Rt=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Lt=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Ct=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),Ut=t=>It(wt,t),zt=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Nt=t=>Tt.Point.Fp.create(f(t)&zt);function Kt(t){const{d:e}=St,r=kt,n=t=>xt.create(t),i=n(Ot*t*t),s=n((i+wt)*Lt);let o=BigInt(-1);const a=n((o-e*i)*n(i+e));let{isValid:c,value:u}=It(s,a),h=n(u*t);F(h,r)||(h=n(-h)),c||(u=h),c||(o=i);const l=n(o*(i-wt)*Ct-a),d=u*u,f=n((u+u)*a),p=n(l*Mt),g=n(wt-d),y=n(wt+d);return new Tt.Point(n(f*y),n(g*p),n(p*y),n(f*g))}class Dt extends gt{constructor(t){super(t)}static fromAffine(t){return new Dt(Tt.Point.fromAffine(t))}assertSame(t){if(!(t instanceof Dt))throw new Error("RistrettoPoint expected")}init(t){return new Dt(t)}static hashToCurve(t){return function(t){(0,s.DO)(t,64);const e=Kt(Nt(t.subarray(0,32))),r=Kt(Nt(t.subarray(32,64)));return new Dt(e.add(r))}(y("ristrettoHash",t,64))}static fromBytes(t){(0,s.DO)(t,32);const{a:e,d:r}=St,n=kt,i=t=>xt.create(t),o=Nt(t);if(!function(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return 0===r}(xt.toBytes(o),t)||F(o,n))throw new Error("invalid ristretto255 encoding 1");const a=i(o*o),c=i(wt+e*a),u=i(wt-e*a),h=i(c*c),l=i(u*u),d=i(e*r*h-l),{isValid:f,value:p}=Ut(i(d*l)),g=i(p*u),y=i(p*g*d);let m=i((o+o)*g);F(m,n)&&(m=i(-m));const w=i(c*y),b=i(m*w);if(!f||F(b,n)||w===mt)throw new Error("invalid ristretto255 encoding 2");return new Dt(new Tt.Point(m,w,wt,b))}static fromHex(t){return Dt.fromBytes(y("ristrettoHex",t,32))}static msm(t,e){return ct(Dt,Tt.Point.Fn,t,e)}toBytes(){let{X:t,Y:e,Z:r,T:n}=this.ep;const i=kt,s=t=>xt.create(t),o=s(s(r+e)*s(r-e)),a=s(t*e),c=s(a*a),{value:u}=Ut(s(o*c)),h=s(u*o),l=s(u*a),d=s(h*l*n);let f;if(F(n*d,i)){let r=s(e*Ot),n=s(t*Ot);t=r,e=n,f=s(h*Rt)}else f=l;F(t*d,i)&&(e=s(-e));let p=s((r-e)*f);return F(p,i)&&(p=s(-p)),xt.toBytes(p)}equals(t){this.assertSame(t);const{X:e,Y:r}=this.ep,{X:n,Y:i}=t.ep,s=t=>xt.create(t),o=s(e*i)===s(r*n),a=s(r*i)===s(e*n);return o||a}is0(){return this.equals(Dt.ZERO)}}Dt.BASE=(()=>new Dt(Tt.Point.BASE))(),Dt.ZERO=(()=>new Dt(Tt.Point.ZERO))(),Dt.Fp=(()=>xt)(),Dt.Fn=(()=>Bt)();var Wt=r(404),Ft=r.n(Wt),Ht=r(763),qt=r.n(Ht),jt=r(226),Vt=r(755),$t=r(601);function Zt(t){return Array.isArray(t)?"%5B"+t.map(Zt).join("%2C%20")+"%5D":"bigint"==typeof t?`${t}n`:encodeURIComponent(String(null!=t&&null===Object.getPrototypeOf(t)?{...t}:t))}function Gt([t,e]){return`${t}=${Zt(e)}`}var Yt=class extends Error{cause=this.cause;context;constructor(...[t,e]){let r,n;if(e){const{cause:t,...i}=e;t&&(n={cause:t}),Object.keys(i).length>0&&(r=i)}super(function(t,e={}){{let r=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(r+=` '${function(t){const e=Object.entries(t).map(Gt).join("&");return btoa(e)}(e)}'`),`${r}\``}}(t,r),n),this.context={__code:t,...r},this.name="SolanaError"}};function Jt(t){return"fixedSize"in t&&"number"==typeof t.fixedSize}function Xt(t){return 1!==t?.endian}function Qt(t){return e={fixedSize:t.size,write(e,r,n){t.range&&function(t,e,r,n){if(n<e||n>r)throw new Yt(8078011,{codecDescription:t,max:r,min:e,value:n})}(t.name,t.range[0],t.range[1],e);const i=new ArrayBuffer(t.size);return t.set(new DataView(i),e,Xt(t.config)),r.set(new Uint8Array(i),n),n+t.size}},Object.freeze({...e,encode:t=>{const r=new Uint8Array(function(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}(t,e));return e.write(t,r,0),r}});var e}function te(t){return e={fixedSize:t.size,read(e,r=0){!function(t,e,r=0){if(e.length-r<=0)throw new Yt(8078e3,{codecDescription:t})}(t.name,e,r),function(t,e,r,n=0){const i=r.length-n;if(i<e)throw new Yt(8078001,{bytesLength:i,codecDescription:t,expected:e})}(t.name,t.size,e,r);const n=new DataView(function(t,e,r){const n=t.byteOffset+(e??0),i=r??t.byteLength;return t.buffer.slice(n,n+i)}(e,r,t.size));return[t.get(n,Xt(t.config)),r+t.size]}},Object.freeze({...e,decode:(t,r=0)=>e.read(t,r)[0]});var e}var ee=(t={})=>Qt({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,r)=>t.setBigUint64(0,BigInt(e),r),size:8}),re=(t={})=>function(t,e){if(Jt(t)!==Jt(e))throw new Yt(8078004);if(Jt(t)&&Jt(e)&&t.fixedSize!==e.fixedSize)throw new Yt(8078005,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!Jt(t)&&!Jt(e)&&t.maxSize!==e.maxSize)throw new Yt(8078006,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}(ee(t),((t={})=>te({config:t,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}))(t));class ne extends TypeError{constructor(t,e){let r;const{message:n,explanation:i,...s}=t,{path:o}=t,a=0===o.length?n:`At path: ${o.join(".")} -- ${n}`;super(i??a),null!=i&&(this.cause=a),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}}function ie(t){return"object"==typeof t&&null!=t}function se(t){return ie(t)&&!Array.isArray(t)}function oe(t){return"symbol"==typeof t?t.toString():"string"==typeof t?JSON.stringify(t):`${t}`}function ae(t,e,r,n){if(!0===t)return;!1===t?t={}:"string"==typeof t&&(t={message:t});const{path:i,branch:s}=e,{type:o}=r,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${oe(n)}\``}=t;return{value:n,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:c}}function*ce(t,e,r,n){var i;ie(i=t)&&"function"==typeof i[Symbol.iterator]||(t=[t]);for(const i of t){const t=ae(i,e,r,n);t&&(yield t)}}function*ue(t,e,r={}){const{path:n=[],branch:i=[t],coerce:s=!1,mask:o=!1}=r,a={path:n,branch:i,mask:o};s&&(t=e.coercer(t,a));let c="valid";for(const n of e.validator(t,a))n.explanation=r.message,c="not_valid",yield[n,void 0];for(let[u,h,l]of e.entries(t,a)){const e=ue(h,l,{path:void 0===u?n:[...n,u],branch:void 0===u?i:[...i,h],coerce:s,mask:o,message:r.message});for(const r of e)r[0]?(c=null!=r[0].refinement?"not_refined":"not_valid",yield[r[0],void 0]):s&&(h=r[1],void 0===u?t=h:t instanceof Map?t.set(u,h):t instanceof Set?t.add(h):ie(t)&&(void 0!==h||u in t)&&(t[u]=h))}if("not_valid"!==c)for(const n of e.refiner(t,a))n.explanation=r.message,c="not_refined",yield[n,void 0];"valid"===c&&(yield[void 0,t])}class he{constructor(t){const{type:e,schema:r,validator:n,refiner:i,coercer:s=t=>t,entries:o=function*(){}}=t;this.type=e,this.schema=r,this.entries=o,this.coercer=s,this.validator=n?(t,e)=>ce(n(t,e),e,this,t):()=>[],this.refiner=i?(t,e)=>ce(i(t,e),e,this,t):()=>[]}assert(t,e){return le(t,this,e)}create(t,e){return de(t,this,e)}is(t){return fe(t,this)}mask(t,e){return function(t,e,r){const n=pe(t,e,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}(t,this,e)}validate(t,e={}){return pe(t,this,e)}}function le(t,e,r){const n=pe(t,e,{message:r});if(n[0])throw n[0]}function de(t,e,r){const n=pe(t,e,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function fe(t,e){return!pe(t,e)[0]}function pe(t,e,r={}){const n=ue(t,e,r),i=function(t){const{done:e,value:r}=t.next();return e?void 0:r}(n);return i[0]?[new ne(i[0],function*(){for(const t of n)t[0]&&(yield t[0])}),void 0]:[void 0,i[1]]}function ge(t,e){return new he({type:t,schema:null,validator:e})}function ye(t){return new he({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer:t=>Array.isArray(t)?t.slice():t,validator:t=>Array.isArray(t)||`Expected an array value, but received: ${oe(t)}`})}function me(){return ge("boolean",t=>"boolean"==typeof t)}function we(t){return ge("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${oe(e)}`)}function be(t){const e=oe(t),r=typeof t;return new he({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?t:null,validator:r=>r===t||`Expected the literal \`${e}\`, but received: ${oe(r)}`})}function ve(t){return new he({...t,validator:(e,r)=>null===e||t.validator(e,r),refiner:(e,r)=>null===e||t.refiner(e,r)})}function _e(){return ge("number",t=>"number"==typeof t&&!isNaN(t)||`Expected a number, but received: ${oe(t)}`)}function ke(t){return new he({...t,validator:(e,r)=>void 0===e||t.validator(e,r),refiner:(e,r)=>void 0===e||t.refiner(e,r)})}function Se(t,e){return new he({type:"record",schema:null,*entries(r){if(ie(r))for(const n in r){const i=r[n];yield[n,n,t],yield[n,i,e]}},validator:t=>se(t)||`Expected an object, but received: ${oe(t)}`,coercer:t=>se(t)?{...t}:t})}function Ee(){return ge("string",t=>"string"==typeof t||`Expected a string, but received: ${oe(t)}`)}function Ae(t){const e=ge("never",()=>!1);return new he({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(t.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],t[i]||e]}},validator:t=>Array.isArray(t)||`Expected an array, but received: ${oe(t)}`,coercer:t=>Array.isArray(t)?t.slice():t})}function Ie(t){const e=Object.keys(t);return new he({type:"type",schema:t,*entries(r){if(ie(r))for(const n of e)yield[n,r[n],t[n]]},validator:t=>se(t)||`Expected an object, but received: ${oe(t)}`,coercer:t=>se(t)?{...t}:t})}function xe(t){const e=t.map(t=>t.type).join(" | ");return new he({type:"union",schema:null,coercer(e,r){for(const n of t){const[t,i]=n.validate(e,{coerce:!0,mask:r.mask});if(!t)return i}return e},validator(r,n){const i=[];for(const e of t){const[...t]=ue(r,e,n),[s]=t;if(!s[0])return[];for(const[e]of t)e&&i.push(e)}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${oe(r)}`,...i]}})}function Be(){return ge("unknown",()=>!0)}function Pe(t,e,r){return new he({...t,coercer:(n,i)=>fe(n,e)?t.coercer(r(n,i),i):t.coercer(n,i)})}var Te=r(22),Oe=r.n(Te),Me=r(678),Re=class extends Me{socket;constructor(t,e,r){super(),this.socket=new window.WebSocket(t,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=t=>this.emit("message",t.data),this.socket.onerror=t=>this.emit("error",t),this.socket.onclose=t=>{this.emit("close",t.code,t.reason)}}send(t,e,r){const n=r||e;try{this.socket.send(t),n()}catch(t){n(t)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}};var Le=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},Ce=class extends Me{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:n=!0,reconnect_interval:i=1e3,max_reconnects:s=5,...o}={},a,c){super(),this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=s,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=a||(()=>"number"==typeof this.rpc_id?++this.rpc_id:Number(this.rpc_id)+1),this.dataPack=c||new Le,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,n){return n||"object"!=typeof r||(n=r,r=null),new Promise((i,s)=>{if(!this.ready)return s(new Error("socket not ready"));const o=this.generate_request_id(t,e),a={jsonrpc:"2.0",method:t,params:e||void 0,id:o};this.socket.send(this.dataPack.encode(a),n,t=>{if(t)return s(t);this.queue[o]={promise:[i,s]},r&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],s(new Error("reply timeout"))},r))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,n)=>{if(!this.ready)return n(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),t=>{if(t)return n(t);r()})})}async subscribe(t){"string"==typeof t&&(t=[t]);const e=await this.call("rpc.on",t);if("string"==typeof t&&"ok"!==e[t])throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){"string"==typeof t&&(t=[t]);const e=await this.call("rpc.off",t);if("string"==typeof t&&"ok"!==e[t])throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket&&this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return void 0!==this.reconnect_timer_id}willReconnect(){return this.reconnect&&(0===this.max_reconnects||this.current_reconnects<this.max_reconnects)}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=n.Buffer.from(t).toString());try{t=this.dataPack.decode(t)}catch(t){return}if(t.notification&&this.listeners(t.notification).length){if(!Object.keys(t.params).length)return this.emit(t.notification);const e=[t.notification];if(t.params.constructor===Object)e.push(t.params);else for(let r=0;r<t.params.length;r++)e.push(t.params[r]);return Promise.resolve().then(()=>{this.emit.apply(this,e)})}if(!this.queue[t.id])return t.method?Promise.resolve().then(()=>{this.emit(t.method,t?.params)}):void 0;"error"in t=="result"in t&&this.queue[t.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[t.id].timeout&&clearTimeout(this.queue[t.id].timeout),t.error?this.queue[t.id].promise[1](t.error):this.queue[t.id].promise[0](t.result),delete this.queue[t.id]}),this.socket.addEventListener("error",t=>this.emit("error",t)),this.socket.addEventListener("close",({code:r,reason:n})=>{this.ready&&setTimeout(()=>this.emit("close",r,n),0),this.ready=!1,this.socket=void 0,1e3!==r&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)?this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,n),1))})}},Ue=r(271);const ze=BigInt(0),Ne=BigInt(1),Ke=BigInt(2),De=BigInt(7),We=BigInt(256),Fe=BigInt(113),He=[],qe=[],je=[];for(let t=0,e=Ne,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],He.push(2*(5*n+r)),qe.push((t+1)*(t+2)/2%64);let i=ze;for(let t=0;t<7;t++)e=(e<<Ne^(e>>De)*Fe)%We,e&Ke&&(i^=Ne<<(Ne<<BigInt(t))-Ne);je.push(i)}const Ve=(0,Ue.lD)(je,!0),$e=Ve[0],Ze=Ve[1],Ge=(t,e,r)=>r>32?(0,Ue.WM)(t,e,r):(0,Ue.P5)(t,e,r),Ye=(t,e,r)=>r>32?(0,Ue.im)(t,e,r):(0,Ue.B4)(t,e,r);class Je extends s.Vw{constructor(t,e,r,n=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=n,this.rounds=i,(0,s.Fe)(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,s.DH)(this.state)}clone(){return this._cloneInto()}keccak(){(0,s.fd)(this.state32),function(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let e=0;e<10;e++)r[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const n=(e+8)%10,i=(e+2)%10,s=r[i],o=r[i+1],a=Ge(s,o,1)^r[n],c=Ye(s,o,1)^r[n+1];for(let r=0;r<50;r+=10)t[e+r]^=a,t[e+r+1]^=c}let e=t[2],i=t[3];for(let r=0;r<24;r++){const n=qe[r],s=Ge(e,i,n),o=Ye(e,i,n),a=He[r];e=t[a],i=t[a+1],t[a]=s,t[a+1]=o}for(let e=0;e<50;e+=10){for(let n=0;n<10;n++)r[n]=t[e+n];for(let n=0;n<10;n++)t[e+n]^=~r[(n+2)%10]&r[(n+4)%10]}t[0]^=$e[n],t[1]^=Ze[n]}(0,s.uH)(r)}(this.state32,this.rounds),(0,s.fd)(this.state32),this.posOut=0,this.pos=0}update(t){(0,s.CC)(this),t=(0,s.ZJ)(t),(0,s.DO)(t);const{blockLen:e,state:r}=this,n=t.length;for(let i=0;i<n;){const s=Math.min(e-this.pos,n-i);for(let e=0;e<s;e++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:n}=this;t[r]^=e,128&e&&r===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){(0,s.CC)(this,!1),(0,s.DO)(t),this.finish();const e=this.state,{blockLen:r}=this;for(let n=0,i=t.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);t.set(e.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,s.Fe)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,s.Ht)(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,s.uH)(this.state)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return t||(t=new Je(e,r,n,s,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=n,t.enableXOF=s,t.destroyed=this.destroyed,t}}const Xe=(()=>{return t=1,e=136,r=32,(0,s.qj)(()=>new Je(e,t,r));var t,e,r})();class Qe extends s.Vw{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,(0,s.sd)(t);const r=(0,s.ZJ)(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?t.create().update(r).digest():r);for(let t=0;t<i.length;t++)i[t]^=54;this.iHash.update(i),this.oHash=t.create();for(let t=0;t<i.length;t++)i[t]^=106;this.oHash.update(i),(0,s.uH)(i)}update(t){return(0,s.CC)(this),this.iHash.update(t),this}digestInto(t){(0,s.CC)(this),(0,s.DO)(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;return t.finished=n,t.destroyed=i,t.blockLen=s,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const tr=(t,e,r)=>new Qe(t,e).update(r).digest();tr.create=(t,e)=>new Qe(t,e);const er=(t,e)=>(t+(t>=0?e:-e)/cr)/e;function rr(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function nr(t,e){const r={};for(let n of Object.keys(e))r[n]=void 0===t[n]?e[n]:t[n];return c(r.lowS,"lowS"),c(r.prehash,"prehash"),void 0!==r.format&&rr(r.format),r}class ir extends Error{constructor(t=""){super(t)}}const sr={Err:ir,_tlv:{encode:(t,e)=>{const{Err:r}=sr;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(1&e.length)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=h(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?h(i.length/2|128):"";return h(t)+s+i+e},decode(t,e){const{Err:r}=sr;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++];let s=0;if(128&i){const t=127&i;if(!t)throw new r("tlv.decode(long): indefinite length not supported");if(t>4)throw new r("tlv.decode(long): byte length is too big");const o=e.subarray(n,n+t);if(o.length!==t)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(const t of o)s=s<<8|t;if(n+=t,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=i;const o=e.subarray(n,n+s);if(o.length!==s)throw new r("tlv.decode: wrong value length");return{v:o,l:e.subarray(n+s)}}},_int:{encode(t){const{Err:e}=sr;if(t<or)throw new e("integer: negative integers are not allowed");let r=h(t);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=sr;if(128&t[0])throw new e("invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new e("invalid signature integer: unnecessary leading zero");return d(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=sr,i=y("signature",t),{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:u,l:h}=n.decode(2,c);if(h.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(t){const{_tlv:e,_int:r}=sr,n=e.encode(2,r.encode(t.r))+e.encode(2,r.encode(t.s));return e.encode(48,n)}},or=BigInt(0),ar=BigInt(1),cr=BigInt(2),ur=BigInt(3),hr=BigInt(4);function lr(t,e){const{BYTES:r}=t;let n;if("bigint"==typeof e)n=e;else{let i=y("private key",e);try{n=t.fromBytes(i)}catch(t){throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!t.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function dr(t){return Uint8Array.of(t?2:3)}function fr(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function pr(t,e,r={}){(0,s.sd)(e),k(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=r.randomBytes||s.po,i=r.hmac||((t,...r)=>tr(e,t,(0,s.Id)(...r))),{Fp:o,Fn:a}=t,{ORDER:c,BITS:h}=a,{keygen:l,getPublicKey:m,getSharedSecret:w,utils:v,lengths:S}=function(t,e={}){const{Fn:r}=t,n=e.randomBytes||s.po,i=Object.assign(fr(t.Fp,r),{seed:G(r.ORDER)});function o(t){try{return!!lr(r,t)}catch(t){return!1}}function a(t=n(i.seed)){return function(t,e,r=!1){const n=t.length,i=Z(e),s=G(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=C(r?f(t):d(t),e-I)+I;return r?g(o,i):p(o,i)}(u(t,i.seed,"seed"),r.ORDER)}function c(e,n=!0){return t.BASE.multiply(lr(r,e)).toBytes(n)}function h(e){if("bigint"==typeof e)return!1;if(e instanceof t)return!0;const{secretKey:n,publicKey:s,publicKeyUncompressed:o}=i;if(r.allowedLengths||n===s)return;const a=y("key",e).length;return a===s||a===o}const l={isValidSecretKey:o,isValidPublicKey:function(e,r){const{publicKey:n,publicKeyUncompressed:s}=i;try{const i=e.length;return!(!0===r&&i!==n||!1===r&&i!==s||!t.fromBytes(e))}catch(t){return!1}},randomSecretKey:a,isValidPrivateKey:o,randomPrivateKey:a,normPrivateKeyToScalar:t=>lr(r,t),precompute:(e=8,r=t.BASE)=>r.precompute(e,!1)};return Object.freeze({getPublicKey:c,getSharedSecret:function(e,n,i=!0){if(!0===h(e))throw new Error("first arg must be private key");if(!1===h(n))throw new Error("second arg must be public key");const s=lr(r,e);return t.fromHex(n).multiply(s).toBytes(i)},keygen:function(t){const e=a(t);return{secretKey:e,publicKey:c(e)}},Point:t,utils:l,lengths:i})}(t,r),E={prehash:!1,lowS:"boolean"==typeof r.lowS&&r.lowS,format:void 0,extraEntropy:!1},A="compact";function x(t){return t>c>>ar}function B(t,e){if(!a.isValidNot0(e))throw new Error(`invalid signature ${t}: out of range 1..Point.Fn.ORDER`);return e}class P{constructor(t,e,r){this.r=B("r",t),this.s=B("s",e),null!=r&&(this.recovery=r),Object.freeze(this)}static fromBytes(t,e=A){let r;if(function(t,e){rr(e);const r=S.signature;u(t,"compact"===e?r:"recovered"===e?r+1:void 0,`${e} signature`)}(t,e),"der"===e){const{r:e,s:r}=sr.toSig(u(t));return new P(e,r)}"recovered"===e&&(r=t[0],e="compact",t=t.subarray(1));const n=a.BYTES,i=t.subarray(0,n),s=t.subarray(n,2*n);return new P(a.fromBytes(i),a.fromBytes(s),r)}static fromHex(t,e){return this.fromBytes((0,s.aT)(t),e)}addRecoveryBit(t){return new P(this.r,this.s,t)}recoverPublicKey(e){const r=o.ORDER,{r:n,s:i,recovery:u}=this;if(null==u||![0,1,2,3].includes(u))throw new Error("recovery id invalid");if(c*cr<r&&u>1)throw new Error("recovery id is ambiguous for h>1 curve");const h=2===u||3===u?n+c:n;if(!o.isValid(h))throw new Error("recovery id 2 or 3 invalid");const l=o.toBytes(h),d=t.fromBytes((0,s.Id)(dr(!(1&u)),l)),f=a.inv(h),p=O(y("msgHash",e)),g=a.create(-p*f),m=a.create(i*f),w=t.BASE.multiplyUnsafe(g).add(d.multiplyUnsafe(m));if(w.is0())throw new Error("point at infinify");return w.assertValidity(),w}hasHighS(){return x(this.s)}toBytes(t=A){if(rr(t),"der"===t)return(0,s.aT)(sr.hexFromSig(this));const e=a.toBytes(this.r),r=a.toBytes(this.s);if("recovered"===t){if(null==this.recovery)throw new Error("recovery bit must be present");return(0,s.Id)(Uint8Array.of(this.recovery),e,r)}return(0,s.Id)(e,r)}toHex(t){return(0,s.My)(this.toBytes(t))}assertValidity(){}static fromCompact(t){return P.fromBytes(y("sig",t),"compact")}static fromDER(t){return P.fromBytes(y("sig",t),"der")}normalizeS(){return this.hasHighS()?new P(this.r,a.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return(0,s.My)(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return(0,s.My)(this.toBytes("compact"))}}const T=r.bits2int||function(t){if(t.length>8192)throw new Error("input is too large");const e=d(t),r=8*t.length-h;return r>0?e>>BigInt(r):e},O=r.bits2int_modN||function(t){return a.create(T(t))},M=_(h);function R(t){return b("num < 2^"+h,t,or,M),a.toBytes(t)}function L(t,r){return u(t,void 0,"message"),r?u(e(t),void 0,"prehashed message"):t}return Object.freeze({keygen:l,getPublicKey:m,getSharedSecret:w,utils:v,lengths:S,Point:t,sign:function(r,o,c={}){r=y("message",r);const{seed:u,k2sig:h}=function(e,r,i){if(["recovered","canonical"].some(t=>t in i))throw new Error("sign() legacy options not supported");const{lowS:o,prehash:c,extraEntropy:u}=nr(i,E);e=L(e,c);const h=O(e),l=lr(a,r),d=[R(l),R(h)];if(null!=u&&!1!==u){const t=!0===u?n(S.secretKey):u;d.push(y("extraEntropy",t))}const f=(0,s.Id)(...d),p=h;return{seed:f,k2sig:function(e){const r=T(e);if(!a.isValidNot0(r))return;const n=a.inv(r),i=t.BASE.multiply(r).toAffine(),s=a.create(i.x);if(s===or)return;const c=a.create(n*a.create(p+s*l));if(c===or)return;let u=(i.x===s?0:2)|Number(i.y&ar),h=c;return o&&x(c)&&(h=a.neg(c),u^=1),new P(s,h,u)}}}(r,o,c),l=function(t,e,r){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");const n=t=>new Uint8Array(t),i=t=>Uint8Array.of(t);let o=n(t),a=n(t),c=0;const u=()=>{o.fill(1),a.fill(0),c=0},h=(...t)=>r(a,o,...t),l=(t=n(0))=>{a=h(i(0),t),o=h(),0!==t.length&&(a=h(i(1),t),o=h())},d=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const r=[];for(;t<e;){o=h();const e=o.slice();r.push(e),t+=o.length}return(0,s.Id)(...r)};return(t,e)=>{let r;for(u(),l(t);!(r=e(d()));)l();return u(),r}}(e.outputLen,a.BYTES,i);return l(u,h)},verify:function(e,r,n,i={}){const{lowS:o,prehash:c,format:u}=nr(i,E);if(n=y("publicKey",n),r=L(y("message",r),c),"strict"in i)throw new Error("options.strict was renamed to lowS");const h=void 0===u?function(t){let e;const r="string"==typeof t||(0,s.aY)(t),n=!r&&null!==t&&"object"==typeof t&&"bigint"==typeof t.r&&"bigint"==typeof t.s;if(!r&&!n)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(n)e=new P(t.r,t.s);else if(r){try{e=P.fromBytes(y("sig",t),"der")}catch(t){if(!(t instanceof sr.Err))throw t}if(!e)try{e=P.fromBytes(y("sig",t),"compact")}catch(t){return!1}}return e||!1}(e):P.fromBytes(y("sig",e),u);if(!1===h)return!1;try{const e=t.fromBytes(n);if(o&&h.hasHighS())return!1;const{r:i,s}=h,c=O(r),u=a.inv(s),l=a.create(c*u),d=a.create(i*u),f=t.BASE.multiplyUnsafe(l).add(e.multiplyUnsafe(d));return!f.is0()&&a.create(f.x)===i}catch(t){return!1}},recoverPublicKey:function(t,e,r={}){const{prehash:n}=nr(r,E);return e=L(e,n),P.fromBytes(t,"recovered").recoverPublicKey(e).toBytes()},Signature:P,hash:e})}function gr(t){const{CURVE:e,curveOpts:r,hash:n,ecdsaOpts:i}=function(t){const{CURVE:e,curveOpts:r}=function(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp;let n=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(t=>Math.ceil(t/2)))):void 0;return{CURVE:e,curveOpts:{Fp:r,Fn:$(e.n,{BITS:t.nBitLength,allowedLengths:n,modFromBytes:t.wrapPrivateKey}),allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes}}}(t),n={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,hash:t.hash,ecdsaOpts:n}}(t);return function(t,e){const r=e.Point;return Object.assign({},e,{ProjectivePoint:r,CURVE:Object.assign({},t,V(r.Fn.ORDER,r.Fn.BITS))})}(t,pr(function(t,e={}){const r=ht("weierstrass",t,e),{Fp:n,Fn:i}=r;let o=r.CURVE;const{h:a,n:h}=o;k(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:l}=e;if(l&&(!n.is0(o.a)||"bigint"!=typeof l.beta||!Array.isArray(l.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const d=fr(n,i);function f(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}const p=e.toBytes||function(t,e,r){const{x:i,y:o}=e.toAffine(),a=n.toBytes(i);if(c(r,"isCompressed"),r){f();const t=!n.isOdd(o);return(0,s.Id)(dr(t),a)}return(0,s.Id)(Uint8Array.of(4),a,n.toBytes(o))},g=e.fromBytes||function(t){u(t,void 0,"Point");const{publicKey:e,publicKeyUncompressed:r}=d,i=t.length,s=t[0],o=t.subarray(1);if(i!==e||2!==s&&3!==s){if(i===r&&4===s){const t=n.BYTES,e=n.fromBytes(o.subarray(0,t)),r=n.fromBytes(o.subarray(t,2*t));if(!w(e,r))throw new Error("bad point: is not on curve");return{x:e,y:r}}throw new Error(`bad point: got length ${i}, expected compressed=${e} or uncompressed=${r}`)}{const t=n.fromBytes(o);if(!n.isValid(t))throw new Error("bad point: is not on curve, wrong x");const e=m(t);let r;try{r=n.sqrt(e)}catch(t){const e=t instanceof Error?": "+t.message:"";throw new Error("bad point: is not on curve, sqrt error"+e)}return f(),!(1&~s)!==n.isOdd(r)&&(r=n.neg(r)),{x:t,y:r}}};function m(t){const e=n.sqr(t),r=n.mul(e,t);return n.add(n.add(r,n.mul(t,o.a)),o.b)}function w(t,e){const r=n.sqr(e),i=m(t);return n.eql(r,i)}if(!w(o.Gx,o.Gy))throw new Error("bad curve params: generator point");const b=n.mul(n.pow(o.a,ur),hr),S=n.mul(n.sqr(o.b),BigInt(27));if(n.is0(n.add(b,S)))throw new Error("bad curve params: a or b");function A(t,e,r=!1){if(!n.isValid(e)||r&&n.is0(e))throw new Error(`bad point coordinate ${t}`);return e}function I(t){if(!(t instanceof O))throw new Error("ProjectivePoint expected")}function x(t){if(!l||!l.basises)throw new Error("no endo");return function(t,e,r){const[[n,i],[s,o]]=e,a=er(o*t,r),c=er(-i*t,r);let u=t-a*n-c*s,h=-a*i-c*o;const l=u<or,d=h<or;l&&(u=-u),d&&(h=-h);const f=_(Math.ceil(v(r)/2))+ar;if(u<or||u>=f||h<or||h>=f)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:l,k1:u,k2neg:d,k2:h}}(t,l.basises,i.ORDER)}const B=E((t,e)=>{const{X:r,Y:i,Z:s}=t;if(n.eql(s,n.ONE))return{x:r,y:i};const o=t.is0();null==e&&(e=o?n.ONE:n.inv(s));const a=n.mul(r,e),c=n.mul(i,e),u=n.mul(s,e);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw new Error("invZ was invalid");return{x:a,y:c}}),P=E(t=>{if(t.is0()){if(e.allowInfinityPoint&&!n.is0(t.Y))return;throw new Error("bad point: ZERO")}const{x:r,y:i}=t.toAffine();if(!n.isValid(r)||!n.isValid(i))throw new Error("bad point: x or y not field elements");if(!w(r,i))throw new Error("bad point: equation left != right");if(!t.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function T(t,e,r,i,s){return r=new O(n.mul(r.X,t),r.Y,r.Z),e=X(i,e),r=X(s,r),e.add(r)}class O{constructor(t,e,r){this.X=A("x",t),this.Y=A("y",e,!0),this.Z=A("z",r),Object.freeze(this)}static CURVE(){return o}static fromAffine(t){const{x:e,y:r}=t||{};if(!t||!n.isValid(e)||!n.isValid(r))throw new Error("invalid affine point");if(t instanceof O)throw new Error("projective point not allowed");return n.is0(e)&&n.is0(r)?O.ZERO:new O(e,r,n.ONE)}static fromBytes(t){const e=O.fromAffine(g(u(t,void 0,"point")));return e.assertValidity(),e}static fromHex(t){return O.fromBytes(y("pointHex",t))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(t=8,e=!0){return R.createCache(this,t),e||this.multiply(ur),this}assertValidity(){P(this)}hasEvenY(){const{y:t}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(t)}equals(t){I(t);const{X:e,Y:r,Z:i}=this,{X:s,Y:o,Z:a}=t,c=n.eql(n.mul(e,a),n.mul(s,i)),u=n.eql(n.mul(r,a),n.mul(o,i));return c&&u}negate(){return new O(this.X,n.neg(this.Y),this.Z)}double(){const{a:t,b:e}=o,r=n.mul(e,ur),{X:i,Y:s,Z:a}=this;let c=n.ZERO,u=n.ZERO,h=n.ZERO,l=n.mul(i,i),d=n.mul(s,s),f=n.mul(a,a),p=n.mul(i,s);return p=n.add(p,p),h=n.mul(i,a),h=n.add(h,h),c=n.mul(t,h),u=n.mul(r,f),u=n.add(c,u),c=n.sub(d,u),u=n.add(d,u),u=n.mul(c,u),c=n.mul(p,c),h=n.mul(r,h),f=n.mul(t,f),p=n.sub(l,f),p=n.mul(t,p),p=n.add(p,h),h=n.add(l,l),l=n.add(h,l),l=n.add(l,f),l=n.mul(l,p),u=n.add(u,l),f=n.mul(s,a),f=n.add(f,f),l=n.mul(f,p),c=n.sub(c,l),h=n.mul(f,d),h=n.add(h,h),h=n.add(h,h),new O(c,u,h)}add(t){I(t);const{X:e,Y:r,Z:i}=this,{X:s,Y:a,Z:c}=t;let u=n.ZERO,h=n.ZERO,l=n.ZERO;const d=o.a,f=n.mul(o.b,ur);let p=n.mul(e,s),g=n.mul(r,a),y=n.mul(i,c),m=n.add(e,r),w=n.add(s,a);m=n.mul(m,w),w=n.add(p,g),m=n.sub(m,w),w=n.add(e,i);let b=n.add(s,c);return w=n.mul(w,b),b=n.add(p,y),w=n.sub(w,b),b=n.add(r,i),u=n.add(a,c),b=n.mul(b,u),u=n.add(g,y),b=n.sub(b,u),l=n.mul(d,w),u=n.mul(f,y),l=n.add(u,l),u=n.sub(g,l),l=n.add(g,l),h=n.mul(u,l),g=n.add(p,p),g=n.add(g,p),y=n.mul(d,y),w=n.mul(f,w),g=n.add(g,y),y=n.sub(p,y),y=n.mul(d,y),w=n.add(w,y),p=n.mul(g,w),h=n.add(h,p),p=n.mul(b,w),u=n.mul(m,u),u=n.sub(u,p),p=n.mul(m,g),l=n.mul(b,l),l=n.add(l,p),new O(u,h,l)}subtract(t){return this.add(t.negate())}is0(){return this.equals(O.ZERO)}multiply(t){const{endo:r}=e;if(!i.isValidNot0(t))throw new Error("invalid scalar: out of range");let n,s;const o=t=>R.cached(this,t,t=>Q(O,t));if(r){const{k1neg:e,k1:i,k2neg:a,k2:c}=x(t),{p:u,f:h}=o(i),{p:l,f:d}=o(c);s=h.add(d),n=T(r.beta,u,l,e,a)}else{const{p:e,f:r}=o(t);n=e,s=r}return Q(O,[n,s])[0]}multiplyUnsafe(t){const{endo:r}=e,n=this;if(!i.isValid(t))throw new Error("invalid scalar: out of range");if(t===or||n.is0())return O.ZERO;if(t===ar)return n;if(R.hasCache(this))return this.multiply(t);if(r){const{k1neg:e,k1:i,k2neg:s,k2:o}=x(t),{p1:a,p2:c}=function(t,e,r,n){let i=e,s=t.ZERO,o=t.ZERO;for(;r>Y||n>Y;)r&J&&(s=s.add(i)),n&J&&(o=o.add(i)),i=i.double(),r>>=J,n>>=J;return{p1:s,p2:o}}(O,n,i,o);return T(r.beta,a,c,e,s)}return R.unsafe(n,t)}multiplyAndAddUnsafe(t,e,r){const n=this.multiplyUnsafe(e).add(t.multiplyUnsafe(r));return n.is0()?void 0:n}toAffine(t){return B(this,t)}isTorsionFree(){const{isTorsionFree:t}=e;return a===ar||(t?t(O,this):R.unsafe(this,h).is0())}clearCofactor(){const{clearCofactor:t}=e;return a===ar?this:t?t(O,this):this.multiplyUnsafe(a)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}toBytes(t=!0){return c(t,"isCompressed"),this.assertValidity(),p(O,this,t)}toHex(t=!0){return(0,s.My)(this.toBytes(t))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(t=!0){return this.toBytes(t)}_setWindowSize(t){this.precompute(t)}static normalizeZ(t){return Q(O,t)}static msm(t,e){return ct(O,i,t,e)}static fromPrivateKey(t){return O.BASE.multiply(lr(i,t))}}O.BASE=new O(o.Gx,o.Gy,n.ONE),O.ZERO=new O(n.ZERO,n.ONE,n.ZERO),O.Fp=n,O.Fn=i;const M=i.BITS,R=new at(O,e.endo?Math.ceil(M/2):M);return O.BASE.precompute(8),O}(e,r),n,i))}const yr={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},mr={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},wr=BigInt(2),br=$(yr.p,{sqrt:function(t){const e=yr.p,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,h=u*u*t%e,l=U(h,r,e)*h%e,d=U(l,r,e)*h%e,f=U(d,wr,e)*u%e,p=U(f,i,e)*f%e,g=U(p,s,e)*p%e,y=U(g,a,e)*g%e,m=U(y,c,e)*y%e,w=U(m,a,e)*g%e,b=U(w,r,e)*h%e,v=U(b,o,e)*p%e,_=U(v,n,e)*u%e,k=U(_,wr,e);if(!br.eql(br.sqr(k),t))throw new Error("Cannot find square root");return k}}),vr=function(t,e){const r=e=>gr({...t,hash:e});return{...r(e),create:r}}({...yr,Fp:br,lowS:!0,endo:mr},i.sc),_r=Tt.utils.randomPrivateKey,kr=()=>{const t=Tt.utils.randomPrivateKey(),e=Sr(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),{publicKey:e,secretKey:r}},Sr=Tt.getPublicKey;function Er(t){try{return Tt.ExtendedPoint.fromHex(t),!0}catch{return!1}}const Ar=(t,e)=>Tt.sign(t,e.slice(0,32)),Ir=Tt.verify,xr=t=>n.Buffer.isBuffer(t)?t:t instanceof Uint8Array?n.Buffer.from(t.buffer,t.byteOffset,t.byteLength):n.Buffer.from(t);class Br{constructor(t){Object.assign(this,t)}encode(){return n.Buffer.from((0,Vt.serialize)(Tr,this))}static decode(t){return(0,Vt.deserialize)(Tr,this,t)}static decodeUnchecked(t){return(0,Vt.deserializeUnchecked)(Tr,this,t)}}class Pr extends Br{constructor(t){if(super(t),this.enum="",1!==Object.keys(t).length)throw new Error("Enum can only take single value");Object.keys(t).map(t=>{this.enum=t})}}const Tr=new Map;var Or;const Mr=32,Rr=32;let Lr=1;class Cr extends Br{constructor(t){if(super({}),this._bn=void 0,function(t){return void 0!==t._bn}(t))this._bn=t._bn;else{if("string"==typeof t){const e=qt().decode(t);if(e.length!=Rr)throw new Error("Invalid public key input");this._bn=new(Ft())(e)}else this._bn=new(Ft())(t);if(this._bn.byteLength()>Rr)throw new Error("Invalid public key input")}}static unique(){const t=new Cr(Lr);return Lr+=1,new Cr(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return qt().encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(n.Buffer);if(t.length===Rr)return t;const e=n.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const i=n.Buffer.concat([t.toBuffer(),n.Buffer.from(e),r.toBuffer()]),s=(0,jt.sc)(i);return new Cr(s)}static createProgramAddressSync(t,e){let r=n.Buffer.alloc(0);t.forEach(function(t){if(t.length>Mr)throw new TypeError("Max seed length exceeded");r=n.Buffer.concat([r,xr(t)])}),r=n.Buffer.concat([r,e.toBuffer(),n.Buffer.from("ProgramDerivedAddress")]);const i=(0,jt.sc)(r);if(Er(i))throw new Error("Invalid seeds, address must fall off the curve");return new Cr(i)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r,i=255;for(;0!=i;){try{const s=t.concat(n.Buffer.from([i]));r=this.createProgramAddressSync(s,e)}catch(t){if(t instanceof TypeError)throw t;i--;continue}return[r,i]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){return Er(new Cr(t).toBytes())}}Or=Cr,Cr.default=new Or("11111111111111111111111111111111"),Tr.set(Cr,{kind:"struct",fields:[["_bn","u256"]]});class Ur{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=xr(t);if(64!==t.length)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=xr(_r()),this._publicKey=xr(Sr(this._secretKey))}get publicKey(){return new Cr(this._publicKey)}get secretKey(){return n.Buffer.concat([this._secretKey,this._publicKey],64)}}const zr=new Cr("BPFLoader1111111111111111111111111111111111"),Nr=1232,Kr=127,Dr=64;class Wr extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Wr.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Fr extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Fr.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Hr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Hr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class qr{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const e=new Map;this.keySegments().flat().forEach((t,r)=>{e.set(t.toBase58(),r)});const r=t=>{const r=e.get(t.toBase58());if(void 0===r)throw new Error("Encountered an unknown instruction account key during compilation");return r};return t.map(t=>({programIdIndex:r(t.programId),accountKeyIndexes:t.keys.map(t=>r(t.pubkey)),data:t.data}))}}const jr=(t="publicKey")=>$t.av(32,t),Vr=(t="signature")=>$t.av(64,t),$r=(t="string")=>{const e=$t.w3([$t.DH("length"),$t.DH("lengthPadding"),$t.av($t.cY($t.DH(),-8),"chars")],t),r=e.decode.bind(e),i=e.encode.bind(e),s=e;return s.decode=(t,e)=>r(t,e).chars.toString(),s.encode=(t,e,r)=>{const s={chars:n.Buffer.from(t,"utf8")};return i(s,e,r)},s.alloc=t=>$t.DH().span+$t.DH().span+n.Buffer.from(t,"utf8").length,s};function Zr(t,e){const r=t=>{if(t.span>=0)return t.span;if("function"==typeof t.alloc)return t.alloc(e[t.property]);if("count"in t&&"elementLayout"in t){const n=e[t.property];if(Array.isArray(n))return n.length*r(t.elementLayout)}else if("fields"in t)return Zr({layout:t},e[t.property]);return 0};let n=0;return t.layout.fields.forEach(t=>{n+=r(t)}),n}function Gr(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(127&n)<<7*r,r+=1,!(128&n))break}return e}function Yr(t,e){let r=e;for(;;){let e=127&r;if(r>>=7,0==r){t.push(e);break}e|=128,t.push(e)}}function Jr(t,e){if(!t)throw new Error(e||"Assertion failed")}class Xr{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,n=t=>{const e=t.toBase58();let n=r.get(e);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(e,n)),n},i=n(e);i.isSigner=!0,i.isWritable=!0;for(const e of t){n(e.programId).isInvoked=!0;for(const t of e.keys){const e=n(t.pubkey);e.isSigner||=t.isSigner,e.isWritable||=t.isWritable}}return new Xr(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Jr(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,t])=>t.isSigner&&t.isWritable),r=t.filter(([,t])=>t.isSigner&&!t.isWritable),n=t.filter(([,t])=>!t.isSigner&&t.isWritable),i=t.filter(([,t])=>!t.isSigner&&!t.isWritable),s={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Jr(e.length>0,"Expected at least one writable signer key");const[t]=e[0];Jr(t===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[s,[...e.map(([t])=>new Cr(t)),...r.map(([t])=>new Cr(t)),...n.map(([t])=>new Cr(t)),...i.map(([t])=>new Cr(t))]]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,t=>!t.isSigner&&!t.isInvoked&&t.isWritable),[n,i]=this.drainKeysFoundInLookupTable(t.state.addresses,t=>!t.isSigner&&!t.isInvoked&&!t.isWritable);if(0!==e.length||0!==n.length)return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,n=new Array;for(const[i,s]of this.keyMetaMap.entries())if(e(s)){const e=new Cr(i),s=t.findIndex(t=>t.equals(e));s>=0&&(Jr(s<256,"Max lookup table index exceeded"),r.push(s),n.push(e),this.keyMetaMap.delete(i))}return[r,n]}}const Qr="Reached end of buffer unexpectedly";function tn(t){if(0===t.length)throw new Error(Qr);return t.shift()}function en(t,...e){const[r]=e;if(2===e.length?r+(e[1]??0)>t.length:r>=t.length)throw new Error(Qr);return t.splice(...e)}class rn{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(t=>new Cr(t)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:qt().decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new qr(this.staticAccountKeys)}static compile(t){const e=Xr.compile(t.instructions,t.payerKey),[r,n]=e.getMessageComponents(),i=new qr(n).compileInstructions(t.instructions).map(t=>({programIdIndex:t.programIdIndex,accounts:t.accountKeyIndexes,data:qt().encode(t.data)}));return new rn({header:r,accountKeys:n,recentBlockhash:t.recentBlockhash,instructions:i})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;return t>=this.header.numRequiredSignatures?t-e<this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts:t<e-this.header.numReadonlySignedAccounts}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Yr(e,t);const r=this.instructions.map(t=>{const{accounts:e,programIdIndex:r}=t,i=Array.from(qt().decode(t.data));let s=[];Yr(s,e.length);let o=[];return Yr(o,i.length),{programIdIndex:r,keyIndicesCount:n.Buffer.from(s),keyIndices:e,dataLength:n.Buffer.from(o),data:i}});let i=[];Yr(i,r.length);let s=n.Buffer.alloc(Nr);n.Buffer.from(i).copy(s);let o=i.length;r.forEach(t=>{const e=$t.w3([$t.u8("programIdIndex"),$t.av(t.keyIndicesCount.length,"keyIndicesCount"),$t.O6($t.u8("keyIndex"),t.keyIndices.length,"keyIndices"),$t.av(t.dataLength.length,"dataLength"),$t.O6($t.u8("userdatum"),t.data.length,"data")]).encode(t,s,o);o+=e}),s=s.slice(0,o);const a=$t.w3([$t.av(1,"numRequiredSignatures"),$t.av(1,"numReadonlySignedAccounts"),$t.av(1,"numReadonlyUnsignedAccounts"),$t.av(e.length,"keyCount"),$t.O6(jr("key"),t,"keys"),jr("recentBlockhash")]),c={numRequiredSignatures:n.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:n.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:n.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:n.Buffer.from(e),keys:this.accountKeys.map(t=>xr(t.toBytes())),recentBlockhash:qt().decode(this.recentBlockhash)};let u=n.Buffer.alloc(2048);const h=a.encode(c,u);return s.copy(u,h),u.slice(0,h+s.length)}static from(t){let e=[...t];const r=tn(e);if(r!==(r&Kr))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=tn(e),s=tn(e),o=Gr(e);let a=[];for(let t=0;t<o;t++){const t=en(e,0,Rr);a.push(new Cr(n.Buffer.from(t)))}const c=en(e,0,Rr),u=Gr(e);let h=[];for(let t=0;t<u;t++){const t=tn(e),r=en(e,0,Gr(e)),i=en(e,0,Gr(e)),s=qt().encode(n.Buffer.from(i));h.push({programIdIndex:t,accounts:r,data:s})}const l={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:qt().encode(n.Buffer.from(c)),accountKeys:a,instructions:h};return new rn(l)}}class nn{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new qr(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;return t>=r?t-r<this.addressTableLookups.reduce((t,e)=>t+e.writableIndexes.length,0):t>=this.header.numRequiredSignatures?t-e<r-e-this.header.numReadonlyUnsignedAccounts:t<e-this.header.numReadonlySignedAccounts}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const n=t.find(t=>t.key.equals(r.accountKey));if(!n)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const t of r.writableIndexes){if(!(t<n.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${r.accountKey.toBase58()}`);e.writable.push(n.state.addresses[t])}for(const t of r.readonlyIndexes){if(!(t<n.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${r.accountKey.toBase58()}`);e.readonly.push(n.state.addresses[t])}}return e}static compile(t){const e=Xr.compile(t.instructions,t.payerKey),r=new Array,n={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const t of i){const i=e.extractTableLookup(t);if(void 0!==i){const[t,{writable:e,readonly:s}]=i;r.push(t),n.writable.push(...e),n.readonly.push(...s)}}const[s,o]=e.getMessageComponents(),a=new qr(o,n).compileInstructions(t.instructions);return new nn({header:s,staticAccountKeys:o,recentBlockhash:t.recentBlockhash,compiledInstructions:a,addressTableLookups:r})}serialize(){const t=Array();Yr(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Yr(r,this.compiledInstructions.length);const n=this.serializeAddressTableLookups(),i=Array();Yr(i,this.addressTableLookups.length);const s=$t.w3([$t.u8("prefix"),$t.w3([$t.u8("numRequiredSignatures"),$t.u8("numReadonlySignedAccounts"),$t.u8("numReadonlyUnsignedAccounts")],"header"),$t.av(t.length,"staticAccountKeysLength"),$t.O6(jr(),this.staticAccountKeys.length,"staticAccountKeys"),jr("recentBlockhash"),$t.av(r.length,"instructionsLength"),$t.av(e.length,"serializedInstructions"),$t.av(i.length,"addressTableLookupsLength"),$t.av(n.length,"serializedAddressTableLookups")]),o=new Uint8Array(Nr),a=s.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(t=>t.toBytes()),recentBlockhash:qt().decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},o);return o.slice(0,a)}serializeInstructions(){let t=0;const e=new Uint8Array(Nr);for(const r of this.compiledInstructions){const n=Array();Yr(n,r.accountKeyIndexes.length);const i=Array();Yr(i,r.data.length),t+=$t.w3([$t.u8("programIdIndex"),$t.av(n.length,"encodedAccountKeyIndexesLength"),$t.O6($t.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),$t.av(i.length,"encodedDataLength"),$t.av(r.data.length,"data")]).encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Nr);for(const r of this.addressTableLookups){const n=Array();Yr(n,r.writableIndexes.length);const i=Array();Yr(i,r.readonlyIndexes.length),t+=$t.w3([jr("accountKey"),$t.av(n.length,"encodedWritableIndexesLength"),$t.O6($t.u8(),r.writableIndexes.length,"writableIndexes"),$t.av(i.length,"encodedReadonlyIndexesLength"),$t.O6($t.u8(),r.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=tn(e),n=r&Kr;Jr(r!==n,"Expected versioned message but received legacy message"),Jr(0===n,`Expected versioned message with version 0 but found version ${n}`);const i={numRequiredSignatures:tn(e),numReadonlySignedAccounts:tn(e),numReadonlyUnsignedAccounts:tn(e)},s=[],o=Gr(e);for(let t=0;t<o;t++)s.push(new Cr(en(e,0,Rr)));const a=qt().encode(en(e,0,Rr)),c=Gr(e),u=[];for(let t=0;t<c;t++){const t=tn(e),r=en(e,0,Gr(e)),n=Gr(e),i=new Uint8Array(en(e,0,n));u.push({programIdIndex:t,accountKeyIndexes:r,data:i})}const h=Gr(e),l=[];for(let t=0;t<h;t++){const t=new Cr(en(e,0,Rr)),r=en(e,0,Gr(e)),n=en(e,0,Gr(e));l.push({accountKey:t,writableIndexes:r,readonlyIndexes:n})}return new nn({header:i,staticAccountKeys:s,recentBlockhash:a,compiledInstructions:u,addressTableLookups:l})}}const sn={deserializeMessageVersion(t){const e=t[0],r=e&Kr;return r===e?"legacy":r},deserialize:t=>{const e=sn.deserializeMessageVersion(t);if("legacy"===e)return rn.from(t);if(0===e)return nn.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let on=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const an=n.Buffer.alloc(Dr).fill(0);class cn{constructor(t){this.keys=void 0,this.programId=void 0,this.data=n.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class un{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(0===t.length)throw new Error("No instructions");return t.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new cn(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e,r;if(this.nonceInfo?(t=this.nonceInfo.nonce,e=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");if(e.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let t=0;t<e.length;t++)if(void 0===e[t].programId)throw new Error(`Transaction instruction index ${t} has undefined program id`);const n=[],i=[];e.forEach(t=>{t.keys.forEach(t=>{i.push({...t})});const e=t.programId.toString();n.includes(e)||n.push(e)}),n.forEach(t=>{i.push({pubkey:new Cr(t),isSigner:!1,isWritable:!1})});const s=[];i.forEach(t=>{const e=t.pubkey.toString(),r=s.findIndex(t=>t.pubkey.toString()===e);r>-1?(s[r].isWritable=s[r].isWritable||t.isWritable,s[r].isSigner=s[r].isSigner||t.isSigner):s.push(t)}),s.sort(function(t,e){return t.isSigner!==e.isSigner?t.isSigner?-1:1:t.isWritable!==e.isWritable?t.isWritable?-1:1:t.pubkey.toBase58().localeCompare(e.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})});const o=s.findIndex(t=>t.pubkey.equals(r));if(o>-1){const[t]=s.splice(o,1);t.isSigner=!0,t.isWritable=!0,s.unshift(t)}else s.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const t of this.signatures){const e=s.findIndex(e=>e.pubkey.equals(t.publicKey));if(!(e>-1))throw new Error(`unknown signer: ${t.publicKey.toString()}`);s[e].isSigner||(s[e].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let a=0,c=0,u=0;const h=[],l=[];s.forEach(({pubkey:t,isSigner:e,isWritable:r})=>{e?(h.push(t.toString()),a+=1,r||(c+=1)):(l.push(t.toString()),r||(u+=1))});const d=h.concat(l),f=e.map(t=>{const{data:e,programId:r}=t;return{programIdIndex:d.indexOf(r.toString()),accounts:t.keys.map(t=>d.indexOf(t.pubkey.toString())),data:qt().encode(e)}});return f.forEach(t=>{Jr(t.programIdIndex>=0),t.accounts.forEach(t=>Jr(t>=0))}),new rn({header:{numRequiredSignatures:a,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:u},accountKeys:d,recentBlockhash:t,instructions:f})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((t,r)=>e[r].equals(t.publicKey))||(this.signatures=e.map(t=>({signature:null,publicKey:t}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(0===t.length)throw new Error("No signers");const e=new Set;this.signatures=t.filter(t=>{const r=t.toString();return!e.has(r)&&(e.add(r),!0)}).map(t=>({signature:null,publicKey:t}))}sign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const n of t){const t=n.publicKey.toString();e.has(t)||(e.add(t),r.push(n))}this.signatures=r.map(t=>({signature:null,publicKey:t.publicKey}));const n=this._compile();this._partialSign(n,...r)}partialSign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const n of t){const t=n.publicKey.toString();e.has(t)||(e.add(t),r.push(n))}const n=this._compile();this._partialSign(n,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(t=>{const e=Ar(r,t.secretKey);this._addSignature(t.publicKey,xr(e))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Jr(64===e.length);const r=this.signatures.findIndex(e=>t.equals(e.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=n.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:n,publicKey:i}of this.signatures)null===n?e&&(r.missing||=[]).push(i):Ir(n,t,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),n=this.serializeMessage();if(r){const t=this._getMessageSignednessErrors(n,e);if(t){let e="Signature verification failed.";throw t.invalid&&(e+=`\nInvalid signature for public key${1===t.invalid.length?"":"(s)"} [\`${t.invalid.map(t=>t.toBase58()).join("`, `")}\`].`),t.missing&&(e+=`\nMissing signature for public key${1===t.missing.length?"":"(s)"} [\`${t.missing.map(t=>t.toBase58()).join("`, `")}\`].`),new Error(e)}}return this._serialize(n)}_serialize(t){const{signatures:e}=this,r=[];Yr(r,e.length);const i=r.length+64*e.length+t.length,s=n.Buffer.alloc(i);return Jr(e.length<256),n.Buffer.from(r).copy(s,0),e.forEach(({signature:t},e)=>{null!==t&&(Jr(64===t.length,"signature has invalid length"),n.Buffer.from(t).copy(s,r.length+64*e))}),t.copy(s,r.length+64*e.length),Jr(s.length<=Nr,`Transaction too large: ${s.length} > ${Nr}`),s}get keys(){return Jr(1===this.instructions.length),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Jr(1===this.instructions.length),this.instructions[0].programId}get data(){return Jr(1===this.instructions.length),this.instructions[0].data}static from(t){let e=[...t];const r=Gr(e);let i=[];for(let t=0;t<r;t++){const t=en(e,0,Dr);i.push(qt().encode(n.Buffer.from(t)))}return un.populate(rn.from(e),i)}static populate(t,e=[]){const r=new un;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((e,n)=>{const i={signature:e==qt().encode(an)?null:qt().decode(e),publicKey:t.accountKeys[n]};r.signatures.push(i)}),t.instructions.forEach(e=>{const n=e.accounts.map(e=>{const n=t.accountKeys[e];return{pubkey:n,isSigner:r.signatures.some(t=>t.publicKey.toString()===n.toString())||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}});r.instructions.push(new cn({keys:n,programId:t.accountKeys[e.programIdIndex],data:qt().decode(e.data)}))}),r._message=t,r._json=r.toJSON(),r}}class hn{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:n,recentBlockhash:i}=t,{numRequiredSignatures:s,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:a}=r,c=s-o;Jr(c>0,"Message header is invalid");const u=t.staticAccountKeys.length-s-a;Jr(u>=0,"Message header is invalid");const h=t.getAccountKeys(e),l=h.get(0);if(void 0===l)throw new Error("Failed to decompile message because no account keys were found");const d=[];for(const t of n){const e=[];for(const n of t.accountKeyIndexes){const t=h.get(n);if(void 0===t)throw new Error(`Failed to find key for account key index ${n}`);let i;i=n<s?n<c:n<h.staticAccountKeys.length?n-s<u:n-h.staticAccountKeys.length<h.accountKeysFromLookups.writable.length,e.push({pubkey:t,isSigner:n<r.numRequiredSignatures,isWritable:i})}const n=h.get(t.programIdIndex);if(void 0===n)throw new Error(`Failed to find program id for program id index ${t.programIdIndex}`);d.push(new cn({programId:n,data:xr(t.data),keys:e}))}return new hn({payerKey:l,instructions:d,recentBlockhash:i})}compileToLegacyMessage(){return rn.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return nn.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class ln{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,void 0!==e)Jr(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const e=[];for(let r=0;r<t.header.numRequiredSignatures;r++)e.push(new Uint8Array(Dr));this.signatures=e}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Yr(e,this.signatures.length);const r=$t.w3([$t.av(e.length,"encodedSignaturesLength"),$t.O6(Vr(),this.signatures.length,"signatures"),$t.av(t.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},n);return n.slice(0,i)}static deserialize(t){let e=[...t];const r=[],n=Gr(e);for(let t=0;t<n;t++)r.push(new Uint8Array(en(e,0,Dr)));const i=sn.deserialize(new Uint8Array(e));return new ln(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const n of t){const t=r.findIndex(t=>t.equals(n.publicKey));Jr(t>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[t]=Ar(e,n.secretKey)}}addSignature(t,e){Jr(64===e.byteLength,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(e=>e.equals(t));Jr(r>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[r]=e}}const dn=new Cr("SysvarC1ock11111111111111111111111111111111"),fn=new Cr("SysvarEpochSchedu1e111111111111111111111111"),pn=new Cr("Sysvar1nstructions1111111111111111111111111"),gn=new Cr("SysvarRecentB1ockHashes11111111111111111111"),yn=new Cr("SysvarRent111111111111111111111111111111111"),mn=new Cr("SysvarRewards111111111111111111111111111111"),wn=new Cr("SysvarS1otHashes111111111111111111111111111"),bn=new Cr("SysvarS1otHistory11111111111111111111111111"),vn=new Cr("SysvarStakeHistory1111111111111111111111111");class _n extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:n}){const i=n?`Logs: \n${JSON.stringify(n.slice(-10),null,2)}. `:"",s="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let o;switch(t){case"send":o=`Transaction ${e} resulted in an error. \n${r}. `+i+s;break;case"simulate":o=`Simulation failed. \nMessage: ${r}. \n`+i+s;break;default:o=`Unknown action '${t}'`}super(o),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=n||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(null==t||"object"!=typeof t||!("then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(t=>{if(t&&t.meta&&t.meta.logMessages){const r=t.meta.logMessages;this.transactionLogs=r,e(r)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}const kn={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class Sn extends Error{constructor({code:t,message:e,data:r},n){super(null!=n?`${n}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}async function En(t,e,r,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await t.sendTransaction(e,r,i);let o;if(null!=e.recentBlockhash&&null!=e.lastValidBlockHeight)o=(await t.confirmTransaction({abortSignal:n?.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=e.minNonceContextSlot&&null!=e.nonceInfo){const{nonceInstruction:r}=e.nonceInfo,i=r.keys[0].pubkey;o=(await t.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:i,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else null!=n?.abortSignal&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await t.confirmTransaction(s,n&&n.commitment)).value;if(o.err){if(null!=s)throw new _n({action:"send",signature:s,transactionMessage:`Status: (${JSON.stringify(o)})`});throw new Error(`Transaction ${s} failed (${JSON.stringify(o)})`)}return s}function An(t){return new Promise(e=>setTimeout(e,t))}function In(t,e){const r=t.layout.span>=0?t.layout.span:Zr(t,e),i=n.Buffer.alloc(r),s=Object.assign({instruction:t.index},e);return t.layout.encode(s,i),i}function xn(t,e){let r;try{r=t.layout.decode(e)}catch(t){throw new Error("invalid instruction; "+t)}if(r.instruction!==t.index)throw new Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${t.index}`);return r}const Bn=$t.I0("lamportsPerSignature"),Pn=$t.w3([$t.DH("version"),$t.DH("state"),jr("authorizedPubkey"),jr("nonce"),$t.w3([Bn],"feeCalculator")]),Tn=Pn.span;class On{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Pn.decode(xr(t),0);return new On({authorizedPubkey:new Cr(e.authorizedPubkey),nonce:new Cr(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function Mn(t){const e=(0,$t.av)(8,t),r=e.decode.bind(e),n=e.encode.bind(e),i=e,s=re();return i.decode=(t,e)=>{const n=r(t,e);return s.decode(n)},i.encode=(t,e,r)=>{const i=s.encode(t);return n(i,e,r)},i}class Rn{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=$t.DH("instruction").decode(t.data);let r;for(const[t,n]of Object.entries(Ln))if(n.index==e){r=t;break}if(!r)throw new Error("Instruction type incorrect; not a SystemInstruction");return r}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:r,programId:n}=xn(Ln.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new Cr(n)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=xn(Ln.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:r,programId:n}=xn(Ln.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new Cr(n)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=xn(Ln.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,space:n,programId:i}=xn(Ln.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new Cr(e),seed:r,space:n,programId:new Cr(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=xn(Ln.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new Cr(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,programId:n}=xn(Ln.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new Cr(e),seed:r,programId:new Cr(n)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:r,lamports:n,space:i,programId:s}=xn(Ln.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new Cr(e),seed:r,lamports:n,space:i,programId:new Cr(s)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=xn(Ln.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new Cr(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),xn(Ln.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=xn(Ln.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=xn(Ln.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new Cr(e)}}static checkProgramId(t){if(!t.equals(Cn.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Ln=Object.freeze({Create:{index:0,layout:$t.w3([$t.DH("instruction"),$t.Wg("lamports"),$t.Wg("space"),jr("programId")])},Assign:{index:1,layout:$t.w3([$t.DH("instruction"),jr("programId")])},Transfer:{index:2,layout:$t.w3([$t.DH("instruction"),Mn("lamports")])},CreateWithSeed:{index:3,layout:$t.w3([$t.DH("instruction"),jr("base"),$r("seed"),$t.Wg("lamports"),$t.Wg("space"),jr("programId")])},AdvanceNonceAccount:{index:4,layout:$t.w3([$t.DH("instruction")])},WithdrawNonceAccount:{index:5,layout:$t.w3([$t.DH("instruction"),$t.Wg("lamports")])},InitializeNonceAccount:{index:6,layout:$t.w3([$t.DH("instruction"),jr("authorized")])},AuthorizeNonceAccount:{index:7,layout:$t.w3([$t.DH("instruction"),jr("authorized")])},Allocate:{index:8,layout:$t.w3([$t.DH("instruction"),$t.Wg("space")])},AllocateWithSeed:{index:9,layout:$t.w3([$t.DH("instruction"),jr("base"),$r("seed"),$t.Wg("space"),jr("programId")])},AssignWithSeed:{index:10,layout:$t.w3([$t.DH("instruction"),jr("base"),$r("seed"),jr("programId")])},TransferWithSeed:{index:11,layout:$t.w3([$t.DH("instruction"),Mn("lamports"),$r("seed"),jr("programId")])},UpgradeNonceAccount:{index:12,layout:$t.w3([$t.DH("instruction")])}});class Cn{constructor(){}static createAccount(t){const e=In(Ln.Create,{lamports:t.lamports,space:t.space,programId:xr(t.programId.toBuffer())});return new cn({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:e})}static transfer(t){let e,r;return"basePubkey"in t?(e=In(Ln.TransferWithSeed,{lamports:BigInt(t.lamports),seed:t.seed,programId:xr(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]):(e=In(Ln.Transfer,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]),new cn({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;return"basePubkey"in t?(e=In(Ln.AssignWithSeed,{base:xr(t.basePubkey.toBuffer()),seed:t.seed,programId:xr(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]):(e=In(Ln.Assign,{programId:xr(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]),new cn({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=In(Ln.CreateWithSeed,{base:xr(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:xr(t.programId.toBuffer())});let r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||r.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new cn({keys:r,programId:this.programId,data:e})}static createNonceAccount(t){const e=new un;"basePubkey"in t&&"seed"in t?e.add(Cn.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Tn,programId:this.programId})):e.add(Cn.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Tn,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=In(Ln.InitializeNonceAccount,{authorized:xr(t.authorizedPubkey.toBuffer())}),r={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:gn,isSigner:!1,isWritable:!1},{pubkey:yn,isSigner:!1,isWritable:!1}],programId:this.programId,data:e};return new cn(r)}static nonceAdvance(t){const e=In(Ln.AdvanceNonceAccount),r={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:gn,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e};return new cn(r)}static nonceWithdraw(t){const e=In(Ln.WithdrawNonceAccount,{lamports:t.lamports});return new cn({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:gn,isSigner:!1,isWritable:!1},{pubkey:yn,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e})}static nonceAuthorize(t){const e=In(Ln.AuthorizeNonceAccount,{authorized:xr(t.newAuthorizedPubkey.toBuffer())});return new cn({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e})}static allocate(t){let e,r;return"basePubkey"in t?(e=In(Ln.AllocateWithSeed,{base:xr(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:xr(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]):(e=In(Ln.Allocate,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]),new cn({keys:r,programId:this.programId,data:e})}}Cn.programId=new Cr("11111111111111111111111111111111");const Un=Nr-300;class zn{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/zn.chunkSize)+1+1)}static async load(t,e,r,i,s){{const n=await t.getMinimumBalanceForRentExemption(s.length),o=await t.getAccountInfo(r.publicKey,"confirmed");let a=null;if(null!==o){if(o.executable)return console.error("Program load failed, account is already executable"),!1;o.data.length!==s.length&&(a=a||new un,a.add(Cn.allocate({accountPubkey:r.publicKey,space:s.length}))),o.owner.equals(i)||(a=a||new un,a.add(Cn.assign({accountPubkey:r.publicKey,programId:i}))),o.lamports<n&&(a=a||new un,a.add(Cn.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:n-o.lamports})))}else a=(new un).add(Cn.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:n>0?n:1,space:s.length,programId:i}));null!==a&&await En(t,a,[e,r],{commitment:"confirmed"})}const o=$t.w3([$t.DH("instruction"),$t.DH("offset"),$t.DH("bytesLength"),$t.DH("bytesLengthPadding"),$t.O6($t.u8("byte"),$t.cY($t.DH(),-8),"bytes")]),a=zn.chunkSize;let c=0,u=s,h=[];for(;u.length>0;){const s=u.slice(0,a),l=n.Buffer.alloc(a+16);o.encode({instruction:0,offset:c,bytes:s,bytesLength:0,bytesLengthPadding:0},l);const d=(new un).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:l});if(h.push(En(t,d,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")){const t=4;await An(1e3/t)}c+=a,u=u.slice(a)}await Promise.all(h);{const s=$t.w3([$t.DH("instruction")]),o=n.Buffer.alloc(s.span);s.encode({instruction:1},o);const a=(new un).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:yn,isSigner:!1,isWritable:!1}],programId:i,data:o}),c="processed",u=await t.sendTransaction(a,[e,r],{preflightCommitment:c}),{context:h,value:l}=await t.confirmTransaction({signature:u,lastValidBlockHeight:a.lastValidBlockHeight,blockhash:a.recentBlockhash},c);if(l.err)throw new Error(`Transaction ${u} failed (${JSON.stringify(l)})`);for(;;){try{if(await t.getSlot({commitment:c})>h.slot)break}catch{}await new Promise(t=>setTimeout(t,Math.round(200)))}}return!0}}zn.chunkSize=Un;const Nn=new Cr("BPFLoader2111111111111111111111111111111111");class Kn{static getMinNumSignatures(t){return zn.getMinNumSignatures(t)}static load(t,e,r,n,i){return zn.load(t,e,r,i,n)}}function Dn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wn,Fn;function Hn(){if(Fn)return Wn;Fn=1;var t=Object.prototype.toString,e=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};function r(n,i){var s,o,a,c,u,h,l;if(!0===n)return"true";if(!1===n)return"false";switch(typeof n){case"object":if(null===n)return null;if(n.toJSON&&"function"==typeof n.toJSON)return r(n.toJSON(),i);if("[object Array]"===(l=t.call(n))){for(a="[",o=n.length-1,s=0;s<o;s++)a+=r(n[s],!0)+",";return o>-1&&(a+=r(n[s],!0)),a+"]"}if("[object Object]"===l){for(o=(c=e(n).sort()).length,a="",s=0;s<o;)void 0!==(h=r(n[u=c[s]],!1))&&(a&&(a+=","),a+=JSON.stringify(u)+":"+h),s++;return"{"+a+"}"}return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return Wn=function(t){var e=r(t,!1);if(void 0!==e)return""+e}}var qn=Dn(Hn());function jn(t){let e=0;for(;t>1;)t/=2,e++;return e}class Vn{constructor(t,e,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const r=jn(0===(e=t+32+1)?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,1+(e|=e>>32)))-jn(32)-1;return[r,t-(this.getSlotsInEpoch(r)-32)]}{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch);return[this.firstNormalEpoch+r,e%this.slotsPerEpoch]}var e}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?32*(Math.pow(2,t)-1):(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+jn(32)):this.slotsPerEpoch}}var $n=globalThis.fetch;class Zn extends Ce{constructor(t,e,r){super(t=>{const r=function(t,e){return new Re(t,e)}(t,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return this.underlyingSocket="socket"in r?r.socket:r,r},t,e,r),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return 1===e?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return 1===e?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}class Gn{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=function(t,e){let r;try{r=t.layout.decode(e)}catch(t){throw new Error("invalid instruction; "+t)}if(r.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${t.index}`);return r}(Yn,t),r=t.length-56;Jr(r>=0,"lookup table is invalid"),Jr(r%32==0,"lookup table is invalid");const n=r/32,{addresses:i}=$t.w3([$t.O6(jr(),n,"addresses")]).decode(t.slice(56));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:0!==e.authority.length?new Cr(e.authority[0]):void 0,addresses:i.map(t=>new Cr(t))}}}const Yn={index:1,layout:$t.w3([$t.DH("typeIndex"),Mn("deactivationSlot"),$t.I0("lastExtendedSlot"),$t.u8("lastExtendedStartIndex"),$t.u8(),$t.O6(jr(),$t.cY($t.u8(),-1),"authority")])},Jn=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i,Xn=Pe(we(Cr),Ee(),t=>new Cr(t)),Qn=Ae([Ee(),be("base64")]),ti=Pe(we(n.Buffer),Qn,t=>n.Buffer.from(t[0],"base64")),ei=3e4;function ri(t){let e,r;if("string"==typeof t)e=t;else if(t){const{commitment:n,...i}=t;e=n,r=i}return{commitment:e,config:r}}function ni(t){return t.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function ii(t){return xe([Ie({jsonrpc:be("2.0"),id:Ee(),result:t}),Ie({jsonrpc:be("2.0"),id:Ee(),error:Ie({code:Be(),message:Ee(),data:ke(ge("any",()=>!0))})})])}const si=ii(Be());function oi(t){return Pe(ii(t),si,e=>"error"in e?e:{...e,result:de(e.result,t)})}function ai(t){return oi(Ie({context:Ie({slot:_e()}),value:t}))}function ci(t){return Ie({context:Ie({slot:_e()}),value:t})}function ui(t,e){return 0===t?new nn({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new Cr(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:qt().decode(t.data)})),addressTableLookups:e.addressTableLookups}):new rn(e)}const hi=Ie({foundation:_e(),foundationTerm:_e(),initial:_e(),taper:_e(),terminal:_e()}),li=oi(ye(ve(Ie({epoch:_e(),effectiveSlot:_e(),amount:_e(),postBalance:_e(),commission:ke(ve(_e()))})))),di=ye(Ie({slot:_e(),prioritizationFee:_e()})),fi=Ie({total:_e(),validator:_e(),foundation:_e(),epoch:_e()}),pi=Ie({epoch:_e(),slotIndex:_e(),slotsInEpoch:_e(),absoluteSlot:_e(),blockHeight:ke(_e()),transactionCount:ke(_e())}),gi=Ie({slotsPerEpoch:_e(),leaderScheduleSlotOffset:_e(),warmup:me(),firstNormalEpoch:_e(),firstNormalSlot:_e()}),yi=Se(Ee(),ye(_e())),mi=ve(xe([Ie({}),Ee()])),wi=Ie({err:mi}),bi=be("receivedSignature"),vi=Ie({"solana-core":Ee(),"feature-set":ke(_e())}),_i=Ie({program:Ee(),programId:Xn,parsed:Be()}),ki=Ie({programId:Xn,accounts:ye(Xn),data:Ee()}),Si=ai(Ie({err:ve(xe([Ie({}),Ee()])),logs:ve(ye(Ee())),accounts:ke(ve(ye(ve(Ie({executable:me(),owner:Ee(),lamports:_e(),data:ye(Ee()),rentEpoch:ke(_e())}))))),unitsConsumed:ke(_e()),returnData:ke(ve(Ie({programId:Ee(),data:Ae([Ee(),be("base64")])}))),innerInstructions:ke(ve(ye(Ie({index:_e(),instructions:ye(xe([_i,ki]))}))))})),Ei=ai(Ie({byIdentity:Se(Ee(),ye(_e())),range:Ie({firstSlot:_e(),lastSlot:_e()})})),Ai=oi(hi),Ii=oi(fi),xi=oi(di),Bi=oi(pi),Pi=oi(gi),Ti=oi(yi),Oi=oi(_e()),Mi=ai(Ie({total:_e(),circulating:_e(),nonCirculating:_e(),nonCirculatingAccounts:ye(Xn)})),Ri=Ie({amount:Ee(),uiAmount:ve(_e()),decimals:_e(),uiAmountString:ke(Ee())}),Li=ai(ye(Ie({address:Xn,amount:Ee(),uiAmount:ve(_e()),decimals:_e(),uiAmountString:ke(Ee())}))),Ci=ai(ye(Ie({pubkey:Xn,account:Ie({executable:me(),owner:Xn,lamports:_e(),data:ti,rentEpoch:_e()})}))),Ui=Ie({program:Ee(),parsed:Be(),space:_e()}),zi=ai(ye(Ie({pubkey:Xn,account:Ie({executable:me(),owner:Xn,lamports:_e(),data:Ui,rentEpoch:_e()})}))),Ni=ai(ye(Ie({lamports:_e(),address:Xn}))),Ki=Ie({executable:me(),owner:Xn,lamports:_e(),data:ti,rentEpoch:_e()}),Di=Ie({pubkey:Xn,account:Ki}),Wi=Pe(xe([we(n.Buffer),Ui]),xe([Qn,Ui]),t=>Array.isArray(t)?de(t,ti):t),Fi=Ie({executable:me(),owner:Xn,lamports:_e(),data:Wi,rentEpoch:_e()}),Hi=Ie({pubkey:Xn,account:Fi}),qi=Ie({state:xe([be("active"),be("inactive"),be("activating"),be("deactivating")]),active:_e(),inactive:_e()}),ji=oi(ye(Ie({signature:Ee(),slot:_e(),err:mi,memo:ve(Ee()),blockTime:ke(ve(_e()))}))),Vi=oi(ye(Ie({signature:Ee(),slot:_e(),err:mi,memo:ve(Ee()),blockTime:ke(ve(_e()))}))),$i=Ie({subscription:_e(),result:ci(Ki)}),Zi=Ie({pubkey:Xn,account:Ki}),Gi=Ie({subscription:_e(),result:ci(Zi)}),Yi=Ie({parent:_e(),slot:_e(),root:_e()}),Ji=Ie({subscription:_e(),result:Yi}),Xi=xe([Ie({type:xe([be("firstShredReceived"),be("completed"),be("optimisticConfirmation"),be("root")]),slot:_e(),timestamp:_e()}),Ie({type:be("createdBank"),parent:_e(),slot:_e(),timestamp:_e()}),Ie({type:be("frozen"),slot:_e(),timestamp:_e(),stats:Ie({numTransactionEntries:_e(),numSuccessfulTransactions:_e(),numFailedTransactions:_e(),maxTransactionsPerEntry:_e()})}),Ie({type:be("dead"),slot:_e(),timestamp:_e(),err:Ee()})]),Qi=Ie({subscription:_e(),result:Xi}),ts=Ie({subscription:_e(),result:ci(xe([wi,bi]))}),es=Ie({subscription:_e(),result:_e()}),rs=Ie({pubkey:Ee(),gossip:ve(Ee()),tpu:ve(Ee()),rpc:ve(Ee()),version:ve(Ee())}),ns=Ie({votePubkey:Ee(),nodePubkey:Ee(),activatedStake:_e(),epochVoteAccount:me(),epochCredits:ye(Ae([_e(),_e(),_e()])),commission:_e(),lastVote:_e(),rootSlot:ve(_e())}),is=oi(Ie({current:ye(ns),delinquent:ye(ns)})),ss=xe([be("processed"),be("confirmed"),be("finalized")]),os=Ie({slot:_e(),confirmations:ve(_e()),err:mi,confirmationStatus:ke(ss)}),as=ai(ye(ve(os))),cs=oi(_e()),us=Ie({accountKey:Xn,writableIndexes:ye(_e()),readonlyIndexes:ye(_e())}),hs=Ie({signatures:ye(Ee()),message:Ie({accountKeys:ye(Ee()),header:Ie({numRequiredSignatures:_e(),numReadonlySignedAccounts:_e(),numReadonlyUnsignedAccounts:_e()}),instructions:ye(Ie({accounts:ye(_e()),data:Ee(),programIdIndex:_e()})),recentBlockhash:Ee(),addressTableLookups:ke(ye(us))})}),ls=Ie({pubkey:Xn,signer:me(),writable:me(),source:ke(xe([be("transaction"),be("lookupTable")]))}),ds=Ie({accountKeys:ye(ls),signatures:ye(Ee())}),fs=Ie({parsed:Be(),program:Ee(),programId:Xn}),ps=Ie({accounts:ye(Xn),data:Ee(),programId:Xn}),gs=Pe(xe([ps,fs]),xe([Ie({parsed:Be(),program:Ee(),programId:Ee()}),Ie({accounts:ye(Ee()),data:Ee(),programId:Ee()})]),t=>de(t,"accounts"in t?ps:fs)),ys=Ie({signatures:ye(Ee()),message:Ie({accountKeys:ye(ls),instructions:ye(gs),recentBlockhash:Ee(),addressTableLookups:ke(ve(ye(us)))})}),ms=Ie({accountIndex:_e(),mint:Ee(),owner:ke(Ee()),programId:ke(Ee()),uiTokenAmount:Ri}),ws=Ie({writable:ye(Xn),readonly:ye(Xn)}),bs=Ie({err:mi,fee:_e(),innerInstructions:ke(ve(ye(Ie({index:_e(),instructions:ye(Ie({accounts:ye(_e()),data:Ee(),programIdIndex:_e()}))})))),preBalances:ye(_e()),postBalances:ye(_e()),logMessages:ke(ve(ye(Ee()))),preTokenBalances:ke(ve(ye(ms))),postTokenBalances:ke(ve(ye(ms))),loadedAddresses:ke(ws),computeUnitsConsumed:ke(_e()),costUnits:ke(_e())}),vs=Ie({err:mi,fee:_e(),innerInstructions:ke(ve(ye(Ie({index:_e(),instructions:ye(gs)})))),preBalances:ye(_e()),postBalances:ye(_e()),logMessages:ke(ve(ye(Ee()))),preTokenBalances:ke(ve(ye(ms))),postTokenBalances:ke(ve(ye(ms))),loadedAddresses:ke(ws),computeUnitsConsumed:ke(_e()),costUnits:ke(_e())}),_s=xe([be(0),be("legacy")]),ks=Ie({pubkey:Ee(),lamports:_e(),postBalance:ve(_e()),rewardType:ve(Ee()),commission:ke(ve(_e()))}),Ss=oi(ve(Ie({blockhash:Ee(),previousBlockhash:Ee(),parentSlot:_e(),transactions:ye(Ie({transaction:hs,meta:ve(bs),version:ke(_s)})),rewards:ke(ye(ks)),blockTime:ve(_e()),blockHeight:ve(_e())}))),Es=oi(ve(Ie({blockhash:Ee(),previousBlockhash:Ee(),parentSlot:_e(),rewards:ke(ye(ks)),blockTime:ve(_e()),blockHeight:ve(_e())}))),As=oi(ve(Ie({blockhash:Ee(),previousBlockhash:Ee(),parentSlot:_e(),transactions:ye(Ie({transaction:ds,meta:ve(bs),version:ke(_s)})),rewards:ke(ye(ks)),blockTime:ve(_e()),blockHeight:ve(_e())}))),Is=oi(ve(Ie({blockhash:Ee(),previousBlockhash:Ee(),parentSlot:_e(),transactions:ye(Ie({transaction:ys,meta:ve(vs),version:ke(_s)})),rewards:ke(ye(ks)),blockTime:ve(_e()),blockHeight:ve(_e())}))),xs=oi(ve(Ie({blockhash:Ee(),previousBlockhash:Ee(),parentSlot:_e(),transactions:ye(Ie({transaction:ds,meta:ve(vs),version:ke(_s)})),rewards:ke(ye(ks)),blockTime:ve(_e()),blockHeight:ve(_e())}))),Bs=oi(ve(Ie({blockhash:Ee(),previousBlockhash:Ee(),parentSlot:_e(),rewards:ke(ye(ks)),blockTime:ve(_e()),blockHeight:ve(_e())}))),Ps=oi(ve(Ie({blockhash:Ee(),previousBlockhash:Ee(),parentSlot:_e(),transactions:ye(Ie({transaction:hs,meta:ve(bs)})),rewards:ke(ye(ks)),blockTime:ve(_e())}))),Ts=oi(ve(Ie({blockhash:Ee(),previousBlockhash:Ee(),parentSlot:_e(),signatures:ye(Ee()),blockTime:ve(_e())}))),Os=oi(ve(Ie({slot:_e(),meta:ve(bs),blockTime:ke(ve(_e())),transaction:hs,version:ke(_s)}))),Ms=oi(ve(Ie({slot:_e(),transaction:ys,meta:ve(vs),blockTime:ke(ve(_e())),version:ke(_s)}))),Rs=ai(Ie({blockhash:Ee(),lastValidBlockHeight:_e()})),Ls=ai(me()),Cs=oi(ye(Ie({slot:_e(),numTransactions:_e(),numSlots:_e(),samplePeriodSecs:_e()}))),Us=ai(ve(Ie({feeCalculator:Ie({lamportsPerSignature:_e()})}))),zs=oi(Ee()),Ns=oi(Ee()),Ks=Ie({err:mi,logs:ye(Ee()),signature:Ee()}),Ds=Ie({result:ci(Ks),subscription:_e()}),Ws={"solana-client":"js/1.0.0-maintenance"};class Fs{constructor(t,e){let r,n,i,s,o,a;var c;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const t={};return async e=>{const{commitment:r,config:n}=ri(e),i=this._buildArgs([],r,void 0,n),s=qn(i);return t[s]=t[s]??(async()=>{try{const t=de(await this._rpcRequest("getBlockHeight",i),oi(_e()));if("error"in t)throw new Sn(t.error,"failed to get block height information");return t.result}finally{delete t[s]}})(),await t[s]}})(),e&&"string"==typeof e?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,n=e.httpHeaders,i=e.fetch,s=e.fetchMiddleware,o=e.disableRetryOnRateLimit,a=e.httpAgent),this._rpcEndpoint=function(t){if(!1===/^https?:/.test(t))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}(t),this._rpcWsEndpoint=r||function(t){const e=t.match(Jn);if(null==e)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[r,n,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10);return`${o}//${n}${null==a?"":`:${a+1}`}${s}`}(t),this._rpcClient=function(t,e,r,n,i,s){const o=r||$n;let a;return null!=s&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),n&&(a=async(t,e)=>{const r=await new Promise((r,i)=>{try{n(t,e,(t,e)=>r([t,e]))}catch(t){i(t)}});return await o(...r)}),new(Oe())(async(r,n)=>{const s={method:"POST",body:r,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},e||{},Ws)};try{let e,r=5,c=500;for(;e=a?await a(t,s):await o(t,s),429===e.status&&!0!==i&&(r-=1,0!==r);)console.error(`Server responded with ${e.status} ${e.statusText}.  Retrying after ${c}ms delay...`),await An(c),c*=2;const u=await e.text();e.ok?n(null,u):n(new Error(`${e.status} ${e.statusText}: ${u}`))}catch(t){t instanceof Error&&n(t)}},{})}(t,n,i,s,o,a),this._rpcRequest=(c=this._rpcClient,(t,e)=>new Promise((r,n)=>{c.request(t,e,(t,e)=>{t?n(t):r(e)})})),this._rpcBatchRequest=function(t){return e=>new Promise((r,n)=>{0===e.length&&r([]);const i=e.map(e=>t.request(e.methodName,e.args));t.request(i,(t,e)=>{t?n(t):r(e)})})}(this._rpcClient),this._rpcWebSocket=new Zn(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:n}=ri(e),i=this._buildArgs([t.toBase58()],r,void 0,n),s=de(await this._rpcRequest("getBalance",i),ai(_e()));if("error"in s)throw new Sn(s.error,`failed to get balance for ${t.toBase58()}`);return s.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+e)})}async getBlockTime(t){const e=de(await this._rpcRequest("getBlockTime",[t]),oi(ve(_e())));if("error"in e)throw new Sn(e.error,`failed to get block time for slot ${t}`);return e.result}async getMinimumLedgerSlot(){const t=de(await this._rpcRequest("minimumLedgerSlot",[]),oi(_e()));if("error"in t)throw new Sn(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const t=de(await this._rpcRequest("getFirstAvailableBlock",[]),Oi);if("error"in t)throw new Sn(t.error,"failed to get first available block");return t.result}async getSupply(t){let e={};e="string"==typeof t?{commitment:t}:t?{...t,commitment:t&&t.commitment||this.commitment}:{commitment:this.commitment};const r=de(await this._rpcRequest("getSupply",[e]),Mi);if("error"in r)throw new Sn(r.error,"failed to get supply");return r.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),n=de(await this._rpcRequest("getTokenSupply",r),ai(Ri));if("error"in n)throw new Sn(n.error,"failed to get token supply");return n.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),n=de(await this._rpcRequest("getTokenAccountBalance",r),ai(Ri));if("error"in n)throw new Sn(n.error,"failed to get token account balance");return n.result}async getTokenAccountsByOwner(t,e,r){const{commitment:n,config:i}=ri(r);let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const o=this._buildArgs(s,n,"base64",i),a=de(await this._rpcRequest("getTokenAccountsByOwner",o),Ci);if("error"in a)throw new Sn(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getParsedTokenAccountsByOwner(t,e,r){let n=[t.toBase58()];"mint"in e?n.push({mint:e.mint.toBase58()}):n.push({programId:e.programId.toBase58()});const i=this._buildArgs(n,r,"jsonParsed"),s=de(await this._rpcRequest("getTokenAccountsByOwner",i),zi);if("error"in s)throw new Sn(s.error,`failed to get token accounts owned by account ${t.toBase58()}`);return s.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],n=de(await this._rpcRequest("getLargestAccounts",r),Ni);if("error"in n)throw new Sn(n.error,"failed to get largest accounts");return n.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),n=de(await this._rpcRequest("getTokenLargestAccounts",r),Li);if("error"in n)throw new Sn(n.error,"failed to get token largest accounts");return n.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:n}=ri(e),i=this._buildArgs([t.toBase58()],r,"base64",n),s=de(await this._rpcRequest("getAccountInfo",i),ai(ve(Ki)));if("error"in s)throw new Sn(s.error,`failed to get info about account ${t.toBase58()}`);return s.result}async getParsedAccountInfo(t,e){const{commitment:r,config:n}=ri(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),s=de(await this._rpcRequest("getAccountInfo",i),ai(ve(Fi)));if("error"in s)throw new Sn(s.error,`failed to get info about account ${t.toBase58()}`);return s.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(e){throw new Error("failed to get info about account "+t.toBase58()+": "+e)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:n}=ri(e),i=t.map(t=>t.toBase58()),s=this._buildArgs([i],r,"jsonParsed",n),o=de(await this._rpcRequest("getMultipleAccounts",s),ai(ye(ve(Fi))));if("error"in o)throw new Sn(o.error,`failed to get info for accounts ${i}`);return o.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:n}=ri(e),i=t.map(t=>t.toBase58()),s=this._buildArgs([i],r,"base64",n),o=de(await this._rpcRequest("getMultipleAccounts",s),ai(ye(ve(Ki))));if("error"in o)throw new Sn(o.error,`failed to get info for accounts ${i}`);return o.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:n,config:i}=ri(e),s=this._buildArgs([t.toBase58()],n,void 0,{...i,epoch:null!=r?r:i?.epoch}),o=de(await this._rpcRequest("getStakeActivation",s),oi(qi));if("error"in o)throw new Sn(o.error,`failed to get Stake Activation ${t.toBase58()}`);return o.result}async getProgramAccounts(t,e){const{commitment:r,config:n}=ri(e),{encoding:i,...s}=n||{},o=this._buildArgs([t.toBase58()],r,i||"base64",{...s,...s.filters?{filters:ni(s.filters)}:null}),a=await this._rpcRequest("getProgramAccounts",o),c=ye(Di),u=!0===s.withContext?de(a,ai(c)):de(a,oi(c));if("error"in u)throw new Sn(u.error,`failed to get accounts owned by program ${t.toBase58()}`);return u.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:n}=ri(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),s=de(await this._rpcRequest("getProgramAccounts",i),oi(ye(Hi)));if("error"in s)throw new Sn(s.error,`failed to get accounts owned by program ${t.toBase58()}`);return s.result}async confirmTransaction(t,e){let r,n;if("string"==typeof t)r=t;else{const e=t;if(e.abortSignal?.aborted)return Promise.reject(e.abortSignal.reason);r=e.signature}try{n=qt().decode(r)}catch(t){throw new Error("signature must be base58 encoded: "+r)}return Jr(64===n.length,"signature has invalid length"),"string"==typeof t?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{null!=t&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,n,i=!1;return{abortConfirmation:()=>{n&&(n(),n=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:new Promise((s,o)=>{try{r=this.onSignature(e,(t,e)=>{r=void 0;const n={context:e,value:t};s({__type:on.PROCESSED,response:n})},t);const a=new Promise(t=>{null==r?t():n=this._onSubscriptionStateChange(r,e=>{"subscribed"===e&&t()})});(async()=>{if(await a,i)return;const r=await this.getSignatureStatus(e);if(i)return;if(null==r)return;const{context:n,value:c}=r;if(null!=c)if(c?.err)o(c.err);else{switch(t){case"confirmed":case"single":case"singleGossip":if("processed"===c.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===c.confirmationStatus||"confirmed"===c.confirmationStatus)return}i=!0,s({__type:on.PROCESSED,response:{context:n,value:c}})}})()}catch(t){o(t)}})}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:n}}){let i=!1;const s=new Promise(e=>{const n=async()=>{try{return await this.getBlockHeight(t)}catch(t){return-1}};(async()=>{let t=await n();if(!i){for(;t<=r;){if(await An(1e3),i)return;if(t=await n(),i)return}e({__type:on.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:o,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:n}),c=this.getCancellationPromise(e);let u;try{const t=await Promise.race([c,a,s]);if(t.__type!==on.PROCESSED)throw new Wr(n);u=t.response}finally{i=!0,o()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:s}}){let o=!1;const a=new Promise(e=>{let s=i,a=null;const c=async()=>{try{const{context:e,value:i}=await this.getNonceAndContext(n,{commitment:t,minContextSlot:r});return a=e.slot,i?.nonce}catch(t){return s}};(async()=>{if(s=await c(),!o)for(;;){if(i!==s)return void e({__type:on.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await An(2e3),o)return;if(s=await c(),o)return}})()}),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),h=this.getCancellationPromise(e);let l;try{const e=await Promise.race([h,u,a]);if(e.__type===on.PROCESSED)l=e.response;else{let n;for(;;){const t=await this.getSignatureStatus(s);if(null==t)break;if(!(t.context.slot<(e.slotInWhichNonceDidAdvance??r))){n=t;break}await An(400)}if(!n?.value)throw new Hr(s);{const e=t||"finalized",{confirmationStatus:r}=n.value;switch(e){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new Hr(s);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new Hr(s);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new Hr(s)}l={context:n.context,value:{err:n.value.err}}}}}finally{o=!0,c()}return l}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const n=new Promise(e=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4}r=setTimeout(()=>e({__type:on.TIMED_OUT,timeoutMs:n}),n)}),{abortConfirmation:i,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let o;try{const t=await Promise.race([s,n]);if(t.__type!==on.PROCESSED)throw new Fr(e,t.timeoutMs/1e3);o=t.response}finally{clearTimeout(r),i()}return o}async getClusterNodes(){const t=de(await this._rpcRequest("getClusterNodes",[]),oi(ye(rs)));if("error"in t)throw new Sn(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=de(await this._rpcRequest("getVoteAccounts",e),is);if("error"in r)throw new Sn(r.error,"failed to get vote accounts");return r.result}async getSlot(t){const{commitment:e,config:r}=ri(t),n=this._buildArgs([],e,void 0,r),i=de(await this._rpcRequest("getSlot",n),oi(_e()));if("error"in i)throw new Sn(i.error,"failed to get slot");return i.result}async getSlotLeader(t){const{commitment:e,config:r}=ri(t),n=this._buildArgs([],e,void 0,r),i=de(await this._rpcRequest("getSlotLeader",n),oi(Ee()));if("error"in i)throw new Sn(i.error,"failed to get slot leader");return i.result}async getSlotLeaders(t,e){const r=[t,e],n=de(await this._rpcRequest("getSlotLeaders",r),oi(ye(Xn)));if("error"in n)throw new Sn(n.error,"failed to get slot leaders");return n.result}async getSignatureStatus(t,e){const{context:r,value:n}=await this.getSignatureStatuses([t],e);return Jr(1===n.length),{context:r,value:n[0]}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const n=de(await this._rpcRequest("getSignatureStatuses",r),as);if("error"in n)throw new Sn(n.error,"failed to get signature status");return n.result}async getTransactionCount(t){const{commitment:e,config:r}=ri(t),n=this._buildArgs([],e,void 0,r),i=de(await this._rpcRequest("getTransactionCount",n),oi(_e()));if("error"in i)throw new Sn(i.error,"failed to get transaction count");return i.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=de(await this._rpcRequest("getInflationGovernor",e),Ai);if("error"in r)throw new Sn(r.error,"failed to get inflation");return r.result}async getInflationReward(t,e,r){const{commitment:n,config:i}=ri(r),s=this._buildArgs([t.map(t=>t.toBase58())],n,void 0,{...i,epoch:null!=e?e:i?.epoch}),o=de(await this._rpcRequest("getInflationReward",s),li);if("error"in o)throw new Sn(o.error,"failed to get inflation reward");return o.result}async getInflationRate(){const t=de(await this._rpcRequest("getInflationRate",[]),Ii);if("error"in t)throw new Sn(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(t){const{commitment:e,config:r}=ri(t),n=this._buildArgs([],e,void 0,r),i=de(await this._rpcRequest("getEpochInfo",n),Bi);if("error"in i)throw new Sn(i.error,"failed to get epoch info");return i.result}async getEpochSchedule(){const t=de(await this._rpcRequest("getEpochSchedule",[]),Pi);if("error"in t)throw new Sn(t.error,"failed to get epoch schedule");const e=t.result;return new Vn(e.slotsPerEpoch,e.leaderScheduleSlotOffset,e.warmup,e.firstNormalEpoch,e.firstNormalSlot)}async getLeaderSchedule(){const t=de(await this._rpcRequest("getLeaderSchedule",[]),Ti);if("error"in t)throw new Sn(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),n=de(await this._rpcRequest("getMinimumBalanceForRentExemption",r),cs);return"error"in n?(console.warn("Unable to fetch minimum balance for rent exemption"),0):n.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON:()=>({})}}}}async getRecentPerformanceSamples(t){const e=de(await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),Cs);if("error"in e)throw new Sn(e.error,"failed to get recent performance samples");return e.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),n=de(await this._rpcRequest("getFeeCalculatorForBlockhash",r),Us);if("error"in n)throw new Sn(n.error,"failed to get fee calculator");const{context:i,value:s}=n.result;return{context:i,value:null!==s?s.feeCalculator:null}}async getFeeForMessage(t,e){const r=xr(t.serialize()).toString("base64"),n=this._buildArgs([r],e),i=de(await this._rpcRequest("getFeeForMessage",n),ai(ve(_e())));if("error"in i)throw new Sn(i.error,"failed to get fee for message");if(null===i.result)throw new Error("invalid blockhash");return i.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map(t=>t.toBase58()),r=e?.length?[e]:[],n=de(await this._rpcRequest("getRecentPrioritizationFees",r),xi);if("error"in n)throw new Sn(n.error,"failed to get recent prioritization fees");return n.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=ri(t),n=this._buildArgs([],e,void 0,r),i=de(await this._rpcRequest("getLatestBlockhash",n),Rs);if("error"in i)throw new Sn(i.error,"failed to get latest blockhash");return i.result}async isBlockhashValid(t,e){const{commitment:r,config:n}=ri(e),i=this._buildArgs([t],r,void 0,n),s=de(await this._rpcRequest("isBlockhashValid",i),Ls);if("error"in s)throw new Sn(s.error,"failed to determine if the blockhash `"+t+"`is valid");return s.result}async getVersion(){const t=de(await this._rpcRequest("getVersion",[]),oi(vi));if("error"in t)throw new Sn(t.error,"failed to get version");return t.result}async getGenesisHash(){const t=de(await this._rpcRequest("getGenesisHash",[]),oi(Ee()));if("error"in t)throw new Sn(t.error,"failed to get genesis hash");return t.result}async getBlock(t,e){const{commitment:r,config:n}=ri(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),s=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{const t=de(s,As);if("error"in t)throw t.error;return t.result}case"none":{const t=de(s,Es);if("error"in t)throw t.error;return t.result}default:{const t=de(s,Ss);if("error"in t)throw t.error;const{result:e}=t;return e?{...e,transactions:e.transactions.map(({transaction:t,meta:e,version:r})=>({meta:e,transaction:{...t,message:ui(r,t.message)},version:r}))}:null}}}catch(t){throw new Sn(t,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:n}=ri(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),s=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{const t=de(s,xs);if("error"in t)throw t.error;return t.result}case"none":{const t=de(s,Bs);if("error"in t)throw t.error;return t.result}default:{const t=de(s,Is);if("error"in t)throw t.error;return t.result}}}catch(t){throw new Sn(t,"failed to get block")}}async getBlockProduction(t){let e,r;if("string"==typeof t)r=t;else if(t){const{commitment:n,...i}=t;r=n,e=i}const n=this._buildArgs([],r,"base64",e),i=de(await this._rpcRequest("getBlockProduction",n),Ei);if("error"in i)throw new Sn(i.error,"failed to get block production information");return i.result}async getTransaction(t,e){const{commitment:r,config:n}=ri(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),s=de(await this._rpcRequest("getTransaction",i),Os);if("error"in s)throw new Sn(s.error,"failed to get transaction");const o=s.result;return o?{...o,transaction:{...o.transaction,message:ui(o.version,o.transaction.message)}}:o}async getParsedTransaction(t,e){const{commitment:r,config:n}=ri(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),s=de(await this._rpcRequest("getTransaction",i),Ms);if("error"in s)throw new Sn(s.error,"failed to get transaction");return s.result}async getParsedTransactions(t,e){const{commitment:r,config:n}=ri(e),i=t.map(t=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n)}));return(await this._rpcBatchRequest(i)).map(t=>{const e=de(t,Ms);if("error"in e)throw new Sn(e.error,"failed to get transactions");return e.result})}async getTransactions(t,e){const{commitment:r,config:n}=ri(e),i=t.map(t=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([t],r,void 0,n)}));return(await this._rpcBatchRequest(i)).map(t=>{const e=de(t,Os);if("error"in e)throw new Sn(e.error,"failed to get transactions");const r=e.result;return r?{...r,transaction:{...r.transaction,message:ui(r.version,r.transaction.message)}}:r})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),n=de(await this._rpcRequest("getBlock",r),Ps);if("error"in n)throw new Sn(n.error,"failed to get confirmed block");const i=n.result;if(!i)throw new Error("Confirmed block "+t+" not found");const s={...i,transactions:i.transactions.map(({transaction:t,meta:e})=>{const r=new rn(t.message);return{meta:e,transaction:{...t,message:r}}})};return{...s,transactions:s.transactions.map(({transaction:t,meta:e})=>({meta:e,transaction:un.populate(t.message,t.signatures)}))}}async getBlocks(t,e,r){const n=this._buildArgsAtLeastConfirmed(void 0!==e?[t,e]:[t],r),i=de(await this._rpcRequest("getBlocks",n),oi(ye(_e())));if("error"in i)throw new Sn(i.error,"failed to get blocks");return i.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=de(await this._rpcRequest("getBlock",r),Ts);if("error"in n)throw new Sn(n.error,"failed to get block");const i=n.result;if(!i)throw new Error("Block "+t+" not found");return i}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=de(await this._rpcRequest("getBlock",r),Ts);if("error"in n)throw new Sn(n.error,"failed to get confirmed block");const i=n.result;if(!i)throw new Error("Confirmed block "+t+" not found");return i}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),n=de(await this._rpcRequest("getTransaction",r),Os);if("error"in n)throw new Sn(n.error,"failed to get transaction");const i=n.result;if(!i)return i;const s=new rn(i.transaction.message),o=i.transaction.signatures;return{...i,transaction:un.populate(s,o)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),n=de(await this._rpcRequest("getTransaction",r),Ms);if("error"in n)throw new Sn(n.error,"failed to get confirmed transaction");return n.result}async getParsedConfirmedTransactions(t,e){const r=t.map(t=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([t],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(t=>{const e=de(t,Ms);if("error"in e)throw new Sn(e.error,"failed to get confirmed transactions");return e.result})}async getConfirmedSignaturesForAddress(t,e,r){let n={},i=await this.getFirstAvailableBlock();for(;!("until"in n)&&!(--e<=0||e<i);)try{const t=await this.getConfirmedBlockSignatures(e,"finalized");t.signatures.length>0&&(n.until=t.signatures[t.signatures.length-1].toString())}catch(t){if(t instanceof Error&&t.message.includes("skipped"))continue;throw t}let s=await this.getSlot("finalized");for(;!("before"in n||++r>s);)try{const t=await this.getConfirmedBlockSignatures(r);t.signatures.length>0&&(n.before=t.signatures[t.signatures.length-1].toString())}catch(t){if(t instanceof Error&&t.message.includes("skipped"))continue;throw t}return(await this.getConfirmedSignaturesForAddress2(t,n)).map(t=>t.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=de(await this._rpcRequest("getConfirmedSignaturesForAddress2",n),ji);if("error"in i)throw new Sn(i.error,"failed to get confirmed signatures for address");return i.result}async getSignaturesForAddress(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=de(await this._rpcRequest("getSignaturesForAddress",n),Vi);if("error"in i)throw new Sn(i.error,"failed to get signatures for address");return i.result}async getAddressLookupTable(t,e){const{context:r,value:n}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==n&&(i=new Gn({key:t,state:Gn.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:n}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==n&&(i=On.fromAccountData(n.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)})}async requestAirdrop(t,e){const r=de(await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),zs);if("error"in r)throw new Sn(r.error,`airdrop to ${t.toBase58()} failed`);return r.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await An(100);const t=Date.now()-this._blockhashInfo.lastFetch>=ei;if(null!==this._blockhashInfo.latestBlockhash&&!t)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let t=0;t<50;t++){const t=await this.getLatestBlockhash("finalized");if(r!==t.blockhash)return this._blockhashInfo={latestBlockhash:t,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},t;await An(200)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=ri(t),n=this._buildArgs([],e,"base64",r),i=de(await this._rpcRequest("getStakeMinimumDelegation",n),ai(_e()));if("error"in i)throw new Sn(i.error,"failed to get stake minimum delegation");return i.result}async simulateTransaction(t,e,r){if("message"in t){const i=t.serialize(),s=n.Buffer.from(i).toString("base64");if(Array.isArray(e)||void 0!==r)throw new Error("Invalid arguments");const o=e||{};o.encoding="base64","commitment"in o||(o.commitment=this.commitment),e&&"object"==typeof e&&"innerInstructions"in e&&(o.innerInstructions=e.innerInstructions);const a=[s,o],c=de(await this._rpcRequest("simulateTransaction",a),Si);if("error"in c)throw new Error("failed to simulate transaction: "+c.error.message);return c.result}let i;if(t instanceof un){let e=t;i=new un,i.feePayer=e.feePayer,i.instructions=t.instructions,i.nonceInfo=e.nonceInfo,i.signatures=e.signatures}else i=un.populate(t),i._message=i._json=void 0;if(void 0!==e&&!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(i.nonceInfo&&s)i.sign(...s);else{let t=this._disableBlockhashCaching;for(;;){const e=await this._blockhashWithExpiryBlockHeight(t);if(i.lastValidBlockHeight=e.lastValidBlockHeight,i.recentBlockhash=e.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const r=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(r)&&!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.simulatedSignatures.push(r);break}t=!0}}const o=i._compile(),a=o.serialize(),c=i._serialize(a).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(r){const t=(Array.isArray(r)?r:o.nonProgramIds()).map(t=>t.toBase58());u.accounts={encoding:"base64",addresses:t}}s&&(u.sigVerify=!0),e&&"object"==typeof e&&"innerInstructions"in e&&(u.innerInstructions=e.innerInstructions);const h=[c,u],l=de(await this._rpcRequest("simulateTransaction",h),Si);if("error"in l){let t;if("data"in l.error&&(t=l.error.data.logs,t&&Array.isArray(t))){const e="\n    ",r=e+t.join(e);console.error(l.error.message,r)}throw new _n({action:"simulate",signature:"",transactionMessage:l.error.message,logs:t})}return l.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const r=t.serialize();return await this.sendRawTransaction(r,e)}if(void 0===e||!Array.isArray(e))throw new Error("Invalid arguments");const n=e;if(t.nonceInfo)t.sign(...n);else{let e=this._disableBlockhashCaching;for(;;){const r=await this._blockhashWithExpiryBlockHeight(e);if(t.lastValidBlockHeight=r.lastValidBlockHeight,t.recentBlockhash=r.blockhash,t.sign(...n),!t.signature)throw new Error("!signature");const i=t.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}e=!0}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=xr(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},n=e&&e.skipPreflight,i=!0===n?"processed":e&&e.preflightCommitment||this.commitment;e&&null!=e.maxRetries&&(r.maxRetries=e.maxRetries),e&&null!=e.minContextSlot&&(r.minContextSlot=e.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);const s=[t,r],o=de(await this._rpcRequest("sendTransaction",s),Ns);if("error"in o){let t;throw"data"in o.error&&(t=o.error.data.logs),new _n({action:n?"send":"simulate",signature:"",transactionMessage:o.error.message,logs:t})}return o.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==t?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,e])=>{this._setSubscription(t,{...e,state:"pending"})})):this._updateSubscriptions()}_setSubscription(t,e){const r=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const r=this._subscriptionStateChangeCallbacksByHash[t];r&&r.forEach(t=>{try{t(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){const r=this._subscriptionHashByClientSubscriptionId[t];if(null==r)return()=>{};const n=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return n.add(e),()=>{n.delete(e),0===n.size&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(t){t instanceof Error&&console.log(`Error when closing socket connection: ${t.message}`)}},500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async t=>{const r=this._subscriptionsByHash[t];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size)return delete this._subscriptionsByHash[t],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:n,method:i}=r;try{this._setSubscription(t,{...r,state:"subscribing"});const e=await this._rpcWebSocket.call(i,n);this._setSubscription(t,{...r,serverSubscriptionId:e,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[e]=r.callbacks,await this._updateSubscriptions()}catch(s){if(console.error(`Received ${s instanceof Error?"":"JSON-RPC "}error calling \`${i}\``,{args:n,error:s}),!e())return;this._setSubscription(t,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await(async()=>{const{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(t,{...r,state:"unsubscribing"}),this._setSubscription(t,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[n])}catch(n){if(n instanceof Error&&console.error(`${i} error:`,n.message),!e())return;return this._setSubscription(t,{...r,state:"subscribed"}),void await this._updateSubscriptions()}}this._setSubscription(t,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})()}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];void 0!==r&&r.forEach(t=>{try{t(...e)}catch(t){console.error(t)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=de(t,$i);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,n=qn([t.method,e]),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const e=this._subscriptionsByHash[n];Jr(void 0!==e,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),e.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:n,config:i}=ri(r),s=this._buildArgs([t.toBase58()],n||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},s)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=de(t,Gi);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,n){const{commitment:i,config:s}=ri(r),o=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",s||(n?{filters:ni(n)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},o)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const n=this._buildArgs(["object"==typeof t?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=de(t,Ds);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=de(t,Ji);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=de(t,Qi);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,n){const i=e||this._commitment;if(i||r||n){let e={};r&&(e.encoding=r),i&&(e.commitment=i),n&&(e=Object.assign(e,n)),t.push(e)}return t}_buildArgsAtLeastConfirmed(t,e,r,n){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,n)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=de(t,ts);"receivedSignature"!==e.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===e.value?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const n=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(t,r)=>{if("status"===t.type){e(t.result,r);try{this.removeSignatureListener(i)}catch(t){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(t,e,r){const{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},s=this._buildArgs([t],n,void 0,i),o=this._makeSubscription({callback:(t,r)=>{e(t,r);try{this.removeSignatureListener(o)}catch(t){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return o}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=de(t,es);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class Hs{constructor(t){this._keypair=void 0,this._keypair=t??kr()}static generate(){return new Hs(kr())}static fromSecretKey(t,e){if(64!==t.byteLength)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const e=t.slice(0,32),n=Sr(e);for(let t=0;t<32;t++)if(r[t]!==n[t])throw new Error("provided secretKey is invalid")}return new Hs({publicKey:r,secretKey:t})}static fromSeed(t){const e=Sr(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new Hs({publicKey:e,secretKey:r})}get publicKey(){return new Cr(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const qs=Object.freeze({CreateLookupTable:{index:0,layout:$t.w3([$t.DH("instruction"),Mn("recentSlot"),$t.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:$t.w3([$t.DH("instruction")])},ExtendLookupTable:{index:2,layout:$t.w3([$t.DH("instruction"),Mn(),$t.O6(jr(),$t.cY($t.DH(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:$t.w3([$t.DH("instruction")])},CloseLookupTable:{index:4,layout:$t.w3([$t.DH("instruction")])}});class js{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=$t.DH("instruction").decode(t.data);let r;for(const[t,n]of Object.entries(qs))if(n.index==e){r=t;break}if(!r)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return r}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=xn(qs.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=xn(qs.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(t=>new Cr(t))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Vs.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class Vs{constructor(){}static createLookupTable(t){const[e,r]=Cr.findProgramAddressSync([t.authority.toBuffer(),ee().encode(t.recentSlot)],this.programId),n=In(qs.CreateLookupTable,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),i=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Cn.programId,isSigner:!1,isWritable:!1}];return[new cn({programId:this.programId,keys:i,data:n}),e]}static freezeLookupTable(t){const e=In(qs.FreezeLookupTable),r=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new cn({programId:this.programId,keys:r,data:e})}static extendLookupTable(t){const e=In(qs.ExtendLookupTable,{addresses:t.addresses.map(t=>t.toBytes())}),r=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&r.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Cn.programId,isSigner:!1,isWritable:!1}),new cn({programId:this.programId,keys:r,data:e})}static deactivateLookupTable(t){const e=In(qs.DeactivateLookupTable),r=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new cn({programId:this.programId,keys:r,data:e})}static closeLookupTable(t){const e=In(qs.CloseLookupTable),r=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new cn({programId:this.programId,keys:r,data:e})}}Vs.programId=new Cr("AddressLookupTab1e1111111111111111111111111");class $s{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=$t.u8("instruction").decode(t.data);let r;for(const[t,n]of Object.entries(Zs))if(n.index==e){r=t;break}if(!r)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return r}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:r}=xn(Zs.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=xn(Zs.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=xn(Zs.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=xn(Zs.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(Gs.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const Zs=Object.freeze({RequestUnits:{index:0,layout:$t.w3([$t.u8("instruction"),$t.DH("units"),$t.DH("additionalFee")])},RequestHeapFrame:{index:1,layout:$t.w3([$t.u8("instruction"),$t.DH("bytes")])},SetComputeUnitLimit:{index:2,layout:$t.w3([$t.u8("instruction"),$t.DH("units")])},SetComputeUnitPrice:{index:3,layout:$t.w3([$t.u8("instruction"),Mn("microLamports")])}});class Gs{constructor(){}static requestUnits(t){const e=In(Zs.RequestUnits,t);return new cn({keys:[],programId:this.programId,data:e})}static requestHeapFrame(t){const e=In(Zs.RequestHeapFrame,t);return new cn({keys:[],programId:this.programId,data:e})}static setComputeUnitLimit(t){const e=In(Zs.SetComputeUnitLimit,t);return new cn({keys:[],programId:this.programId,data:e})}static setComputeUnitPrice(t){const e=In(Zs.SetComputeUnitPrice,{microLamports:BigInt(t.microLamports)});return new cn({keys:[],programId:this.programId,data:e})}}Gs.programId=new Cr("ComputeBudget111111111111111111111111111111");const Ys=$t.w3([$t.u8("numSignatures"),$t.u8("padding"),$t.NX("signatureOffset"),$t.NX("signatureInstructionIndex"),$t.NX("publicKeyOffset"),$t.NX("publicKeyInstructionIndex"),$t.NX("messageDataOffset"),$t.NX("messageDataSize"),$t.NX("messageInstructionIndex")]);class Js{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:i,instructionIndex:s}=t;Jr(32===e.length,`Public Key must be 32 bytes but received ${e.length} bytes`),Jr(64===i.length,`Signature must be 64 bytes but received ${i.length} bytes`);const o=Ys.span,a=o+e.length,c=a+i.length,u=n.Buffer.alloc(c+r.length),h=null==s?65535:s;return Ys.encode({numSignatures:1,padding:0,signatureOffset:a,signatureInstructionIndex:h,publicKeyOffset:o,publicKeyInstructionIndex:h,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:h},u),u.fill(e,o),u.fill(i,a),u.fill(r,c),new cn({keys:[],programId:Js.programId,data:u})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:n}=t;Jr(64===e.length,`Private key must be 64 bytes but received ${e.length} bytes`);try{const t=Hs.fromSecretKey(e),i=t.publicKey.toBytes(),s=Ar(r,t.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:s,instructionIndex:n})}catch(t){throw new Error(`Error creating instruction; ${t}`)}}}Js.programId=new Cr("Ed25519SigVerify111111111111111111111111111"),vr.utils.isValidPrivateKey;const Xs=vr.getPublicKey,Qs=$t.w3([$t.u8("numSignatures"),$t.NX("signatureOffset"),$t.u8("signatureInstructionIndex"),$t.NX("ethAddressOffset"),$t.u8("ethAddressInstructionIndex"),$t.NX("messageDataOffset"),$t.NX("messageDataSize"),$t.u8("messageInstructionIndex"),$t.av(20,"ethAddress"),$t.av(64,"signature"),$t.u8("recoveryId")]);class to{constructor(){}static publicKeyToEthAddress(t){Jr(64===t.length,`Public key must be 64 bytes but received ${t.length} bytes`);try{return n.Buffer.from(Xe(xr(t))).slice(-20)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:n,recoveryId:i,instructionIndex:s}=t;return to.createInstructionWithEthAddress({ethAddress:to.publicKeyToEthAddress(e),message:r,signature:n,recoveryId:i,instructionIndex:s})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:i,recoveryId:s,instructionIndex:o=0}=t;let a;a="string"==typeof e?e.startsWith("0x")?n.Buffer.from(e.substr(2),"hex"):n.Buffer.from(e,"hex"):e,Jr(20===a.length,`Address must be 20 bytes but received ${a.length} bytes`);const c=12+a.length,u=c+i.length+1,h=n.Buffer.alloc(Qs.span+r.length);return Qs.encode({numSignatures:1,signatureOffset:c,signatureInstructionIndex:o,ethAddressOffset:12,ethAddressInstructionIndex:o,messageDataOffset:u,messageDataSize:r.length,messageInstructionIndex:o,signature:xr(i),ethAddress:xr(a),recoveryId:s},h),h.fill(xr(r),Qs.span),new cn({keys:[],programId:to.programId,data:h})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:i}=t;Jr(32===e.length,`Private key must be 32 bytes but received ${e.length} bytes`);try{const t=xr(e),s=Xs(t,!1).slice(1),o=n.Buffer.from(Xe(xr(r))),[a,c]=((t,e)=>{const r=vr.sign(t,e);return[r.toCompactRawBytes(),r.recovery]})(o,t);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:a,recoveryId:c,instructionIndex:i})}catch(t){throw new Error(`Error creating instruction; ${t}`)}}}var eo;to.programId=new Cr("KeccakSecp256k11111111111111111111111111111");const ro=new Cr("StakeConfig11111111111111111111111111111111");class no{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class io{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}eo=io,io.default=new eo(0,0,Cr.default);class so{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=$t.DH("instruction").decode(t.data);let r;for(const[t,n]of Object.entries(oo))if(n.index==e){r=t;break}if(!r)throw new Error("Instruction type incorrect; not a StakeInstruction");return r}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:r}=xn(oo.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new no(new Cr(e.staker),new Cr(e.withdrawer)),lockup:new io(r.unixTimestamp,r.epoch,new Cr(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),xn(oo.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:r}=xn(oo.Authorize,t.data),n={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new Cr(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(n.custodianPubkey=t.keys[3].pubkey),n}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:n,authorityOwner:i}=xn(oo.AuthorizeWithSeed,t.data),s={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:n,authorityOwner:new Cr(i),newAuthorizedPubkey:new Cr(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(s.custodianPubkey=t.keys[3].pubkey),s}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=xn(oo.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),xn(oo.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=xn(oo.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),xn(oo.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(co.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const oo=Object.freeze({Initialize:{index:0,layout:$t.w3([$t.DH("instruction"),((t="authorized")=>$t.w3([jr("staker"),jr("withdrawer")],t))(),((t="lockup")=>$t.w3([$t.Wg("unixTimestamp"),$t.Wg("epoch"),jr("custodian")],t))()])},Authorize:{index:1,layout:$t.w3([$t.DH("instruction"),jr("newAuthorized"),$t.DH("stakeAuthorizationType")])},Delegate:{index:2,layout:$t.w3([$t.DH("instruction")])},Split:{index:3,layout:$t.w3([$t.DH("instruction"),$t.Wg("lamports")])},Withdraw:{index:4,layout:$t.w3([$t.DH("instruction"),$t.Wg("lamports")])},Deactivate:{index:5,layout:$t.w3([$t.DH("instruction")])},Merge:{index:7,layout:$t.w3([$t.DH("instruction")])},AuthorizeWithSeed:{index:8,layout:$t.w3([$t.DH("instruction"),jr("newAuthorized"),$t.DH("stakeAuthorizationType"),$r("authoritySeed"),jr("authorityOwner")])}}),ao=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class co{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:n}=t,i=n||io.default,s=In(oo.Initialize,{authorized:{staker:xr(r.staker.toBuffer()),withdrawer:xr(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:xr(i.custodian.toBuffer())}}),o={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:yn,isSigner:!1,isWritable:!1}],programId:this.programId,data:s};return new cn(o)}static createAccountWithSeed(t){const e=new un;e.add(Cn.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(t){const e=new un;e.add(Cn.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:n}=t,i=In(oo.Delegate);return(new un).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:dn,isSigner:!1,isWritable:!1},{pubkey:vn,isSigner:!1,isWritable:!1},{pubkey:ro,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:s}=t,o=In(oo.Authorize,{newAuthorized:xr(n.toBuffer()),stakeAuthorizationType:i.index}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:dn,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&a.push({pubkey:s,isSigner:!0,isWritable:!1}),(new un).add({keys:a,programId:this.programId,data:o})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:s,stakeAuthorizationType:o,custodianPubkey:a}=t,c=In(oo.AuthorizeWithSeed,{newAuthorized:xr(s.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:xr(i.toBuffer())}),u=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:dn,isSigner:!1,isWritable:!1}];return a&&u.push({pubkey:a,isSigner:!0,isWritable:!1}),(new un).add({keys:u,programId:this.programId,data:c})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=t,s=In(oo.Split,{lamports:i});return new cn({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static split(t,e){const r=new un;return r.add(Cn.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:o,lamports:a}=t,c=new un;return c.add(Cn.allocate({accountPubkey:i,basePubkey:s,seed:o,space:this.space,programId:this.programId})),e&&e>0&&c.add(Cn.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),c.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:n}=t,i=In(oo.Merge);return(new un).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:dn,isSigner:!1,isWritable:!1},{pubkey:vn,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:s}=t,o=In(oo.Withdraw,{lamports:i}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:dn,isSigner:!1,isWritable:!1},{pubkey:vn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&a.push({pubkey:s,isSigner:!0,isWritable:!1}),(new un).add({keys:a,programId:this.programId,data:o})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,n=In(oo.Deactivate);return(new un).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:dn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}co.programId=new Cr("Stake11111111111111111111111111111111111111"),co.space=200;class uo{constructor(t,e,r,n){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=n}}class ho{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=$t.DH("instruction").decode(t.data);let r;for(const[t,n]of Object.entries(lo))if(n.index==e){r=t;break}if(!r)throw new Error("Instruction type incorrect; not a VoteInstruction");return r}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=xn(lo.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new uo(new Cr(e.nodePubkey),new Cr(e.authorizedVoter),new Cr(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:r}=xn(lo.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new Cr(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:n,voteAuthorizationType:i}}=xn(lo.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new Cr(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new Cr(n),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=xn(lo.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(po.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const lo=Object.freeze({InitializeAccount:{index:0,layout:$t.w3([$t.DH("instruction"),((t="voteInit")=>$t.w3([jr("nodePubkey"),jr("authorizedVoter"),jr("authorizedWithdrawer"),$t.u8("commission")],t))()])},Authorize:{index:1,layout:$t.w3([$t.DH("instruction"),jr("newAuthorized"),$t.DH("voteAuthorizationType")])},Withdraw:{index:3,layout:$t.w3([$t.DH("instruction"),$t.Wg("lamports")])},UpdateValidatorIdentity:{index:4,layout:$t.w3([$t.DH("instruction")])},AuthorizeWithSeed:{index:10,layout:$t.w3([$t.DH("instruction"),((t="voteAuthorizeWithSeedArgs")=>$t.w3([$t.DH("voteAuthorizationType"),jr("currentAuthorityDerivedKeyOwnerPubkey"),$r("currentAuthorityDerivedKeySeed"),jr("newAuthorized")],t))()])}}),fo=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class po{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:n}=t,i=In(lo.InitializeAccount,{voteInit:{nodePubkey:xr(n.nodePubkey.toBuffer()),authorizedVoter:xr(n.authorizedVoter.toBuffer()),authorizedWithdrawer:xr(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),s={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:yn,isSigner:!1,isWritable:!1},{pubkey:dn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new cn(s)}static createAccount(t){const e=new un;return e.add(Cn.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=t,s=In(lo.Authorize,{newAuthorized:xr(n.toBuffer()),voteAuthorizationType:i.index}),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:dn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new un).add({keys:o,programId:this.programId,data:s})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:s,votePubkey:o}=t,a=In(lo.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:xr(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:xr(i.toBuffer()),voteAuthorizationType:s.index}}),c=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:dn,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return(new un).add({keys:c,programId:this.programId,data:a})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=t,s=In(lo.Withdraw,{lamports:n}),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new un).add({keys:o,programId:this.programId,data:s})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return po.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:n}=t,i=In(lo.UpdateValidatorIdentity),s=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new un).add({keys:s,programId:this.programId,data:i})}}po.programId=new Cr("Vote111111111111111111111111111111111111111"),po.space=3762;const go=new Cr("Va1idator1nfo111111111111111111111111111111"),yo=Ie({name:Ee(),website:ke(Ee()),details:ke(Ee()),iconUrl:ke(Ee()),keybaseUsername:ke(Ee())});class mo{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(2!==Gr(e))return null;const r=[];for(let t=0;t<2;t++){const t=new Cr(en(e,0,Rr)),n=1===tn(e);r.push({publicKey:t,isSigner:n})}if(r[0].publicKey.equals(go)&&r[1].isSigner){const t=$r().decode(n.Buffer.from(e)),i=JSON.parse(t);return le(i,yo),new mo(r[1].publicKey,i)}return null}}const wo=new Cr("Vote111111111111111111111111111111111111111"),bo=$t.w3([jr("nodePubkey"),jr("authorizedWithdrawer"),$t.u8("commission"),$t.I0(),$t.O6($t.w3([$t.I0("slot"),$t.DH("confirmationCount")]),$t.cY($t.DH(),-8),"votes"),$t.u8("rootSlotValid"),$t.I0("rootSlot"),$t.I0(),$t.O6($t.w3([$t.I0("epoch"),jr("authorizedVoter")]),$t.cY($t.DH(),-8),"authorizedVoters"),$t.w3([$t.O6($t.w3([jr("authorizedPubkey"),$t.I0("epochOfLastAuthorizedSwitch"),$t.I0("targetEpoch")]),32,"buf"),$t.I0("idx"),$t.u8("isEmpty")],"priorVoters"),$t.I0(),$t.O6($t.w3([$t.I0("epoch"),$t.I0("credits"),$t.I0("prevCredits")]),$t.cY($t.DH(),-8),"epochCredits"),$t.w3([$t.I0("slot"),$t.I0("timestamp")],"lastTimestamp")]);class vo{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const e=bo.decode(xr(t),4);let r=e.rootSlot;return e.rootSlotValid||(r=null),new vo({nodePubkey:new Cr(e.nodePubkey),authorizedWithdrawer:new Cr(e.authorizedWithdrawer),commission:e.commission,votes:e.votes,rootSlot:r,authorizedVoters:e.authorizedVoters.map(_o),priorVoters:So(e.priorVoters),epochCredits:e.epochCredits,lastTimestamp:e.lastTimestamp})}}function _o({authorizedVoter:t,epoch:e}){return{epoch:e,authorizedVoter:new Cr(t)}}function ko({authorizedPubkey:t,epochOfLastAuthorizedSwitch:e,targetEpoch:r}){return{authorizedPubkey:new Cr(t),epochOfLastAuthorizedSwitch:e,targetEpoch:r}}function So({buf:t,idx:e,isEmpty:r}){return r?[]:[...t.slice(e+1).map(ko),...t.slice(0,e).map(ko)]}const Eo={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Ao(t,e){const r=!1===e?"http":"https";if(!t)return Eo[r].devnet;const n=Eo[r][t];if(!n)throw new Error(`Unknown ${r} cluster: ${t}`);return n}async function Io(t,e,r,n){let i,s;r&&Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")||r&&Object.prototype.hasOwnProperty.call(r,"nonceValue")?(i=r,s=n):s=r;const o=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},a=await t.sendRawTransaction(e,o),c=s&&s.commitment,u=i?t.confirmTransaction(i,c):t.confirmTransaction(a,c),h=(await u).value;if(h.err){if(null!=a)throw new _n({action:o?.skipPreflight?"send":"simulate",signature:a,transactionMessage:`Status: (${JSON.stringify(h)})`});throw new Error(`Raw transaction ${a} failed (${JSON.stringify(h)})`)}return a}const xo=1e9},251:(t,e)=>{e.read=function(t,e,r,n,i){var s,o,a=8*i-n-1,c=(1<<a)-1,u=c>>1,h=-7,l=r?i-1:0,d=r?-1:1,f=t[e+l];for(l+=d,s=f&(1<<-h)-1,f>>=-h,h+=a;h>0;s=256*s+t[e+l],l+=d,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=n;h>0;o=256*o+t[e+l],l+=d,h-=8);if(0===s)s=1-u;else{if(s===c)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),s-=u}return(f?-1:1)*o*Math.pow(2,s-n)},e.write=function(t,e,r,n,i,s){var o,a,c,u=8*s-i-1,h=(1<<u)-1,l=h>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),(e+=o+l>=1?d/c:d*Math.pow(2,1-l))*c>=2&&(o++,c/=2),o+l>=h?(a=0,o=h):o+l>=1?(a=(e*c-1)*Math.pow(2,i),o+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),o=0));i>=8;t[r+f]=255&a,f+=p,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;t[r+f]=255&o,f+=p,o/=256,u-=8);t[r+f-p]|=128*g}},271:(t,e,r)=>{"use strict";r.d(e,{B4:()=>p,CQ:()=>_,CW:()=>v,Ei:()=>d,F8:()=>k,P5:()=>f,TH:()=>S,Vl:()=>w,Vr:()=>b,WM:()=>g,WQ:()=>m,im:()=>y,jm:()=>c,lD:()=>o,qh:()=>l,rE:()=>u,ry:()=>h,xn:()=>a});const n=BigInt(2**32-1),i=BigInt(32);function s(t,e=!1){return e?{h:Number(t&n),l:Number(t>>i&n)}:{h:0|Number(t>>i&n),l:0|Number(t&n)}}function o(t,e=!1){const r=t.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let o=0;o<r;o++){const{h:r,l:a}=s(t[o],e);[n[o],i[o]]=[r,a]}return[n,i]}const a=(t,e,r)=>t>>>r,c=(t,e,r)=>t<<32-r|e>>>r,u=(t,e,r)=>t>>>r|e<<32-r,h=(t,e,r)=>t<<32-r|e>>>r,l=(t,e,r)=>t<<64-r|e>>>r-32,d=(t,e,r)=>t>>>r-32|e<<64-r,f=(t,e,r)=>t<<r|e>>>32-r,p=(t,e,r)=>e<<r|t>>>32-r,g=(t,e,r)=>e<<r-32|t>>>64-r,y=(t,e,r)=>t<<r-32|e>>>64-r;function m(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:0|i}}const w=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),b=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,v=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),_=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,k=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),S=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0},281:(t,e)=>{"use strict";function r(t,e,r){return e<=t&&t<=r}function n(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function i(t){this.tokens=[].slice.call(t)}i.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var s=-1;function o(t,e){if(t)throw TypeError("Decoder error");return e||65533}var a="utf-8";function c(t,e){if(!(this instanceof c))return new c(t,e);if((t=void 0!==t?String(t).toLowerCase():a)!==a)throw new Error("Encoding not supported. Only utf-8 is supported");e=n(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function u(t,e){if(!(this instanceof u))return new u(t,e);if((t=void 0!==t?String(t).toLowerCase():a)!==a)throw new Error("Encoding not supported. Only utf-8 is supported");e=n(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function h(t){var e=t.fatal,n=0,i=0,a=0,c=128,u=191;this.handler=function(t,h){if(-1===h&&0!==a)return a=0,o(e);if(-1===h)return s;if(0===a){if(r(h,0,127))return h;if(r(h,194,223))a=1,n=h-192;else if(r(h,224,239))224===h&&(c=160),237===h&&(u=159),a=2,n=h-224;else{if(!r(h,240,244))return o(e);240===h&&(c=144),244===h&&(u=143),a=3,n=h-240}return n<<=6*a,null}if(!r(h,c,u))return n=a=i=0,c=128,u=191,t.prepend(h),o(e);if(c=128,u=191,n+=h-128<<6*(a-(i+=1)),i!==a)return null;var l=n;return n=a=i=0,l}}function l(t){t.fatal,this.handler=function(t,e){if(-1===e)return s;if(r(e,0,127))return e;var n,i;r(e,128,2047)?(n=1,i=192):r(e,2048,65535)?(n=2,i=224):r(e,65536,1114111)&&(n=3,i=240);for(var o=[(e>>6*n)+i];n>0;){var a=e>>6*(n-1);o.push(128|63&a),n-=1}return o}}c.prototype={decode:function(t,e){var r;r="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=n(e),this._streaming||(this._decoder=new h({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var o,a=new i(r),c=[];!a.endOfStream()&&(o=this._decoder.handler(a,a.read()))!==s;)null!==o&&(Array.isArray(o)?c.push.apply(c,o):c.push(o));if(!this._streaming){do{if((o=this._decoder.handler(a,a.read()))===s)break;null!==o&&(Array.isArray(o)?c.push.apply(c,o):c.push(o))}while(!a.endOfStream());this._decoder=null}return c.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===c[0]?(this._BOMseen=!0,c.shift()):this._BOMseen=!0)),function(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return e}(c)}},u.prototype={encode:function(t,e){t=t?String(t):"",e=n(e),this._streaming||(this._encoder=new l(this._options)),this._streaming=Boolean(e.stream);for(var r,o=[],a=new i(function(t){for(var e=String(t),r=e.length,n=0,i=[];n<r;){var s=e.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===r-1)i.push(65533);else{var o=t.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=1023&s,c=1023&o;i.push(65536+(a<<10)+c),n+=1}else i.push(65533)}n+=1}return i}(t));!a.endOfStream()&&(r=this._encoder.handler(a,a.read()))!==s;)Array.isArray(r)?o.push.apply(o,r):o.push(r);if(!this._streaming){for(;(r=this._encoder.handler(a,a.read()))!==s;)Array.isArray(r)?o.push.apply(o,r):o.push(r);this._encoder=null}return new Uint8Array(o)}},e.TextEncoder=u,e.TextDecoder=c},287:(t,e,r)=>{"use strict";const n=r(526),i=r(251),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},e.INSPECT_MAX_BYTES=50;const o=2147483647;function a(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}return u(t,e,r)}function u(t,e,r){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|g(t,e);let n=a(r);const i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(G(t,Uint8Array)){const e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return d(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(G(t,ArrayBuffer)||t&&G(t.buffer,ArrayBuffer))return f(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(G(t,SharedArrayBuffer)||t&&G(t.buffer,SharedArrayBuffer)))return f(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return c.from(n,e,r);const i=function(t){if(c.isBuffer(t)){const e=0|p(t.length),r=a(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||Y(t.length)?a(0):d(t):"Buffer"===t.type&&Array.isArray(t.data)?d(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return h(t),a(t<0?0:0|p(t))}function d(t){const e=t.length<0?0:0|p(t.length),r=a(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function f(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,c.prototype),n}function p(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function g(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||G(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(t).length;default:if(i)return n?-1:V(t).length;e=(""+e).toLowerCase(),i=!0}}function y(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,r);case"utf8":case"utf-8":return I(this,e,r);case"ascii":return B(this,e,r);case"latin1":case"binary":return P(this,e,r);case"base64":return A(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function m(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function w(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Y(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=c.from(e,n)),c.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,i){let s,o=1,a=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,a/=2,c/=2,r/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){let n=-1;for(s=r;s<a;s++)if(u(t,s)===u(e,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===c)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){let r=!0;for(let n=0;n<c;n++)if(u(t,s+n)!==u(e,n)){r=!1;break}if(r)return s}return-1}function v(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const s=e.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(e.substr(2*o,2),16);if(Y(n))return o;t[r+o]=n}return o}function _(t,e,r,n){return Z(V(e,t.length-r),t,r,n)}function k(t,e,r,n){return Z(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function S(t,e,r,n){return Z($(e),t,r,n)}function E(t,e,r,n){return Z(function(t,e){let r,n,i;const s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(e,t.length-r),t,r,n)}function A(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function I(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let s=null,o=e>239?4:e>223?3:e>191?2:1;if(i+o<=r){let r,n,a,c;switch(o){case 1:e<128&&(s=e);break;case 2:r=t[i+1],128==(192&r)&&(c=(31&e)<<6|63&r,c>127&&(s=c));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(c=(15&e)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return function(t){const e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=x));return r}(n)}e.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(t,e,r){return u(t,e,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,r){return function(t,e,r){return h(t),t<=0?a(t):void 0!==e?"string"==typeof r?a(t).fill(e,r):a(t).fill(e):a(t)}(t,e,r)},c.allocUnsafe=function(t){return l(t)},c.allocUnsafeSlow=function(t){return l(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(G(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),G(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=c.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(G(e,Uint8Array))i+e.length>n.length?(c.isBuffer(e)||(e=c.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!c.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)m(this,e,e+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},c.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?I(this,0,t):y.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(t,e,r,n,i){if(G(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(e>>>=0);const a=Math.min(s,o),u=this.slice(n,i),h=t.slice(e,r);for(let t=0;t<a;++t)if(u[t]!==h[t]){s=u[t],o=h[t];break}return s<o?-1:o<s?1:0},c.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},c.prototype.indexOf=function(t,e,r){return w(this,t,e,r,!0)},c.prototype.lastIndexOf=function(t,e,r){return w(this,t,e,r,!1)},c.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return _(this,t,e,r);case"ascii":case"latin1":case"binary":return k(this,t,e,r);case"base64":return S(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function B(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function P(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function T(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=J[t[n]];return i}function O(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}function M(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,r,n,i,s){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function L(t,e,r,n,i){F(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,r}function C(t,e,r,n,i){F(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s>>=8,t[r+6]=s,s>>=8,t[r+5]=s,s>>=8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o>>=8,t[r+2]=o,o>>=8,t[r+1]=o,o>>=8,t[r]=o,r+8}function U(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(t,e,r,n,s){return e=+e,r>>>=0,s||U(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function N(t,e,r,n,s){return e=+e,r>>>=0,s||U(t,0,r,8),i.write(t,e,r,n,52,8),r+8}c.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||M(t,e,this.length);let n=this[t],i=1,s=0;for(;++s<e&&(i*=256);)n+=this[t+s]*i;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||M(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||M(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||M(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||M(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=X(function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))}),c.prototype.readBigUInt64BE=X(function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),c.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||M(t,e,this.length);let n=this[t],i=1,s=0;for(;++s<e&&(i*=256);)n+=this[t+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},c.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||M(t,e,this.length);let n=e,i=1,s=this[t+--n];for(;n>0&&(i*=256);)s+=this[t+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*e)),s},c.prototype.readInt8=function(t,e){return t>>>=0,e||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||M(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(t,e){t>>>=0,e||M(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=X(function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)}),c.prototype.readBigInt64BE=X(function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||q(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)}),c.prototype.readFloatLE=function(t,e){return t>>>=0,e||M(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||M(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||M(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||M(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||R(this,t,e,r,Math.pow(2,8*r)-1,0);let i=1,s=0;for(this[e]=255&t;++s<r&&(i*=256);)this[e+s]=t/i&255;return e+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||R(this,t,e,r,Math.pow(2,8*r)-1,0);let i=r-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigUInt64LE=X(function(t,e=0){return L(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=X(function(t,e=0){return C(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);R(this,t,e,r,n-1,-n)}let i=0,s=1,o=0;for(this[e]=255&t;++i<r&&(s*=256);)t<0&&0===o&&0!==this[e+i-1]&&(o=1),this[e+i]=(t/s|0)-o&255;return e+r},c.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);R(this,t,e,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===o&&0!==this[e+i+1]&&(o=1),this[e+i]=(t/s|0)-o&255;return e+r},c.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigInt64LE=X(function(t,e=0){return L(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=X(function(t,e=0){return C(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeFloatLE=function(t,e,r){return z(this,t,e,!0,r)},c.prototype.writeFloatBE=function(t,e,r){return z(this,t,e,!1,r)},c.prototype.writeDoubleLE=function(t,e,r){return N(this,t,e,!0,r)},c.prototype.writeDoubleBE=function(t,e,r){return N(this,t,e,!1,r)},c.prototype.copy=function(t,e,r,n){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},c.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const s=c.isBuffer(t)?t:c.from(t,n),o=s.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=s[i%o]}return this};const K={};function D(t,e,r){K[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function W(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function F(t,e,r,n,i,s){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let i;throw i=s>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new K.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,r){H(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||q(e,t.length-(r+1))}(n,i,s)}function H(t,e){if("number"!=typeof t)throw new K.ERR_INVALID_ARG_TYPE(e,"number",t)}function q(t,e,r){if(Math.floor(t)!==t)throw H(t,r),new K.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new K.ERR_BUFFER_OUT_OF_BOUNDS;throw new K.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}D("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),D("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),D("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=W(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=W(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);const j=/[^+/0-9A-Za-z-_]/g;function V(t,e){let r;e=e||1/0;const n=t.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function $(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Z(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function G(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Y(t){return t!=t}const J=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function X(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},289:(t,e,r)=>{"use strict";const n=r(341).v4;t.exports=function(t,e,r,i){if("string"!=typeof t)throw new TypeError(t+" must be a string");const s="number"==typeof(i=i||{}).version?i.version:2;if(1!==s&&2!==s)throw new TypeError(s+" must be 1 or 2");const o={method:t};if(2===s&&(o.jsonrpc="2.0"),e){if("object"!=typeof e&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");o.params=e}if(void 0===r){const t="function"==typeof i.generator?i.generator:function(){return n()};o.id=t(o,i)}else 2===s&&null===r?i.notificationIdNull&&(o.id=null):o.id=r;return o}},341:(t,e,r)=>{"use strict";var n;r.d(e,{v4:()=>h});var i=new Uint8Array(16);function s(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}const o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var a=[],c=0;c<256;++c)a.push((c+256).toString(16).substr(1));const u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(a[t[e+0]]+a[t[e+1]]+a[t[e+2]]+a[t[e+3]]+"-"+a[t[e+4]]+a[t[e+5]]+"-"+a[t[e+6]]+a[t[e+7]]+"-"+a[t[e+8]]+a[t[e+9]]+"-"+a[t[e+10]]+a[t[e+11]]+a[t[e+12]]+a[t[e+13]]+a[t[e+14]]+a[t[e+15]]).toLowerCase();if(!function(t){return"string"==typeof t&&o.test(t)}(r))throw TypeError("Stringified UUID is invalid");return r},h=function(t,e,r){var n=(t=t||{}).random||(t.rng||s)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(var i=0;i<16;++i)e[r+i]=n[i];return e}return u(n)}},364:(t,e,r)=>{"use strict";var n=r(861).Buffer;t.exports=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(255!==e[o])throw new TypeError(s+" is ambiguous");e[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function l(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return n.alloc(0);for(var r=0,i=0,s=0;t[r]===c;)i++,r++;for(var o=(t.length-r)*u+1>>>0,h=new Uint8Array(o);r<t.length;){var l=t.charCodeAt(r);if(l>255)return;var d=e[l];if(255===d)return;for(var f=0,p=o-1;(0!==d||f<s)&&-1!==p;p--,f++)d+=a*h[p]>>>0,h[p]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");s=f,r++}for(var g=o-s;g!==o&&0===h[g];)g++;var y=n.allocUnsafe(i+(o-g));y.fill(0,0,i);for(var m=i;g!==o;)y[m++]=h[g++];return y}return{encode:function(e){if((Array.isArray(e)||e instanceof Uint8Array)&&(e=n.from(e)),!n.isBuffer(e))throw new TypeError("Expected Buffer");if(0===e.length)return"";for(var r=0,i=0,s=0,o=e.length;s!==o&&0===e[s];)s++,r++;for(var u=(o-s)*h+1>>>0,l=new Uint8Array(u);s!==o;){for(var d=e[s],f=0,p=u-1;(0!==d||f<i)&&-1!==p;p--,f++)d+=256*l[p]>>>0,l[p]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");i=f,s++}for(var g=u-i;g!==u&&0===l[g];)g++;for(var y=c.repeat(r);g<u;++g)y+=t.charAt(l[g]);return y},decodeUnsafe:l,decode:function(t){var e=l(t);if(e)return e;throw new Error("Non-base"+a+" character")}}}},404:function(t,e,r){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function s(t,e,r){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var o;"object"==typeof t?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(790).Buffer}catch(t){}function a(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+t)}function c(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,i){for(var s=0,o=0,a=Math.min(t.length,r),c=e;c<a;c++){var u=t.charCodeAt(c)-48;s*=i,o=u>=49?u-49+10:u>=17?u-17+10:u,n(u>=0&&o<i,"Invalid character"),s+=o}return s}function h(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(s.isBN=function(t){return t instanceof s||null!==t&&"object"==typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},s.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},s.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===r)for(i=t.length-1,s=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===r)for(i=0,s=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this._strip()},s.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,s=0,o=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=c(t,e,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=c(t,e,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;this._strip()},s.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var s=t.length-r,o=s%n,a=Math.min(s,s-o)+r,c=0,h=r;h<a;h+=n)c=u(t,h,h+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var l=1;for(c=u(t,h,t.length,e),h=0;h<o;h++)l*=e;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype._move=function(t){h(t,this)},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){s.prototype.inspect=l}else s.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],s=0|e.words[0],o=i*s,a=67108863&o,c=o/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var h=c>>>26,l=67108863&c,d=Math.min(u,e.length-1),f=Math.max(0,u-t.length+1);f<=d;f++){var p=u-f|0;h+=(o=(i=0|t.words[p])*(s=0|e.words[f])+l)/67108864|0,l=67108863&o}r.words[u]=0|l,c=0|h}return 0!==c?r.words[u]=0|c:r.length--,r._strip()}s.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<i|s)).toString(16);s=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,o--),r=0!==s||o!==this.length-1?d[6-c.length]+c+r:c+r}for(0!==s&&(r=s.toString(16)+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=f[t],h=p[t];r="";var l=this.clone();for(l.negative=0;!l.isZero();){var g=l.modrn(h).toString(t);r=(l=l.idivn(h)).isZero()?g+r:d[u-g.length]+g+r}for(this.isZero()&&(r="0"+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(t,e){return this.toArrayLike(o,t,e)}),s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},s.prototype.toArrayLike=function(t,e,r){this._strip();var i=this.byteLength(),s=r||Math.max(1,i);n(i<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0");var o=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,s);return this["_toArrayLike"+("le"===e?"LE":"BE")](o,i),o},s.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;t[r++]=255&o,r<t.length&&(t[r++]=o>>8&255),r<t.length&&(t[r++]=o>>16&255),6===s?(r<t.length&&(t[r++]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0},s.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;t[r--]=255&o,r>=0&&(t[r--]=o>>8&255),r>=0&&(t[r--]=o>>16&255),6===s?(r>=0&&(t[r--]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 8191&e||(r+=13,e>>>=13),127&e||(r+=7,e>>>=7),15&e||(r+=4,e>>>=4),3&e||(r+=2,e>>>=2),1&e||r++,r},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},s.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},s.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},s.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},s.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,s=0;s<n.length;s++)e=(0|r.words[s])+(0|n.words[s])+i,this.words[s]=67108863&e,i=e>>>26;for(;0!==i&&s<r.length;s++)e=(0|r.words[s])+i,this.words[s]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var s=0,o=0;o<n.length;o++)s=(e=(0|r.words[o])-(0|n.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<r.length;o++)s=(e=(0|r.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var y=function(t,e,r){var n,i,s,o=t.words,a=e.words,c=r.words,u=0,h=0|o[0],l=8191&h,d=h>>>13,f=0|o[1],p=8191&f,g=f>>>13,y=0|o[2],m=8191&y,w=y>>>13,b=0|o[3],v=8191&b,_=b>>>13,k=0|o[4],S=8191&k,E=k>>>13,A=0|o[5],I=8191&A,x=A>>>13,B=0|o[6],P=8191&B,T=B>>>13,O=0|o[7],M=8191&O,R=O>>>13,L=0|o[8],C=8191&L,U=L>>>13,z=0|o[9],N=8191&z,K=z>>>13,D=0|a[0],W=8191&D,F=D>>>13,H=0|a[1],q=8191&H,j=H>>>13,V=0|a[2],$=8191&V,Z=V>>>13,G=0|a[3],Y=8191&G,J=G>>>13,X=0|a[4],Q=8191&X,tt=X>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],st=8191&it,ot=it>>>13,at=0|a[7],ct=8191&at,ut=at>>>13,ht=0|a[8],lt=8191&ht,dt=ht>>>13,ft=0|a[9],pt=8191&ft,gt=ft>>>13;r.negative=t.negative^e.negative,r.length=19;var yt=(u+(n=Math.imul(l,W))|0)+((8191&(i=(i=Math.imul(l,F))+Math.imul(d,W)|0))<<13)|0;u=((s=Math.imul(d,F))+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(p,W),i=(i=Math.imul(p,F))+Math.imul(g,W)|0,s=Math.imul(g,F);var mt=(u+(n=n+Math.imul(l,q)|0)|0)+((8191&(i=(i=i+Math.imul(l,j)|0)+Math.imul(d,q)|0))<<13)|0;u=((s=s+Math.imul(d,j)|0)+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(m,W),i=(i=Math.imul(m,F))+Math.imul(w,W)|0,s=Math.imul(w,F),n=n+Math.imul(p,q)|0,i=(i=i+Math.imul(p,j)|0)+Math.imul(g,q)|0,s=s+Math.imul(g,j)|0;var wt=(u+(n=n+Math.imul(l,$)|0)|0)+((8191&(i=(i=i+Math.imul(l,Z)|0)+Math.imul(d,$)|0))<<13)|0;u=((s=s+Math.imul(d,Z)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(v,W),i=(i=Math.imul(v,F))+Math.imul(_,W)|0,s=Math.imul(_,F),n=n+Math.imul(m,q)|0,i=(i=i+Math.imul(m,j)|0)+Math.imul(w,q)|0,s=s+Math.imul(w,j)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(g,$)|0,s=s+Math.imul(g,Z)|0;var bt=(u+(n=n+Math.imul(l,Y)|0)|0)+((8191&(i=(i=i+Math.imul(l,J)|0)+Math.imul(d,Y)|0))<<13)|0;u=((s=s+Math.imul(d,J)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(S,W),i=(i=Math.imul(S,F))+Math.imul(E,W)|0,s=Math.imul(E,F),n=n+Math.imul(v,q)|0,i=(i=i+Math.imul(v,j)|0)+Math.imul(_,q)|0,s=s+Math.imul(_,j)|0,n=n+Math.imul(m,$)|0,i=(i=i+Math.imul(m,Z)|0)+Math.imul(w,$)|0,s=s+Math.imul(w,Z)|0,n=n+Math.imul(p,Y)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(g,Y)|0,s=s+Math.imul(g,J)|0;var vt=(u+(n=n+Math.imul(l,Q)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(d,Q)|0))<<13)|0;u=((s=s+Math.imul(d,tt)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(I,W),i=(i=Math.imul(I,F))+Math.imul(x,W)|0,s=Math.imul(x,F),n=n+Math.imul(S,q)|0,i=(i=i+Math.imul(S,j)|0)+Math.imul(E,q)|0,s=s+Math.imul(E,j)|0,n=n+Math.imul(v,$)|0,i=(i=i+Math.imul(v,Z)|0)+Math.imul(_,$)|0,s=s+Math.imul(_,Z)|0,n=n+Math.imul(m,Y)|0,i=(i=i+Math.imul(m,J)|0)+Math.imul(w,Y)|0,s=s+Math.imul(w,J)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(g,Q)|0,s=s+Math.imul(g,tt)|0;var _t=(u+(n=n+Math.imul(l,rt)|0)|0)+((8191&(i=(i=i+Math.imul(l,nt)|0)+Math.imul(d,rt)|0))<<13)|0;u=((s=s+Math.imul(d,nt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(P,W),i=(i=Math.imul(P,F))+Math.imul(T,W)|0,s=Math.imul(T,F),n=n+Math.imul(I,q)|0,i=(i=i+Math.imul(I,j)|0)+Math.imul(x,q)|0,s=s+Math.imul(x,j)|0,n=n+Math.imul(S,$)|0,i=(i=i+Math.imul(S,Z)|0)+Math.imul(E,$)|0,s=s+Math.imul(E,Z)|0,n=n+Math.imul(v,Y)|0,i=(i=i+Math.imul(v,J)|0)+Math.imul(_,Y)|0,s=s+Math.imul(_,J)|0,n=n+Math.imul(m,Q)|0,i=(i=i+Math.imul(m,tt)|0)+Math.imul(w,Q)|0,s=s+Math.imul(w,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(g,rt)|0,s=s+Math.imul(g,nt)|0;var kt=(u+(n=n+Math.imul(l,st)|0)|0)+((8191&(i=(i=i+Math.imul(l,ot)|0)+Math.imul(d,st)|0))<<13)|0;u=((s=s+Math.imul(d,ot)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(M,W),i=(i=Math.imul(M,F))+Math.imul(R,W)|0,s=Math.imul(R,F),n=n+Math.imul(P,q)|0,i=(i=i+Math.imul(P,j)|0)+Math.imul(T,q)|0,s=s+Math.imul(T,j)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,Z)|0)+Math.imul(x,$)|0,s=s+Math.imul(x,Z)|0,n=n+Math.imul(S,Y)|0,i=(i=i+Math.imul(S,J)|0)+Math.imul(E,Y)|0,s=s+Math.imul(E,J)|0,n=n+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,tt)|0)+Math.imul(_,Q)|0,s=s+Math.imul(_,tt)|0,n=n+Math.imul(m,rt)|0,i=(i=i+Math.imul(m,nt)|0)+Math.imul(w,rt)|0,s=s+Math.imul(w,nt)|0,n=n+Math.imul(p,st)|0,i=(i=i+Math.imul(p,ot)|0)+Math.imul(g,st)|0,s=s+Math.imul(g,ot)|0;var St=(u+(n=n+Math.imul(l,ct)|0)|0)+((8191&(i=(i=i+Math.imul(l,ut)|0)+Math.imul(d,ct)|0))<<13)|0;u=((s=s+Math.imul(d,ut)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(C,W),i=(i=Math.imul(C,F))+Math.imul(U,W)|0,s=Math.imul(U,F),n=n+Math.imul(M,q)|0,i=(i=i+Math.imul(M,j)|0)+Math.imul(R,q)|0,s=s+Math.imul(R,j)|0,n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,Z)|0)+Math.imul(T,$)|0,s=s+Math.imul(T,Z)|0,n=n+Math.imul(I,Y)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(x,Y)|0,s=s+Math.imul(x,J)|0,n=n+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,tt)|0)+Math.imul(E,Q)|0,s=s+Math.imul(E,tt)|0,n=n+Math.imul(v,rt)|0,i=(i=i+Math.imul(v,nt)|0)+Math.imul(_,rt)|0,s=s+Math.imul(_,nt)|0,n=n+Math.imul(m,st)|0,i=(i=i+Math.imul(m,ot)|0)+Math.imul(w,st)|0,s=s+Math.imul(w,ot)|0,n=n+Math.imul(p,ct)|0,i=(i=i+Math.imul(p,ut)|0)+Math.imul(g,ct)|0,s=s+Math.imul(g,ut)|0;var Et=(u+(n=n+Math.imul(l,lt)|0)|0)+((8191&(i=(i=i+Math.imul(l,dt)|0)+Math.imul(d,lt)|0))<<13)|0;u=((s=s+Math.imul(d,dt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(N,W),i=(i=Math.imul(N,F))+Math.imul(K,W)|0,s=Math.imul(K,F),n=n+Math.imul(C,q)|0,i=(i=i+Math.imul(C,j)|0)+Math.imul(U,q)|0,s=s+Math.imul(U,j)|0,n=n+Math.imul(M,$)|0,i=(i=i+Math.imul(M,Z)|0)+Math.imul(R,$)|0,s=s+Math.imul(R,Z)|0,n=n+Math.imul(P,Y)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(T,Y)|0,s=s+Math.imul(T,J)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(x,Q)|0,s=s+Math.imul(x,tt)|0,n=n+Math.imul(S,rt)|0,i=(i=i+Math.imul(S,nt)|0)+Math.imul(E,rt)|0,s=s+Math.imul(E,nt)|0,n=n+Math.imul(v,st)|0,i=(i=i+Math.imul(v,ot)|0)+Math.imul(_,st)|0,s=s+Math.imul(_,ot)|0,n=n+Math.imul(m,ct)|0,i=(i=i+Math.imul(m,ut)|0)+Math.imul(w,ct)|0,s=s+Math.imul(w,ut)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,dt)|0)+Math.imul(g,lt)|0,s=s+Math.imul(g,dt)|0;var At=(u+(n=n+Math.imul(l,pt)|0)|0)+((8191&(i=(i=i+Math.imul(l,gt)|0)+Math.imul(d,pt)|0))<<13)|0;u=((s=s+Math.imul(d,gt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(N,q),i=(i=Math.imul(N,j))+Math.imul(K,q)|0,s=Math.imul(K,j),n=n+Math.imul(C,$)|0,i=(i=i+Math.imul(C,Z)|0)+Math.imul(U,$)|0,s=s+Math.imul(U,Z)|0,n=n+Math.imul(M,Y)|0,i=(i=i+Math.imul(M,J)|0)+Math.imul(R,Y)|0,s=s+Math.imul(R,J)|0,n=n+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(T,Q)|0,s=s+Math.imul(T,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(x,rt)|0,s=s+Math.imul(x,nt)|0,n=n+Math.imul(S,st)|0,i=(i=i+Math.imul(S,ot)|0)+Math.imul(E,st)|0,s=s+Math.imul(E,ot)|0,n=n+Math.imul(v,ct)|0,i=(i=i+Math.imul(v,ut)|0)+Math.imul(_,ct)|0,s=s+Math.imul(_,ut)|0,n=n+Math.imul(m,lt)|0,i=(i=i+Math.imul(m,dt)|0)+Math.imul(w,lt)|0,s=s+Math.imul(w,dt)|0;var It=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,gt)|0)+Math.imul(g,pt)|0))<<13)|0;u=((s=s+Math.imul(g,gt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(N,$),i=(i=Math.imul(N,Z))+Math.imul(K,$)|0,s=Math.imul(K,Z),n=n+Math.imul(C,Y)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(U,Y)|0,s=s+Math.imul(U,J)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,tt)|0)+Math.imul(R,Q)|0,s=s+Math.imul(R,tt)|0,n=n+Math.imul(P,rt)|0,i=(i=i+Math.imul(P,nt)|0)+Math.imul(T,rt)|0,s=s+Math.imul(T,nt)|0,n=n+Math.imul(I,st)|0,i=(i=i+Math.imul(I,ot)|0)+Math.imul(x,st)|0,s=s+Math.imul(x,ot)|0,n=n+Math.imul(S,ct)|0,i=(i=i+Math.imul(S,ut)|0)+Math.imul(E,ct)|0,s=s+Math.imul(E,ut)|0,n=n+Math.imul(v,lt)|0,i=(i=i+Math.imul(v,dt)|0)+Math.imul(_,lt)|0,s=s+Math.imul(_,dt)|0;var xt=(u+(n=n+Math.imul(m,pt)|0)|0)+((8191&(i=(i=i+Math.imul(m,gt)|0)+Math.imul(w,pt)|0))<<13)|0;u=((s=s+Math.imul(w,gt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(N,Y),i=(i=Math.imul(N,J))+Math.imul(K,Y)|0,s=Math.imul(K,J),n=n+Math.imul(C,Q)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(U,Q)|0,s=s+Math.imul(U,tt)|0,n=n+Math.imul(M,rt)|0,i=(i=i+Math.imul(M,nt)|0)+Math.imul(R,rt)|0,s=s+Math.imul(R,nt)|0,n=n+Math.imul(P,st)|0,i=(i=i+Math.imul(P,ot)|0)+Math.imul(T,st)|0,s=s+Math.imul(T,ot)|0,n=n+Math.imul(I,ct)|0,i=(i=i+Math.imul(I,ut)|0)+Math.imul(x,ct)|0,s=s+Math.imul(x,ut)|0,n=n+Math.imul(S,lt)|0,i=(i=i+Math.imul(S,dt)|0)+Math.imul(E,lt)|0,s=s+Math.imul(E,dt)|0;var Bt=(u+(n=n+Math.imul(v,pt)|0)|0)+((8191&(i=(i=i+Math.imul(v,gt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((s=s+Math.imul(_,gt)|0)+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(N,Q),i=(i=Math.imul(N,tt))+Math.imul(K,Q)|0,s=Math.imul(K,tt),n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(U,rt)|0,s=s+Math.imul(U,nt)|0,n=n+Math.imul(M,st)|0,i=(i=i+Math.imul(M,ot)|0)+Math.imul(R,st)|0,s=s+Math.imul(R,ot)|0,n=n+Math.imul(P,ct)|0,i=(i=i+Math.imul(P,ut)|0)+Math.imul(T,ct)|0,s=s+Math.imul(T,ut)|0,n=n+Math.imul(I,lt)|0,i=(i=i+Math.imul(I,dt)|0)+Math.imul(x,lt)|0,s=s+Math.imul(x,dt)|0;var Pt=(u+(n=n+Math.imul(S,pt)|0)|0)+((8191&(i=(i=i+Math.imul(S,gt)|0)+Math.imul(E,pt)|0))<<13)|0;u=((s=s+Math.imul(E,gt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(N,rt),i=(i=Math.imul(N,nt))+Math.imul(K,rt)|0,s=Math.imul(K,nt),n=n+Math.imul(C,st)|0,i=(i=i+Math.imul(C,ot)|0)+Math.imul(U,st)|0,s=s+Math.imul(U,ot)|0,n=n+Math.imul(M,ct)|0,i=(i=i+Math.imul(M,ut)|0)+Math.imul(R,ct)|0,s=s+Math.imul(R,ut)|0,n=n+Math.imul(P,lt)|0,i=(i=i+Math.imul(P,dt)|0)+Math.imul(T,lt)|0,s=s+Math.imul(T,dt)|0;var Tt=(u+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,gt)|0)+Math.imul(x,pt)|0))<<13)|0;u=((s=s+Math.imul(x,gt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(N,st),i=(i=Math.imul(N,ot))+Math.imul(K,st)|0,s=Math.imul(K,ot),n=n+Math.imul(C,ct)|0,i=(i=i+Math.imul(C,ut)|0)+Math.imul(U,ct)|0,s=s+Math.imul(U,ut)|0,n=n+Math.imul(M,lt)|0,i=(i=i+Math.imul(M,dt)|0)+Math.imul(R,lt)|0,s=s+Math.imul(R,dt)|0;var Ot=(u+(n=n+Math.imul(P,pt)|0)|0)+((8191&(i=(i=i+Math.imul(P,gt)|0)+Math.imul(T,pt)|0))<<13)|0;u=((s=s+Math.imul(T,gt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(N,ct),i=(i=Math.imul(N,ut))+Math.imul(K,ct)|0,s=Math.imul(K,ut),n=n+Math.imul(C,lt)|0,i=(i=i+Math.imul(C,dt)|0)+Math.imul(U,lt)|0,s=s+Math.imul(U,dt)|0;var Mt=(u+(n=n+Math.imul(M,pt)|0)|0)+((8191&(i=(i=i+Math.imul(M,gt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((s=s+Math.imul(R,gt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(N,lt),i=(i=Math.imul(N,dt))+Math.imul(K,lt)|0,s=Math.imul(K,dt);var Rt=(u+(n=n+Math.imul(C,pt)|0)|0)+((8191&(i=(i=i+Math.imul(C,gt)|0)+Math.imul(U,pt)|0))<<13)|0;u=((s=s+Math.imul(U,gt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863;var Lt=(u+(n=Math.imul(N,pt))|0)+((8191&(i=(i=Math.imul(N,gt))+Math.imul(K,pt)|0))<<13)|0;return u=((s=Math.imul(K,gt))+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,c[0]=yt,c[1]=mt,c[2]=wt,c[3]=bt,c[4]=vt,c[5]=_t,c[6]=kt,c[7]=St,c[8]=Et,c[9]=At,c[10]=It,c[11]=xt,c[12]=Bt,c[13]=Pt,c[14]=Tt,c[15]=Ot,c[16]=Mt,c[17]=Rt,c[18]=Lt,0!==u&&(c[19]=u,r.length++),r};function m(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,s=0;s<r.length-1;s++){var o=i;i=0;for(var a=67108863&n,c=Math.min(s,e.length-1),u=Math.max(0,s-t.length+1);u<=c;u++){var h=s-u,l=(0|t.words[h])*(0|e.words[u]),d=67108863&l;a=67108863&(d=d+a|0),i+=(o=(o=o+(l/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}r.words[s]=a,n=o,o=i}return 0!==n?r.words[s]=n:r.length--,r._strip()}function w(t,e,r){return m(t,e,r)}function b(t,e){this.x=t,this.y=e}Math.imul||(y=g),s.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?y(this,t,e):r<63?g(this,t,e):r<1024?m(this,t,e):w(this,t,e)},b.prototype.makeRBT=function(t){for(var e=new Array(t),r=s.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},b.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},b.prototype.permute=function(t,e,r,n,i,s){for(var o=0;o<s;o++)n[o]=e[t[o]],i[o]=r[t[o]]},b.prototype.transform=function(t,e,r,n,i,s){this.permute(s,t,e,r,n,i);for(var o=1;o<i;o<<=1)for(var a=o<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=c,d=u,f=0;f<o;f++){var p=r[h+f],g=n[h+f],y=r[h+f+o],m=n[h+f+o],w=l*y-d*m;m=l*m+d*y,y=w,r[h+f]=p+y,n[h+f]=g+m,r[h+f+o]=p-y,n[h+f+o]=g-m,f!==a&&(w=c*l-u*d,d=c*d+u*l,l=w)}},b.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},b.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},b.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},b.prototype.convert13b=function(t,e,r,i){for(var s=0,o=0;o<e;o++)s+=0|t[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*e;o<i;++o)r[o]=0;n(0===s),n(!(-8192&s))},b.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},b.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),s=this.stub(n),o=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),h=new Array(n),l=new Array(n),d=r.words;d.length=n,this.convert13b(t.words,t.length,o,n),this.convert13b(e.words,e.length,u,n),this.transform(o,s,a,c,n,i),this.transform(u,s,h,l,n,i);for(var f=0;f<n;f++){var p=a[f]*h[f]-c[f]*l[f];c[f]=a[f]*l[f]+c[f]*h[f],a[f]=p}return this.conjugate(a,c,n),this.transform(a,c,d,s,n,i),this.conjugate(d,s,n),this.normalize13b(d,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),w(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"==typeof t),n(t<67108864);for(var r=0,i=0;i<this.length;i++){var s=(0|this.words[i])*t,o=(67108863&s)+(67108863&r);r>>=26,r+=s/67108864|0,r+=o>>>26,this.words[i]=67108863&o}return 0!==r&&(this.words[i]=r,this.length++),this.length=0===t?1:this.length,e?this.ineg():this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}(t);if(0===e.length)return new s(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(e=0;e<this.length;e++){var a=this.words[e]&s,c=(0|this.words[e])-a<<r;this.words[e]=c|o,o=a>>>26-r}o&&(this.words[e]=o,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},s.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},s.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var s=t%26,o=Math.min((t-s)/26,this.length),a=67108863^67108863>>>s<<s,c=r;if(i-=o,i=Math.max(0,i),c){for(var u=0;u<o;u++)c.words[u]=this.words[u];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(0!==h||u>=i);u--){var l=0|this.words[u];this.words[u]=h<<26-s|l>>>s,h=l&a}return c&&0!==h&&(c.words[c.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r||!(this.words[r]&i))},s.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this._strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,r){var i,s,o=t.length+r;this._expand(o);var a=0;for(i=0;i<t.length;i++){s=(0|this.words[i+r])+a;var c=(0|t.words[i])*e;a=((s-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&s}for(;i<this.length-r;i++)a=(s=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&s;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(s=-(0|this.words[i])+a)>>26,this.words[i]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,o=0|i.words[i.length-1];0!=(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==e){(a=new s(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var h=n.clone()._ishlnsubmul(i,1,c);0===h.negative&&(n=h,a&&(a.words[c]=1));for(var l=c-1;l>=0;l--){var d=67108864*(0|n.words[i.length+l])+(0|n.words[i.length+l-1]);for(d=Math.min(d/o|0,67108863),n._ishlnsubmul(i,d,l);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(i,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=d)}return a&&a._strip(),n._strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},s.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(t)),{div:i,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modrn(t.words[0]))}:this._wordDiv(t,e);var i,o,a},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),s=r.cmp(n);return s<0||1===i&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=(1<<26)%t,i=0,s=this.length-1;s>=0;s--)i=(r*i+(0|this.words[s]))%t;return e?-i:i},s.prototype.modn=function(t){return this.modrn(t)},s.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var s=(0|this.words[i])+67108864*r;this.words[i]=s/t|0,r=s%t}return this._strip(),e?this.ineg():this},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new s(1),o=new s(0),a=new s(0),c=new s(1),u=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++u;for(var h=r.clone(),l=e.clone();!e.isZero();){for(var d=0,f=1;0===(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(h),o.isub(l)),i.iushrn(1),o.iushrn(1);for(var p=0,g=1;0===(r.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(h),c.isub(l)),a.iushrn(1),c.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),o.isub(c)):(r.isub(e),a.isub(i),c.isub(o))}return{a,b:c,gcd:r.iushln(u)}},s.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,o=new s(1),a=new s(0),c=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,h=1;0===(e.words[0]&h)&&u<26;++u,h<<=1);if(u>0)for(e.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var l=0,d=1;0===(r.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(r.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),o.isub(a)):(r.isub(e),a.isub(o))}return(i=0===e.cmpn(1)?o:a).cmpn(0)<0&&i.iadd(t),i},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var s=e;e=r,r=s}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return!(1&this.words[0])},s.prototype.isOdd=function(){return!(1&~this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var s=i,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new I(t)},s.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function _(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function k(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(t){if("string"==typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function x(t){I.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},_.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},_.prototype.split=function(t,e){t.iushrn(this.n,0,e)},_.prototype.imulK=function(t){return t.imul(this.k)},i(k,_),k.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&r,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,t.words[i-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},k.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(S,_),i(E,_),i(A,_),A.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(v[t])return v[t];var e;if("k256"===t)e=new k;else if("p224"===t)e=new S;else if("p192"===t)e=new E;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new A}return v[t]=e,e},I.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},I.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},I.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(h(t,t.umod(this.m)._forceRed(this)),t)},I.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},I.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},I.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},I.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},I.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},I.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},I.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},I.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},I.prototype.isqr=function(t){return this.imul(t,t.clone())},I.prototype.sqr=function(t){return this.mul(t,t)},I.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new s(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);n(!i.isZero());var a=new s(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new s(2*h*h).toRed(this);0!==this.pow(h,u).cmp(c);)h.redIAdd(c);for(var l=this.pow(h,i),d=this.pow(t,i.addn(1).iushrn(1)),f=this.pow(t,i),p=o;0!==f.cmp(a);){for(var g=f,y=0;0!==g.cmp(a);y++)g=g.redSqr();n(y<p);var m=this.pow(l,new s(1).iushln(p-y-1));d=d.redMul(m),l=m.redSqr(),f=f.redMul(l),p=y}return d},I.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},I.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new s(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],o=0,a=0,c=e.bitLength()%26;for(0===c&&(c=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],h=c-1;h>=0;h--){var l=u>>h&1;i!==r[0]&&(i=this.sqr(i)),0!==l||0!==o?(o<<=1,o|=l,(4===++a||0===n&&0===h)&&(i=this.mul(i,r[o]),a=0,o=0)):a=0}c=26}return i},I.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},I.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new x(t)},i(x,I),x.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},x.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},x.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},x.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},x.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=r.nmd(t),this)},442:(t,e,r)=>{"use strict";r.d(e,{sc:()=>b,Zf:()=>v});var n=r(531);function i(t,e,r){return t&e^~t&r}function s(t,e,r){return t&e^t&r^e&r}class o extends n.Vw{constructor(t,e,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(t),this.view=(0,n.O8)(this.buffer)}update(t){(0,n.CC)(this),t=(0,n.ZJ)(t),(0,n.DO)(t);const{view:e,buffer:r,blockLen:i}=this,s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const e=(0,n.O8)(t);for(;i<=s-o;o+=i)this.process(e,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,n.CC)(this),(0,n.Ht)(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;e[o++]=128,(0,n.uH)(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let t=o;t<i;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}(r,i-8,BigInt(8*this.length),s),this.process(r,0);const a=(0,n.O8)(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<u;t++)a.setUint32(4*t,h[t],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return t.destroyed=s,t.finished=i,t.length=n,t.pos=o,n%e&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const a=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var u=r(271);const h=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l=new Uint32Array(64);class d extends o{constructor(t=32){super(64,t,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){const{A:t,B:e,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[t,e,r,n,i,s,o,a]}set(t,e,r,n,i,s,o,a){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(t,e){for(let r=0;r<16;r++,e+=4)l[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=l[t-15],r=l[t-2],i=(0,n.Ow)(e,7)^(0,n.Ow)(e,18)^e>>>3,s=(0,n.Ow)(r,17)^(0,n.Ow)(r,19)^r>>>10;l[t]=s+l[t-7]+i+l[t-16]|0}let{A:r,B:o,C:a,D:c,E:u,F:d,G:f,H:p}=this;for(let t=0;t<64;t++){const e=p+((0,n.Ow)(u,6)^(0,n.Ow)(u,11)^(0,n.Ow)(u,25))+i(u,d,f)+h[t]+l[t]|0,g=((0,n.Ow)(r,2)^(0,n.Ow)(r,13)^(0,n.Ow)(r,22))+s(r,o,a)|0;p=f,f=d,d=u,u=c+e|0,c=a,a=o,o=r,r=e+g|0}r=r+this.A|0,o=o+this.B|0,a=a+this.C|0,c=c+this.D|0,u=u+this.E|0,d=d+this.F|0,f=f+this.G|0,p=p+this.H|0,this.set(r,o,a,c,u,d,f,p)}roundClean(){(0,n.uH)(l)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,n.uH)(this.buffer)}}const f=(()=>u.lD(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),p=(()=>f[0])(),g=(()=>f[1])(),y=new Uint32Array(80),m=new Uint32Array(80);class w extends o{constructor(t=64){super(128,t,16,!1),this.Ah=0|c[0],this.Al=0|c[1],this.Bh=0|c[2],this.Bl=0|c[3],this.Ch=0|c[4],this.Cl=0|c[5],this.Dh=0|c[6],this.Dl=0|c[7],this.Eh=0|c[8],this.El=0|c[9],this.Fh=0|c[10],this.Fl=0|c[11],this.Gh=0|c[12],this.Gl=0|c[13],this.Hh=0|c[14],this.Hl=0|c[15]}get(){const{Ah:t,Al:e,Bh:r,Bl:n,Ch:i,Cl:s,Dh:o,Dl:a,Eh:c,El:u,Fh:h,Fl:l,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[t,e,r,n,i,s,o,a,c,u,h,l,d,f,p,g]}set(t,e,r,n,i,s,o,a,c,u,h,l,d,f,p,g){this.Ah=0|t,this.Al=0|e,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|h,this.Fl=0|l,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(t,e){for(let r=0;r<16;r++,e+=4)y[r]=t.getUint32(e),m[r]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|y[t-15],r=0|m[t-15],n=u.rE(e,r,1)^u.rE(e,r,8)^u.xn(e,r,7),i=u.ry(e,r,1)^u.ry(e,r,8)^u.jm(e,r,7),s=0|y[t-2],o=0|m[t-2],a=u.rE(s,o,19)^u.qh(s,o,61)^u.xn(s,o,6),c=u.ry(s,o,19)^u.Ei(s,o,61)^u.jm(s,o,6),h=u.CW(i,c,m[t-7],m[t-16]),l=u.CQ(h,n,a,y[t-7],y[t-16]);y[t]=0|l,m[t]=0|h}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:o,Cl:a,Dh:c,Dl:h,Eh:l,El:d,Fh:f,Fl:w,Gh:b,Gl:v,Hh:_,Hl:k}=this;for(let t=0;t<80;t++){const e=u.rE(l,d,14)^u.rE(l,d,18)^u.qh(l,d,41),S=u.ry(l,d,14)^u.ry(l,d,18)^u.Ei(l,d,41),E=l&f^~l&b,A=d&w^~d&v,I=u.F8(k,S,A,g[t],m[t]),x=u.TH(I,_,e,E,p[t],y[t]),B=0|I,P=u.rE(r,n,28)^u.qh(r,n,34)^u.qh(r,n,39),T=u.ry(r,n,28)^u.Ei(r,n,34)^u.Ei(r,n,39),O=r&i^r&o^i&o,M=n&s^n&a^s&a;_=0|b,k=0|v,b=0|f,v=0|w,f=0|l,w=0|d,({h:l,l:d}=u.WQ(0|c,0|h,0|x,0|B)),c=0|o,h=0|a,o=0|i,a=0|s,i=0|r,s=0|n;const R=u.Vl(B,T,M);r=u.Vr(R,x,P,O),n=0|R}({h:r,l:n}=u.WQ(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:s}=u.WQ(0|this.Bh,0|this.Bl,0|i,0|s)),({h:o,l:a}=u.WQ(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l:h}=u.WQ(0|this.Dh,0|this.Dl,0|c,0|h)),({h:l,l:d}=u.WQ(0|this.Eh,0|this.El,0|l,0|d)),({h:f,l:w}=u.WQ(0|this.Fh,0|this.Fl,0|f,0|w)),({h:b,l:v}=u.WQ(0|this.Gh,0|this.Gl,0|b,0|v)),({h:_,l:k}=u.WQ(0|this.Hh,0|this.Hl,0|_,0|k)),this.set(r,n,i,s,o,a,c,h,l,d,f,w,b,v,_,k)}roundClean(){(0,n.uH)(y,m)}destroy(){(0,n.uH)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const b=(0,n.qj)(()=>new d),v=(0,n.qj)(()=>new w)},526:(t,e)=>{"use strict";e.byteLength=function(t){var e=a(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,s=a(t),o=s[0],c=s[1],u=new i(function(t,e,r){return 3*(e+r)/4-r}(0,o,c)),h=0,l=c>0?o-4:o;for(r=0;r<l;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],u[h++]=e>>16&255,u[h++]=e>>8&255,u[h++]=255&e;return 2===c&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,u[h++]=255&e),1===c&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,u[h++]=e>>8&255,u[h++]=255&e),u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,s=[],o=16383,a=0,c=n-i;a<c;a+=o)s.push(u(t,a,a+o>c?c:a+o));return 1===i?(e=t[n-1],s.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],s.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function u(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),i.push(c(n));return i.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},531:(t,e,r)=>{"use strict";r.d(e,{Vw:()=>A,DO:()=>o,CC:()=>c,sd:()=>a,Fe:()=>s,Ht:()=>u,My:()=>w,uH:()=>l,Id:()=>E,qj:()=>I,O8:()=>d,aT:()=>_,aY:()=>i,po:()=>x,Ow:()=>f,fd:()=>g,ZJ:()=>S,DH:()=>h,AI:()=>k});const n="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function i(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function s(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function o(t,...e){if(!i(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function a(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.createHasher");s(t.outputLen),s(t.blockLen)}function c(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function u(t,e){o(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function h(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function l(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function d(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function f(t,e){return t<<32-e|t>>>e}function p(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const g=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])()?t=>t:function(t){for(let e=0;e<t.length;e++)t[e]=p(t[e]);return t},y=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),m=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function w(t){if(o(t),y)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=m[t[r]];return e}const b={_0:48,_9:57,A:65,F:70,a:97,f:102};function v(t){return t>=b._0&&t<=b._9?t-b._0:t>=b.A&&t<=b.F?t-(b.A-10):t>=b.a&&t<=b.f?t-(b.a-10):void 0}function _(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);if(y)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let e=0,i=0;e<r;e++,i+=2){const r=v(t.charCodeAt(i)),s=v(t.charCodeAt(i+1));if(void 0===r||void 0===s){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}n[e]=16*r+s}return n}function k(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}function S(t){return"string"==typeof t&&(t=k(t)),o(t),t}function E(...t){let e=0;for(let r=0;r<t.length;r++){const n=t[r];o(n),e+=n.length}const r=new Uint8Array(e);for(let e=0,n=0;e<t.length;e++){const i=t[e];r.set(i,n),n+=i.length}return r}class A{}function I(t){const e=e=>t().update(S(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function x(t=32){if(n&&"function"==typeof n.getRandomValues)return n.getRandomValues(new Uint8Array(t));if(n&&"function"==typeof n.randomBytes)return Uint8Array.from(n.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}},601:(t,e,r)=>{"use strict";e.I0=e.DH=e.NX=e.u8=e.cY=void 0,e.av=e.O6=e.w3=e.Wg=void 0;const n=r(287);function i(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function s(t){return i(t),n.Buffer.from(t.buffer,t.byteOffset,t.length)}class o{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}function a(t,e){return e.property?t+"["+e.property+"]":t}class c extends o{isCount(){throw new Error("ExternalLayout is abstract")}}class u extends c{constructor(t,e=0,r){if(!(t instanceof o))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof h||this.layout instanceof l}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}class h extends o{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return s(t).readUIntLE(e,this.span)}encode(t,e,r=0){return s(e).writeUIntLE(t,r,this.span),this.span}}class l extends o{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return s(t).readUIntBE(e,this.span)}encode(t,e,r=0){return s(e).writeUIntBE(t,r,this.span),this.span}}const d=Math.pow(2,32);function f(t){const e=Math.floor(t/d);return{hi32:e,lo32:t-e*d}}function p(t,e){return t*d+e}class g extends o{constructor(t){super(8,t)}decode(t,e=0){const r=s(t),n=r.readUInt32LE(e);return p(r.readUInt32LE(e+4),n)}encode(t,e,r=0){const n=f(t),i=s(e);return i.writeUInt32LE(n.lo32,r),i.writeUInt32LE(n.hi32,r+4),8}}class y extends o{constructor(t){super(8,t)}decode(t,e=0){const r=s(t),n=r.readUInt32LE(e);return p(r.readInt32LE(e+4),n)}encode(t,e,r=0){const n=f(t),i=s(e);return i.writeUInt32LE(n.lo32,r),i.writeInt32LE(n.hi32,r+4),8}}class m extends o{constructor(t,e,r){if(!(t instanceof o))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof c&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(e instanceof c)&&0<t.span&&(n=e*t.span),super(n,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof c&&(n=n.decode(t,e)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;for(;i<n;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){const r=[];let n=0,i=this.count;for(i instanceof c&&(i=i.decode(t,e));n<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),n+=1;return r}encode(t,e,r=0){const n=this.elementLayout,i=t.reduce((t,i)=>t+n.encode(i,e,r+t),0);return this.count instanceof c&&this.count.encode(t.length,e,r),i}}class w extends o{constructor(t,e,r){if(!Array.isArray(t)||!t.reduce((t,e)=>t&&e instanceof o,!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof e&&void 0===r&&(r=e,e=void 0);for(const e of t)if(0>e.span&&void 0===e.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=t.reduce((t,e)=>t+e.getSpan(),0)}catch(t){}super(n,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((r,n)=>{const i=n.getSpan(t,e);return e+=i,r+i},0)}catch(t){throw new RangeError("indeterminate span")}return r}decode(t,e=0){i(t);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(t,e)),e+=n.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const n=r;let i=0,s=0;for(const n of this.fields){let o=n.span;if(s=0<o?o:0,void 0!==n.property){const i=t[n.property];void 0!==i&&(s=n.encode(i,e,r),0>o&&(o=n.getSpan(e,r)))}i=r,r+=o}return i+s-n}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if("string"!=typeof t)throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}class b extends o{constructor(t,e){if(!(t instanceof c&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof c||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),s(t).slice(e,e+r)}encode(t,e,r){let n=this.length;if(this.length instanceof c&&(n=t.length),!(t instanceof Uint8Array&&n===t.length))throw new TypeError(a("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>e.length)throw new RangeError("encoding overruns Uint8Array");const i=s(t);return s(e).write(i.toString("hex"),r,n,"hex"),this.length instanceof c&&this.length.encode(n,e,r),n}}e.cY=(t,e,r)=>new u(t,e,r),e.u8=t=>new h(1,t),e.NX=t=>new h(2,t),e.DH=t=>new h(4,t),e.I0=t=>new g(t),e.Wg=t=>new y(t),e.w3=(t,e,r)=>new w(t,e,r),e.O6=(t,e,r)=>new m(t,e,r),e.av=(t,e)=>new b(t,e)},658:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.map=e.array=e.rustEnum=e.str=e.vecU8=e.tagged=e.vec=e.bool=e.option=e.publicKey=e.i256=e.u256=e.i128=e.u128=e.i64=e.u64=e.struct=e.f64=e.f32=e.i32=e.u32=e.i16=e.u16=e.i8=e.u8=void 0;const i=r(828),s=r(241),o=n(r(404));var a=r(828);Object.defineProperty(e,"u8",{enumerable:!0,get:function(){return a.u8}}),Object.defineProperty(e,"i8",{enumerable:!0,get:function(){return a.s8}}),Object.defineProperty(e,"u16",{enumerable:!0,get:function(){return a.u16}}),Object.defineProperty(e,"i16",{enumerable:!0,get:function(){return a.s16}}),Object.defineProperty(e,"u32",{enumerable:!0,get:function(){return a.u32}}),Object.defineProperty(e,"i32",{enumerable:!0,get:function(){return a.s32}}),Object.defineProperty(e,"f32",{enumerable:!0,get:function(){return a.f32}}),Object.defineProperty(e,"f64",{enumerable:!0,get:function(){return a.f64}}),Object.defineProperty(e,"struct",{enumerable:!0,get:function(){return a.struct}});class c extends i.Layout{constructor(t,e,r){super(t,r),this.blob=(0,i.blob)(t),this.signed=e}decode(t,e=0){const r=new o.default(this.blob.decode(t,e),10,"le");return this.signed?r.fromTwos(8*this.span).clone():r}encode(t,e,r=0){return this.signed&&(t=t.toTwos(8*this.span)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),e,r)}}function u(t){return new c(8,!1,t)}e.u64=u,e.i64=function(t){return new c(8,!0,t)},e.u128=function(t){return new c(16,!1,t)},e.i128=function(t){return new c(16,!0,t)},e.u256=function(t){return new c(32,!1,t)},e.i256=function(t){return new c(32,!0,t)};class h extends i.Layout{constructor(t,e,r,n){super(t.span,n),this.layout=t,this.decoder=e,this.encoder=r}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,r){return this.layout.encode(this.encoder(t),e,r)}getSpan(t,e){return this.layout.getSpan(t,e)}}e.publicKey=function(t){return new h((0,i.blob)(32),t=>new s.PublicKey(t),t=>t.toBuffer(),t)};class l extends i.Layout{constructor(t,e){super(-1,e),this.layout=t,this.discriminator=(0,i.u8)()}encode(t,e,r=0){return null==t?this.discriminator.encode(0,e,r):(this.discriminator.encode(1,e,r),this.layout.encode(t,e,r+1)+1)}decode(t,e=0){const r=this.discriminator.decode(t,e);if(0===r)return null;if(1===r)return this.layout.decode(t,e+1);throw new Error("Invalid option "+this.property)}getSpan(t,e=0){const r=this.discriminator.decode(t,e);if(0===r)return 1;if(1===r)return this.layout.getSpan(t,e+1)+1;throw new Error("Invalid option "+this.property)}}function d(t){if(0===t)return!1;if(1===t)return!0;throw new Error("Invalid bool: "+t)}function f(t){return t?1:0}function p(t){const e=(0,i.u32)("length"),r=(0,i.struct)([e,(0,i.blob)((0,i.offset)(e,-e.span),"data")]);return new h(r,({data:t})=>t,t=>({data:t}),t)}e.option=function(t,e){return new l(t,e)},e.bool=function(t){return new h((0,i.u8)(),d,f,t)},e.vec=function(t,e){const r=(0,i.u32)("length"),n=(0,i.struct)([r,(0,i.seq)(t,(0,i.offset)(r,-r.span),"values")]);return new h(n,({values:t})=>t,t=>({values:t}),e)},e.tagged=function(t,e,r){const n=(0,i.struct)([u("tag"),e.replicate("data")]);return new h(n,function({tag:e,data:r}){if(!e.eq(t))throw new Error("Invalid tag, expected: "+t.toString("hex")+", got: "+e.toString("hex"));return r},e=>({tag:t,data:e}),r)},e.vecU8=p,e.str=function(t){return new h(p(),t=>t.toString("utf-8"),t=>Buffer.from(t,"utf-8"),t)},e.rustEnum=function(t,e,r){const n=(0,i.union)(null!=r?r:(0,i.u8)(),e);return t.forEach((t,e)=>n.addVariant(e,t,t.property)),n},e.array=function(t,e,r){const n=(0,i.struct)([(0,i.seq)(t,e,"values")]);return new h(n,({values:t})=>t,t=>({values:t}),r)};class g extends i.Layout{constructor(t,e,r){super(t.span+e.span,r),this.keyLayout=t,this.valueLayout=e}decode(t,e){return e=e||0,[this.keyLayout.decode(t,e),this.valueLayout.decode(t,e+this.keyLayout.getSpan(t,e))]}encode(t,e,r){r=r||0;const n=this.keyLayout.encode(t[0],e,r);return n+this.valueLayout.encode(t[1],e,r+n)}getSpan(t,e){return this.keyLayout.getSpan(t,e)+this.valueLayout.getSpan(t,e)}}e.map=function(t,e,r){const n=(0,i.u32)("length"),s=(0,i.struct)([n,(0,i.seq)(new g(t,e),(0,i.offset)(n,-n.span),"values")]);return new h(s,({values:t})=>new Map(t),t=>({values:Array.from(t.entries())}),r)}},678:t=>{"use strict";var e=Object.prototype.hasOwnProperty,r="~";function n(){}function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function s(t,e,n,s,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,s||t,o),c=r?r+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function o(t,e){0===--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,n,i=[];if(0===this._eventsCount)return i;for(n in t=this._events)e.call(t,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o},a.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,i,s,o){var a=r?r+t:t;if(!this._events[a])return!1;var c,u,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,i),!0;case 5:return h.fn.call(h.context,e,n,i,s),!0;case 6:return h.fn.call(h.context,e,n,i,s,o),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];h.fn.apply(h.context,c)}else{var d,f=h.length;for(u=0;u<f;u++)switch(h[u].once&&this.removeListener(t,h[u].fn,void 0,!0),l){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,e);break;case 3:h[u].fn.call(h[u].context,e,n);break;case 4:h[u].fn.call(h[u].context,e,n,i);break;default:if(!c)for(d=1,c=new Array(l-1);d<l;d++)c[d-1]=arguments[d];h[u].fn.apply(h[u].context,c)}}return!0},a.prototype.on=function(t,e,r){return s(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return s(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,n,i){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||i&&!a.once||n&&a.context!==n||o(this,s);else{for(var c=0,u=[],h=a.length;c<h;c++)(a[c].fn!==e||i&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[s]=1===u.length?u[0]:u:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&o(this,e)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a},729:t=>{"use strict";const e=/[\p{Lu}]/u,r=/[\p{Ll}]/u,n=/^[\p{Lu}](?![\p{Lu}])/gu,i=/([\p{Alpha}\p{N}_]|$)/u,s=/[_.\- ]+/,o=new RegExp("^"+s.source),a=new RegExp(s.source+i.source,"gu"),c=new RegExp("\\d+"+i.source,"gu"),u=(t,i)=>{if("string"!=typeof t&&!Array.isArray(t))throw new TypeError("Expected the input to be `string | string[]`");if(i={pascalCase:!1,preserveConsecutiveUppercase:!1,...i},0===(t=Array.isArray(t)?t.map(t=>t.trim()).filter(t=>t.length).join("-"):t.trim()).length)return"";const s=!1===i.locale?t=>t.toLowerCase():t=>t.toLocaleLowerCase(i.locale),u=!1===i.locale?t=>t.toUpperCase():t=>t.toLocaleUpperCase(i.locale);return 1===t.length?i.pascalCase?u(t):s(t):(t!==s(t)&&(t=((t,n,i)=>{let s=!1,o=!1,a=!1;for(let c=0;c<t.length;c++){const u=t[c];s&&e.test(u)?(t=t.slice(0,c)+"-"+t.slice(c),s=!1,a=o,o=!0,c++):o&&a&&r.test(u)?(t=t.slice(0,c-1)+"-"+t.slice(c-1),a=o,o=!1,s=!0):(s=n(u)===u&&i(u)!==u,a=o,o=i(u)===u&&n(u)!==u)}return t})(t,s,u)),t=t.replace(o,""),t=i.preserveConsecutiveUppercase?((t,e)=>(n.lastIndex=0,t.replace(n,t=>e(t))))(t,s):s(t),i.pascalCase&&(t=u(t.charAt(0))+t.slice(1)),((t,e)=>(a.lastIndex=0,c.lastIndex=0,t.replace(a,(t,r)=>e(r)).replace(c,t=>e(t))))(t,u))};t.exports=u,t.exports.default=u},755:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__decorate||function(t,e,r,n){var i,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.deserializeUnchecked=e.deserialize=e.serialize=e.BinaryReader=e.BinaryWriter=e.BorshError=e.baseDecode=e.baseEncode=void 0;const c=a(r(404)),u=a(r(763)),h=o(r(281)),l=new("function"!=typeof TextDecoder?h.TextDecoder:TextDecoder)("utf-8",{fatal:!0});e.baseEncode=function(t){return"string"==typeof t&&(t=Buffer.from(t,"utf8")),u.default.encode(Buffer.from(t))},e.baseDecode=function(t){return Buffer.from(u.default.decode(t))};const d=1024;class f extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}e.BorshError=f;class p{constructor(){this.buf=Buffer.alloc(d),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(d)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new c.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new c.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new c.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new c.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(d)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}function g(t,e,r){const n=r.value;r.value=function(...t){try{return n.apply(this,t)}catch(t){if(t instanceof RangeError){const e=t.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(e)>=0)throw new f("Reached the end of buffer when deserializing")}throw t}}}e.BinaryWriter=p;class y{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new c.default(t,"le")}readU128(){const t=this.readBuffer(16);return new c.default(t,"le")}readU256(){const t=this.readBuffer(32);return new c.default(t,"le")}readU512(){const t=this.readBuffer(64);return new c.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new f(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return l.decode(e)}catch(t){throw new f(`Error decoding UTF-8 string: ${t}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let n=0;n<e;++n)r.push(t());return r}}function m(t){return t.charAt(0).toUpperCase()+t.slice(1)}function w(t,e,r,n,i){try{if("string"==typeof n)i[`write${m(n)}`](r);else if(n instanceof Array)if("number"==typeof n[0]){if(r.length!==n[0])throw new f(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(2===n.length&&"number"==typeof n[1]){if(r.length!==n[1])throw new f(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let e=0;e<n[1];e++)w(t,null,r[e],n[0],i)}else i.writeArray(r,r=>{w(t,e,r,n[0],i)});else if(void 0!==n.kind)switch(n.kind){case"option":null==r?i.writeU8(0):(i.writeU8(1),w(t,e,r,n.type,i));break;case"map":i.writeU32(r.size),r.forEach((r,s)=>{w(t,e,s,n.key,i),w(t,e,r,n.value,i)});break;default:throw new f(`FieldType ${n} unrecognized`)}else b(t,r,i)}catch(t){throw t instanceof f&&t.addToFieldPath(e),t}}function b(t,e,r){if("function"==typeof e.borshSerialize)return void e.borshSerialize(r);const n=t.get(e.constructor);if(!n)throw new f(`Class ${e.constructor.name} is missing in schema`);if("struct"===n.kind)n.fields.map(([n,i])=>{w(t,n,e[n],i,r)});else{if("enum"!==n.kind)throw new f(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`);{const i=e[n.field];for(let s=0;s<n.values.length;++s){const[o,a]=n.values[s];if(o===i){r.writeU8(s),w(t,o,e[o],a,r);break}}}}}function v(t,e,r,n){try{if("string"==typeof r)return n[`read${m(r)}`]();if(r instanceof Array){if("number"==typeof r[0])return n.readFixedArray(r[0]);if("number"==typeof r[1]){const e=[];for(let i=0;i<r[1];i++)e.push(v(t,null,r[0],n));return e}return n.readArray(()=>v(t,e,r[0],n))}if("option"===r.kind)return n.readU8()?v(t,e,r.type,n):void 0;if("map"===r.kind){let i=new Map;const s=n.readU32();for(let o=0;o<s;o++){const s=v(t,e,r.key,n),o=v(t,e,r.value,n);i.set(s,o)}return i}return _(t,r,n)}catch(t){throw t instanceof f&&t.addToFieldPath(e),t}}function _(t,e,r){if("function"==typeof e.borshDeserialize)return e.borshDeserialize(r);const n=t.get(e);if(!n)throw new f(`Class ${e.name} is missing in schema`);if("struct"===n.kind){const n={};for(const[i,s]of t.get(e).fields)n[i]=v(t,i,s,r);return new e(n)}if("enum"===n.kind){const i=r.readU8();if(i>=n.values.length)throw new f(`Enum index: ${i} is out of range`);const[s,o]=n.values[i],a=v(t,s,o,r);return new e({[s]:a})}throw new f(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}s([g],y.prototype,"readU8",null),s([g],y.prototype,"readU16",null),s([g],y.prototype,"readU32",null),s([g],y.prototype,"readU64",null),s([g],y.prototype,"readU128",null),s([g],y.prototype,"readU256",null),s([g],y.prototype,"readU512",null),s([g],y.prototype,"readString",null),s([g],y.prototype,"readFixedArray",null),s([g],y.prototype,"readArray",null),e.BinaryReader=y,e.serialize=function(t,e,r=p){const n=new r;return b(t,e,n),n.toArray()},e.deserialize=function(t,e,r,n=y){const i=new n(r),s=_(t,e,i);if(i.offset<r.length)throw new f(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return s},e.deserializeUnchecked=function(t,e,r,n=y){return _(t,e,new n(r))}},763:(t,e,r)=>{var n=r(364);t.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},790:()=>{},828:(t,e)=>{"use strict";class r{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}decode(t,e){throw new Error("Layout is abstract")}encode(t,e,r){throw new Error("Layout is abstract")}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}function n(t,e){return e.property?t+"["+e.property+"]":t}e.Layout=r,e.nameWithProperty=n,e.bindConstructorLayout=function(t,e){if("function"!=typeof t)throw new TypeError("Class must be constructor");if(t.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof r))throw new TypeError("layout must be a Layout");if(e.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value:function(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(t,"decode",{value:function(t,r){return e.decode(t,r)},writable:!0})};class i extends r{isCount(){throw new Error("ExternalLayout is abstract")}}class s extends i{constructor(t,e){if(void 0===t&&(t=1),!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e){void 0===e&&(e=0);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}class o extends i{constructor(t,e,n){if(!(t instanceof r))throw new TypeError("layout must be a Layout");if(void 0===e)e=0;else if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof a||this.layout instanceof c}decode(t,e){return void 0===e&&(e=0),this.layout.decode(t,e+this.offset)}encode(t,e,r){return void 0===r&&(r=0),this.layout.encode(t,e,r+this.offset)}}class a extends r{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return void 0===e&&(e=0),t.readUIntLE(e,this.span)}encode(t,e,r){return void 0===r&&(r=0),e.writeUIntLE(t,r,this.span),this.span}}class c extends r{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return void 0===e&&(e=0),t.readUIntBE(e,this.span)}encode(t,e,r){return void 0===r&&(r=0),e.writeUIntBE(t,r,this.span),this.span}}class u extends r{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return void 0===e&&(e=0),t.readIntLE(e,this.span)}encode(t,e,r){return void 0===r&&(r=0),e.writeIntLE(t,r,this.span),this.span}}class h extends r{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return void 0===e&&(e=0),t.readIntBE(e,this.span)}encode(t,e,r){return void 0===r&&(r=0),e.writeIntBE(t,r,this.span),this.span}}const l=Math.pow(2,32);function d(t){const e=Math.floor(t/l);return{hi32:e,lo32:t-e*l}}function f(t,e){return t*l+e}class p extends r{constructor(t){super(8,t)}decode(t,e){void 0===e&&(e=0);const r=t.readUInt32LE(e);return f(t.readUInt32LE(e+4),r)}encode(t,e,r){void 0===r&&(r=0);const n=d(t);return e.writeUInt32LE(n.lo32,r),e.writeUInt32LE(n.hi32,r+4),8}}class g extends r{constructor(t){super(8,t)}decode(t,e){return void 0===e&&(e=0),f(t.readUInt32BE(e),t.readUInt32BE(e+4))}encode(t,e,r){void 0===r&&(r=0);const n=d(t);return e.writeUInt32BE(n.hi32,r),e.writeUInt32BE(n.lo32,r+4),8}}class y extends r{constructor(t){super(8,t)}decode(t,e){void 0===e&&(e=0);const r=t.readUInt32LE(e);return f(t.readInt32LE(e+4),r)}encode(t,e,r){void 0===r&&(r=0);const n=d(t);return e.writeUInt32LE(n.lo32,r),e.writeInt32LE(n.hi32,r+4),8}}class m extends r{constructor(t){super(8,t)}decode(t,e){return void 0===e&&(e=0),f(t.readInt32BE(e),t.readUInt32BE(e+4))}encode(t,e,r){void 0===r&&(r=0);const n=d(t);return e.writeInt32BE(n.hi32,r),e.writeUInt32BE(n.lo32,r+4),8}}class w extends r{constructor(t){super(4,t)}decode(t,e){return void 0===e&&(e=0),t.readFloatLE(e)}encode(t,e,r){return void 0===r&&(r=0),e.writeFloatLE(t,r),4}}class b extends r{constructor(t){super(4,t)}decode(t,e){return void 0===e&&(e=0),t.readFloatBE(e)}encode(t,e,r){return void 0===r&&(r=0),e.writeFloatBE(t,r),4}}class v extends r{constructor(t){super(8,t)}decode(t,e){return void 0===e&&(e=0),t.readDoubleLE(e)}encode(t,e,r){return void 0===r&&(r=0),e.writeDoubleLE(t,r),8}}class _ extends r{constructor(t){super(8,t)}decode(t,e){return void 0===e&&(e=0),t.readDoubleBE(e)}encode(t,e,r){return void 0===r&&(r=0),e.writeDoubleBE(t,r),8}}class k extends r{constructor(t,e,n){if(!(t instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof i&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(e instanceof i)&&0<t.span&&(s=e*t.span),super(s,n),this.elementLayout=t,this.count=e}getSpan(t,e){if(0<=this.span)return this.span;void 0===e&&(e=0);let r=0,n=this.count;if(n instanceof i&&(n=n.decode(t,e)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;for(;i<n;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e){void 0===e&&(e=0);const r=[];let n=0,s=this.count;for(s instanceof i&&(s=s.decode(t,e));n<s;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),n+=1;return r}encode(t,e,r){void 0===r&&(r=0);const n=this.elementLayout,s=t.reduce((t,i)=>t+n.encode(i,e,r+t),0);return this.count instanceof i&&this.count.encode(t.length,e,r),s}}class S extends r{constructor(t,e,n){if(!Array.isArray(t)||!t.reduce((t,e)=>t&&e instanceof r,!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof e&&void 0===n&&(n=e,e=void 0);for(const e of t)if(0>e.span&&void 0===e.property)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=t.reduce((t,e)=>t+e.getSpan(),0)}catch(t){}super(i,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e){if(0<=this.span)return this.span;void 0===e&&(e=0);let r=0;try{r=this.fields.reduce((r,n)=>{const i=n.getSpan(t,e);return e+=i,r+i},0)}catch(t){throw new RangeError("indeterminate span")}return r}decode(t,e){void 0===e&&(e=0);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(t,e)),e+=n.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r){void 0===r&&(r=0);const n=r;let i=0,s=0;for(const n of this.fields){let o=n.span;if(s=0<o?o:0,void 0!==n.property){const i=t[n.property];void 0!==i&&(s=n.encode(i,e,r),0>o&&(o=n.getSpan(e,r)))}i=r,r+=o}return i+s-n}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if("string"!=typeof t)throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}class E{constructor(t){this.property=t}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class A extends E{constructor(t,e){if(!(t instanceof i&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}class I extends r{constructor(t,e,n){const s=t instanceof a||t instanceof c;if(s)t=new A(new o(t));else if(t instanceof i&&t.isCount())t=new A(t);else if(!(t instanceof E))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===e&&(e=null),!(null===e||e instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(null!==e){if(0>e.span)throw new Error("defaultLayout must have constant span");void 0===e.property&&(e=e.replicate("content"))}let u=-1;e&&(u=e.span,0<=u&&s&&(u+=t.layout.span)),super(u,n),this.discriminator=t,this.usesPrefixDiscriminator=s,this.defaultLayout=e,this.registry={};let h=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(t){return h(t)},this.configGetSourceVariant=function(t){h=t.bind(this)}}getSpan(t,e){if(0<=this.span)return this.span;void 0===e&&(e=0);const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(t.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&t.hasOwnProperty(this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||t.hasOwnProperty(e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(t.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(t,e){let r;void 0===e&&(e=0);const n=this.discriminator,i=n.decode(t,e);let s=this.registry[i];if(void 0===s){let o=0;s=this.defaultLayout,this.usesPrefixDiscriminator&&(o=n.layout.span),r=this.makeDestinationObject(),r[n.property]=i,r[s.property]=this.defaultLayout.decode(t,e+o)}else r=s.decode(t,e);return r}encode(t,e,r){void 0===r&&(r=0);const n=this.getSourceVariant(t);if(void 0===n){const n=this.discriminator,i=this.defaultLayout;let s=0;return this.usesPrefixDiscriminator&&(s=n.layout.span),n.encode(t[n.property],e,r),s+i.encode(t[i.property],e,r+s)}return n.encode(t,e,r)}addVariant(t,e,r){const n=new x(this,t,e,r);return this.registry[t]=n,n}getVariant(t,e){let r=t;return Buffer.isBuffer(t)&&(void 0===e&&(e=0),r=this.discriminator.decode(t,e)),this.registry[r]}}class x extends r{constructor(t,e,n,i){if(!(t instanceof I))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof n&&void 0===i&&(i=n,n=null),n){if(!(n instanceof r))throw new TypeError("layout must be a Layout");if(null!==t.defaultLayout&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof i)throw new TypeError("variant must have a String property")}let s=t.span;0>t.span&&(s=n?n.span:0,0<=s&&t.usesPrefixDiscriminator&&(s+=t.discriminator.layout.span)),super(s,i),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e){if(0<=this.span)return this.span;void 0===e&&(e=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(t,e+r)}decode(t,e){const r=this.makeDestinationObject();if(void 0===e&&(e=0),this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r){void 0===r&&(r=0);let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!t.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=n;if(this.layout&&(this.layout.encode(t[this.property],e,r+n),i+=this.layout.getSpan(e,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}function B(t){return 0>t&&(t+=4294967296),t}class P extends r{constructor(t,e,r){if(!(t instanceof a||t instanceof c))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof e&&void 0===r&&(r=e,e=void 0),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let n=0;this._packedSetValue=function(t){return n=B(t),this},this._packedGetValue=function(){return n}}decode(t,e){const r=this.makeDestinationObject();void 0===e&&(e=0);const n=this.word.decode(t,e);this._packedSetValue(n);for(const t of this.fields)void 0!==t.property&&(r[t.property]=t.decode(n));return r}encode(t,e,r){void 0===r&&(r=0);const n=this.word.decode(e,r);this._packedSetValue(n);for(const e of this.fields)if(void 0!==e.property){const r=t[e.property];void 0!==r&&e.encode(r)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new T(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new O(this,t);return this.fields.push(e),e}fieldFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}class T{constructor(t,e,r){if(!(t instanceof P))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const n=8*t.span,i=t.fields.reduce((t,e)=>t+e.bits,0);if(e+i>n)throw new Error("bits too long for span remainder ("+(n-i)+" of "+n+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,32===e&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=n-i-e),this.wordMask=B(this.valueMask<<this.start),this.property=r}decode(){return B(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(t){if(!Number.isInteger(t)||t!==B(t&this.valueMask))throw new TypeError(n("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=B(t<<this.start);this.container._packedSetValue(B(e&~this.wordMask)|r)}}class O extends T{constructor(t,e){super(t,1,e)}decode(t,e){return!!T.prototype.decode.call(this,t,e)}encode(t){return"boolean"==typeof t&&(t=+t),T.prototype.encode.call(this,t)}}class M extends r{constructor(t,e){if(!(t instanceof i&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof i||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e){void 0===e&&(e=0);let r=this.span;return 0>r&&(r=this.length.decode(t,e)),t.slice(e,e+r)}encode(t,e,r){let s=this.length;if(this.length instanceof i&&(s=t.length),!Buffer.isBuffer(t)||s!==t.length)throw new TypeError(n("Blob.encode",this)+" requires (length "+s+") Buffer as src");if(r+s>e.length)throw new RangeError("encoding overruns Buffer");return e.write(t.toString("hex"),r,s,"hex"),this.length instanceof i&&this.length.encode(s,e,r),s}}class R extends r{constructor(t){super(-1,t)}getSpan(t,e){if(!Buffer.isBuffer(t))throw new TypeError("b must be a Buffer");void 0===e&&(e=0);let r=e;for(;r<t.length&&0!==t[r];)r+=1;return 1+r-e}decode(t,e,r){void 0===e&&(e=0);let n=this.getSpan(t,e);return t.slice(e,e+n-1).toString("utf-8")}encode(t,e,r){void 0===r&&(r=0),"string"!=typeof t&&(t=t.toString());const n=new Buffer(t,"utf8"),i=n.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return n.copy(e,r),e[r+i]=0,i+1}}class L extends r{constructor(t,e){if("string"==typeof t&&void 0===e&&(e=t,t=void 0),void 0===t)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e){if(!Buffer.isBuffer(t))throw new TypeError("b must be a Buffer");return void 0===e&&(e=0),t.length-e}decode(t,e,r){void 0===e&&(e=0);let n=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return t.slice(e,e+n).toString("utf-8")}encode(t,e,r){void 0===r&&(r=0),"string"!=typeof t&&(t=t.toString());const n=new Buffer(t,"utf8"),i=n.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return n.copy(e,r),i}}class C extends r{constructor(t,e){super(0,e),this.value=t}decode(t,e,r){return this.value}encode(t,e,r){return 0}}e.ExternalLayout=i,e.GreedyCount=s,e.OffsetLayout=o,e.UInt=a,e.UIntBE=c,e.Int=u,e.IntBE=h,e.Float=w,e.FloatBE=b,e.Double=v,e.DoubleBE=_,e.Sequence=k,e.Structure=S,e.UnionDiscriminator=E,e.UnionLayoutDiscriminator=A,e.Union=I,e.VariantLayout=x,e.BitStructure=P,e.BitField=T,e.Boolean=O,e.Blob=M,e.CString=R,e.UTF8=L,e.Constant=C,e.greedy=(t,e)=>new s(t,e),e.offset=(t,e,r)=>new o(t,e,r),e.u8=t=>new a(1,t),e.u16=t=>new a(2,t),e.u24=t=>new a(3,t),e.u32=t=>new a(4,t),e.u40=t=>new a(5,t),e.u48=t=>new a(6,t),e.nu64=t=>new p(t),e.u16be=t=>new c(2,t),e.u24be=t=>new c(3,t),e.u32be=t=>new c(4,t),e.u40be=t=>new c(5,t),e.u48be=t=>new c(6,t),e.nu64be=t=>new g(t),e.s8=t=>new u(1,t),e.s16=t=>new u(2,t),e.s24=t=>new u(3,t),e.s32=t=>new u(4,t),e.s40=t=>new u(5,t),e.s48=t=>new u(6,t),e.ns64=t=>new y(t),e.s16be=t=>new h(2,t),e.s24be=t=>new h(3,t),e.s32be=t=>new h(4,t),e.s40be=t=>new h(5,t),e.s48be=t=>new h(6,t),e.ns64be=t=>new m(t),e.f32=t=>new w(t),e.f32be=t=>new b(t),e.f64=t=>new v(t),e.f64be=t=>new _(t),e.struct=(t,e,r)=>new S(t,e,r),e.bits=(t,e,r)=>new P(t,e,r),e.seq=(t,e,r)=>new k(t,e,r),e.union=(t,e,r)=>new I(t,e,r),e.unionLayoutDiscriminator=(t,e)=>new A(t,e),e.blob=(t,e)=>new M(t,e),e.cstr=t=>new R(t),e.utf8=(t,e)=>new L(t,e),e.const=(t,e)=>new C(t,e)},861:(t,e,r)=>{var n=r(287),i=n.Buffer;function s(t,e){for(var r in t)e[r]=t[r]}function o(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=o),o.prototype=Object.create(i.prototype),s(i,o),o.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},o.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t=r(241),e=r(287),n=r(404),i=r.n(n),s=r(763),o=r.n(s),a=r(729),c=r.n(a),u=r(658),h=r(226);function l(t){let e=t.length;for(;--e>=0;)t[e]=0}const d=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),f=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),p=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),g=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),y=new Array(576);l(y);const m=new Array(60);l(m);const w=new Array(512);l(w);const b=new Array(256);l(b);const v=new Array(29);l(v);const _=new Array(30);function k(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}let S,E,A;function I(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}l(_);const x=t=>t<256?w[t]:w[256+(t>>>7)],B=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},P=(t,e,r)=>{t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,B(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},T=(t,e,r)=>{P(t,r[2*e],r[2*e+1])},O=(t,e)=>{let r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1},M=(t,e,r)=>{const n=new Array(16);let i,s,o=0;for(i=1;i<=15;i++)o=o+r[i-1]<<1,n[i]=o;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=O(n[e]++,e))}},R=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},L=t=>{t.bi_valid>8?B(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},C=(t,e,r,n)=>{const i=2*e,s=2*r;return t[i]<t[s]||t[i]===t[s]&&n[e]<=n[r]},U=(t,e,r)=>{const n=t.heap[r];let i=r<<1;for(;i<=t.heap_len&&(i<t.heap_len&&C(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!C(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n},z=(t,e,r)=>{let n,i,s,o,a=0;if(0!==t.sym_next)do{n=255&t.pending_buf[t.sym_buf+a++],n+=(255&t.pending_buf[t.sym_buf+a++])<<8,i=t.pending_buf[t.sym_buf+a++],0===n?T(t,i,e):(s=b[i],T(t,s+256+1,e),o=d[s],0!==o&&(i-=v[s],P(t,i,o)),n--,s=x(n),T(t,s,r),o=f[s],0!==o&&(n-=_[s],P(t,n,o)))}while(a<t.sym_next);T(t,256,e)},N=(t,e)=>{const r=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems;let o,a,c,u=-1;for(t.heap_len=0,t.heap_max=573,o=0;o<s;o++)0!==r[2*o]?(t.heap[++t.heap_len]=u=o,t.depth[o]=0):r[2*o+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=u<2?++u:0,r[2*c]=1,t.depth[c]=0,t.opt_len--,i&&(t.static_len-=n[2*c+1]);for(e.max_code=u,o=t.heap_len>>1;o>=1;o--)U(t,r,o);c=s;do{o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],U(t,r,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,r[2*c]=r[2*o]+r[2*a],t.depth[c]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,r[2*o+1]=r[2*a+1]=c,t.heap[1]=c++,U(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const r=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,c=e.stat_desc.max_length;let u,h,l,d,f,p,g=0;for(d=0;d<=15;d++)t.bl_count[d]=0;for(r[2*t.heap[t.heap_max]+1]=0,u=t.heap_max+1;u<573;u++)h=t.heap[u],d=r[2*r[2*h+1]+1]+1,d>c&&(d=c,g++),r[2*h+1]=d,h>n||(t.bl_count[d]++,f=0,h>=a&&(f=o[h-a]),p=r[2*h],t.opt_len+=p*(d+f),s&&(t.static_len+=p*(i[2*h+1]+f)));if(0!==g){do{for(d=c-1;0===t.bl_count[d];)d--;t.bl_count[d]--,t.bl_count[d+1]+=2,t.bl_count[c]--,g-=2}while(g>0);for(d=c;0!==d;d--)for(h=t.bl_count[d];0!==h;)l=t.heap[--u],l>n||(r[2*l+1]!==d&&(t.opt_len+=(d-r[2*l+1])*r[2*l],r[2*l+1]=d),h--)}})(t,e),M(r,u,t.bl_count)},K=(t,e,r)=>{let n,i,s=-1,o=e[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=e[2*(n+1)+1],++a<c&&i===o||(a<u?t.bl_tree[2*i]+=a:0!==i?(i!==s&&t.bl_tree[2*i]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,s=i,0===o?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4))},D=(t,e,r)=>{let n,i,s=-1,o=e[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),n=0;n<=r;n++)if(i=o,o=e[2*(n+1)+1],!(++a<c&&i===o)){if(a<u)do{T(t,i,t.bl_tree)}while(0!==--a);else 0!==i?(i!==s&&(T(t,i,t.bl_tree),a--),T(t,16,t.bl_tree),P(t,a-3,2)):a<=10?(T(t,17,t.bl_tree),P(t,a-3,3)):(T(t,18,t.bl_tree),P(t,a-11,7));a=0,s=i,0===o?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4)}};let W=!1;const F=(t,e,r,n)=>{P(t,0+(n?1:0),3),L(t),B(t,r),B(t,~r),r&&t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r};var H={_tr_init:t=>{W||((()=>{let t,e,r,n,i;const s=new Array(16);for(r=0,n=0;n<28;n++)for(v[n]=r,t=0;t<1<<d[n];t++)b[r++]=n;for(b[r-1]=n,i=0,n=0;n<16;n++)for(_[n]=i,t=0;t<1<<f[n];t++)w[i++]=n;for(i>>=7;n<30;n++)for(_[n]=i<<7,t=0;t<1<<f[n]-7;t++)w[256+i++]=n;for(e=0;e<=15;e++)s[e]=0;for(t=0;t<=143;)y[2*t+1]=8,t++,s[8]++;for(;t<=255;)y[2*t+1]=9,t++,s[9]++;for(;t<=279;)y[2*t+1]=7,t++,s[7]++;for(;t<=287;)y[2*t+1]=8,t++,s[8]++;for(M(y,287,s),t=0;t<30;t++)m[2*t+1]=5,m[2*t]=O(t,5);S=new k(y,d,257,286,15),E=new k(m,f,0,30,15),A=new k(new Array(0),p,0,19,7)})(),W=!0),t.l_desc=new I(t.dyn_ltree,S),t.d_desc=new I(t.dyn_dtree,E),t.bl_desc=new I(t.bl_tree,A),t.bi_buf=0,t.bi_valid=0,R(t)},_tr_stored_block:F,_tr_flush_block:(t,e,r,n)=>{let i,s,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),N(t,t.l_desc),N(t,t.d_desc),o=(t=>{let e;for(K(t,t.dyn_ltree,t.l_desc.max_code),K(t,t.dyn_dtree,t.d_desc.max_code),N(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*g[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),i=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==e?F(t,e,r,n):4===t.strategy||s===i?(P(t,2+(n?1:0),3),z(t,y,m)):(P(t,4+(n?1:0),3),((t,e,r,n)=>{let i;for(P(t,e-257,5),P(t,r-1,5),P(t,n-4,4),i=0;i<n;i++)P(t,t.bl_tree[2*g[i]+1],3);D(t,t.dyn_ltree,e-1),D(t,t.dyn_dtree,r-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),z(t,t.dyn_ltree,t.dyn_dtree)),R(t),n&&L(t)},_tr_tally:(t,e,r)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=r,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(b[r]+256+1)]++,t.dyn_dtree[2*x(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{P(t,2,3),T(t,256,y),(t=>{16===t.bi_valid?(B(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},q=(t,e,r,n)=>{let i=65535&t,s=t>>>16&65535,o=0;for(;0!==r;){o=r>2e3?2e3:r,r-=o;do{i=i+e[n++]|0,s=s+i|0}while(--o);i%=65521,s%=65521}return i|s<<16};const j=new Uint32Array((()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e})());var V=(t,e,r,n)=>{const i=j,s=n+r;t^=-1;for(let r=n;r<s;r++)t=t>>>8^i[255&(t^e[r])];return-1^t},$={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Z={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:G,_tr_stored_block:Y,_tr_flush_block:J,_tr_tally:X,_tr_align:Q}=H,{Z_NO_FLUSH:tt,Z_PARTIAL_FLUSH:et,Z_FULL_FLUSH:rt,Z_FINISH:nt,Z_BLOCK:it,Z_OK:st,Z_STREAM_END:ot,Z_STREAM_ERROR:at,Z_DATA_ERROR:ct,Z_BUF_ERROR:ut,Z_DEFAULT_COMPRESSION:ht,Z_FILTERED:lt,Z_HUFFMAN_ONLY:dt,Z_RLE:ft,Z_FIXED:pt,Z_DEFAULT_STRATEGY:gt,Z_UNKNOWN:yt,Z_DEFLATED:mt}=Z,wt=258,bt=262,vt=42,_t=113,kt=666,St=(t,e)=>(t.msg=$[e],e),Et=t=>2*t-(t>4?9:0),At=t=>{let e=t.length;for(;--e>=0;)t[e]=0},It=t=>{let e,r,n,i=t.w_size;e=t.hash_size,n=e;do{r=t.head[--n],t.head[n]=r>=i?r-i:0}while(--e);e=i,n=e;do{r=t.prev[--n],t.prev[n]=r>=i?r-i:0}while(--e)};let xt=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask;const Bt=t=>{const e=t.state;let r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))},Pt=(t,e)=>{J(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Bt(t.strm)},Tt=(t,e)=>{t.pending_buf[t.pending++]=e},Ot=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Mt=(t,e,r,n)=>{let i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),r),1===t.state.wrap?t.adler=q(t.adler,e,i,r):2===t.state.wrap&&(t.adler=V(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)},Rt=(t,e)=>{let r,n,i=t.max_chain_length,s=t.strstart,o=t.prev_length,a=t.nice_match;const c=t.strstart>t.w_size-bt?t.strstart-(t.w_size-bt):0,u=t.window,h=t.w_mask,l=t.prev,d=t.strstart+wt;let f=u[s+o-1],p=u[s+o];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(r=e,u[r+o]===p&&u[r+o-1]===f&&u[r]===u[s]&&u[++r]===u[s+1]){s+=2,r++;do{}while(u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&s<d);if(n=wt-(d-s),s=d-wt,n>o){if(t.match_start=e,o=n,n>=a)break;f=u[s+o-1],p=u[s+o]}}}while((e=l[e&h])>c&&0!==--i);return o<=t.lookahead?o:t.lookahead},Lt=t=>{const e=t.w_size;let r,n,i;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-bt)&&(t.window.set(t.window.subarray(e,e+e-n),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),It(t),n+=e),0===t.strm.avail_in)break;if(r=Mt(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=r,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=xt(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=xt(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<bt&&0!==t.strm.avail_in)},Ct=(t,e)=>{let r,n,i,s=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,o=0,a=t.strm.avail_in;do{if(r=65535,i=t.bi_valid+42>>3,t.strm.avail_out<i)break;if(i=t.strm.avail_out-i,n=t.strstart-t.block_start,r>n+t.strm.avail_in&&(r=n+t.strm.avail_in),r>i&&(r=i),r<s&&(0===r&&e!==nt||e===tt||r!==n+t.strm.avail_in))break;o=e===nt&&r===n+t.strm.avail_in?1:0,Y(t,0,0,o),t.pending_buf[t.pending-4]=r,t.pending_buf[t.pending-3]=r>>8,t.pending_buf[t.pending-2]=~r,t.pending_buf[t.pending-1]=~r>>8,Bt(t.strm),n&&(n>r&&(n=r),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+n),t.strm.next_out),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n,t.block_start+=n,r-=n),r&&(Mt(t.strm,t.strm.output,t.strm.next_out,r),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r)}while(0===o);return a-=t.strm.avail_in,a&&(a>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=a&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-a,t.strm.next_in),t.strstart),t.strstart+=a,t.insert+=a>t.w_size-t.insert?t.w_size-t.insert:a),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?4:e!==tt&&e!==nt&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(i=t.window_size-t.strstart,t.strm.avail_in>i&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,i+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),i>t.strm.avail_in&&(i=t.strm.avail_in),i&&(Mt(t.strm,t.window,t.strstart,i),t.strstart+=i,t.insert+=i>t.w_size-t.insert?t.w_size-t.insert:i),t.high_water<t.strstart&&(t.high_water=t.strstart),i=t.bi_valid+42>>3,i=t.pending_buf_size-i>65535?65535:t.pending_buf_size-i,s=i>t.w_size?t.w_size:i,n=t.strstart-t.block_start,(n>=s||(n||e===nt)&&e!==tt&&0===t.strm.avail_in&&n<=i)&&(r=n>i?i:n,o=e===nt&&0===t.strm.avail_in&&r===n?1:0,Y(t,t.block_start,r,o),t.block_start+=r,Bt(t.strm)),o?3:1)},Ut=(t,e)=>{let r,n;for(;;){if(t.lookahead<bt){if(Lt(t),t.lookahead<bt&&e===tt)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=xt(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-bt&&(t.match_length=Rt(t,r)),t.match_length>=3)if(n=X(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=xt(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=xt(t,t.ins_h,t.window[t.strstart+1]);else n=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Pt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===nt?(Pt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Pt(t,!1),0===t.strm.avail_out)?1:2},zt=(t,e)=>{let r,n,i;for(;;){if(t.lookahead<bt){if(Lt(t),t.lookahead<bt&&e===tt)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=xt(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-bt&&(t.match_length=Rt(t,r),t.match_length<=5&&(t.strategy===lt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,n=X(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=xt(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!==--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(Pt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(n=X(t,0,t.window[t.strstart-1]),n&&Pt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=X(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===nt?(Pt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Pt(t,!1),0===t.strm.avail_out)?1:2};function Nt(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}const Kt=[new Nt(0,0,0,0,Ct),new Nt(4,4,8,4,Ut),new Nt(4,5,16,8,Ut),new Nt(4,6,32,32,Ut),new Nt(4,4,16,16,zt),new Nt(8,16,32,32,zt),new Nt(8,16,128,128,zt),new Nt(8,32,128,256,zt),new Nt(32,128,258,1024,zt),new Nt(32,258,258,4096,zt)];function Dt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=mt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),At(this.dyn_ltree),At(this.dyn_dtree),At(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),At(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),At(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Wt=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==vt&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==_t&&e.status!==kt?1:0},Ft=t=>{if(Wt(t))return St(t,at);t.total_in=t.total_out=0,t.data_type=yt;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?vt:_t,t.adler=2===e.wrap?0:1,e.last_flush=-2,G(e),st},Ht=t=>{const e=Ft(t);var r;return e===st&&((r=t.state).window_size=2*r.w_size,At(r.head),r.max_lazy_match=Kt[r.level].max_lazy,r.good_match=Kt[r.level].good_length,r.nice_match=Kt[r.level].nice_length,r.max_chain_length=Kt[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),e},qt=(t,e,r,n,i,s)=>{if(!t)return at;let o=1;if(e===ht&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>9||r!==mt||n<8||n>15||e<0||e>9||s<0||s>pt||8===n&&1!==o)return St(t,at);8===n&&(n=9);const a=new Dt;return t.state=a,a.strm=t,a.status=vt,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=e,a.strategy=s,a.method=r,Ht(t)};var jt=qt,Vt=(t,e)=>Wt(t)||2!==t.state.wrap?at:(t.state.gzhead=e,st),$t=(t,e)=>{if(Wt(t)||e>it||e<0)return t?St(t,at):at;const r=t.state;if(!t.output||0!==t.avail_in&&!t.input||r.status===kt&&e!==nt)return St(t,0===t.avail_out?ut:at);const n=r.last_flush;if(r.last_flush=e,0!==r.pending){if(Bt(t),0===t.avail_out)return r.last_flush=-1,st}else if(0===t.avail_in&&Et(e)<=Et(n)&&e!==nt)return St(t,ut);if(r.status===kt&&0!==t.avail_in)return St(t,ut);if(r.status===vt&&0===r.wrap&&(r.status=_t),r.status===vt){let e=mt+(r.w_bits-8<<4)<<8,n=-1;if(n=r.strategy>=dt||r.level<2?0:r.level<6?1:6===r.level?2:3,e|=n<<6,0!==r.strstart&&(e|=32),e+=31-e%31,Ot(r,e),0!==r.strstart&&(Ot(r,t.adler>>>16),Ot(r,65535&t.adler)),t.adler=1,r.status=_t,Bt(t),0!==r.pending)return r.last_flush=-1,st}if(57===r.status)if(t.adler=0,Tt(r,31),Tt(r,139),Tt(r,8),r.gzhead)Tt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Tt(r,255&r.gzhead.time),Tt(r,r.gzhead.time>>8&255),Tt(r,r.gzhead.time>>16&255),Tt(r,r.gzhead.time>>24&255),Tt(r,9===r.level?2:r.strategy>=dt||r.level<2?4:0),Tt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Tt(r,255&r.gzhead.extra.length),Tt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=V(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(Tt(r,0),Tt(r,0),Tt(r,0),Tt(r,0),Tt(r,0),Tt(r,9===r.level?2:r.strategy>=dt||r.level<2?4:0),Tt(r,3),r.status=_t,Bt(t),0!==r.pending)return r.last_flush=-1,st;if(69===r.status){if(r.gzhead.extra){let e=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let i=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>e&&(t.adler=V(t.adler,r.pending_buf,r.pending-e,e)),r.gzindex+=i,Bt(t),0!==r.pending)return r.last_flush=-1,st;e=0,n-=i}let i=new Uint8Array(r.gzhead.extra);r.pending_buf.set(i.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>e&&(t.adler=V(t.adler,r.pending_buf,r.pending-e,e)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let e,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(t.adler=V(t.adler,r.pending_buf,r.pending-n,n)),Bt(t),0!==r.pending)return r.last_flush=-1,st;n=0}e=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Tt(r,e)}while(0!==e);r.gzhead.hcrc&&r.pending>n&&(t.adler=V(t.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let e,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(t.adler=V(t.adler,r.pending_buf,r.pending-n,n)),Bt(t),0!==r.pending)return r.last_flush=-1,st;n=0}e=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Tt(r,e)}while(0!==e);r.gzhead.hcrc&&r.pending>n&&(t.adler=V(t.adler,r.pending_buf,r.pending-n,n))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(Bt(t),0!==r.pending))return r.last_flush=-1,st;Tt(r,255&t.adler),Tt(r,t.adler>>8&255),t.adler=0}if(r.status=_t,Bt(t),0!==r.pending)return r.last_flush=-1,st}if(0!==t.avail_in||0!==r.lookahead||e!==tt&&r.status!==kt){let n=0===r.level?Ct(r,e):r.strategy===dt?((t,e)=>{let r;for(;;){if(0===t.lookahead&&(Lt(t),0===t.lookahead)){if(e===tt)return 1;break}if(t.match_length=0,r=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(Pt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===nt?(Pt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Pt(t,!1),0===t.strm.avail_out)?1:2})(r,e):r.strategy===ft?((t,e)=>{let r,n,i,s;const o=t.window;for(;;){if(t.lookahead<=wt){if(Lt(t),t.lookahead<=wt&&e===tt)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=t.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){s=t.strstart+wt;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s);t.match_length=wt-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=X(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(Pt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===nt?(Pt(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Pt(t,!1),0===t.strm.avail_out)?1:2})(r,e):Kt[r.level].func(r,e);if(3!==n&&4!==n||(r.status=kt),1===n||3===n)return 0===t.avail_out&&(r.last_flush=-1),st;if(2===n&&(e===et?Q(r):e!==it&&(Y(r,0,0,!1),e===rt&&(At(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),Bt(t),0===t.avail_out))return r.last_flush=-1,st}return e!==nt?st:r.wrap<=0?ot:(2===r.wrap?(Tt(r,255&t.adler),Tt(r,t.adler>>8&255),Tt(r,t.adler>>16&255),Tt(r,t.adler>>24&255),Tt(r,255&t.total_in),Tt(r,t.total_in>>8&255),Tt(r,t.total_in>>16&255),Tt(r,t.total_in>>24&255)):(Ot(r,t.adler>>>16),Ot(r,65535&t.adler)),Bt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?st:ot)},Zt=t=>{if(Wt(t))return at;const e=t.state.status;return t.state=null,e===_t?St(t,ct):st},Gt=(t,e)=>{let r=e.length;if(Wt(t))return at;const n=t.state,i=n.wrap;if(2===i||1===i&&n.status!==vt||n.lookahead)return at;if(1===i&&(t.adler=q(t.adler,e,r,0)),n.wrap=0,r>=n.w_size){0===i&&(At(n.head),n.strstart=0,n.block_start=0,n.insert=0);let t=new Uint8Array(n.w_size);t.set(e.subarray(r-n.w_size,r),0),e=t,r=n.w_size}const s=t.avail_in,o=t.next_in,a=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,Lt(n);n.lookahead>=3;){let t=n.strstart,e=n.lookahead-2;do{n.ins_h=xt(n,n.ins_h,n.window[t+3-1]),n.prev[t&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=t,t++}while(--e);n.strstart=t,n.lookahead=2,Lt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=o,t.input=a,t.avail_in=s,n.wrap=i,st};const Yt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Jt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const e in r)Yt(r,e)&&(t[e]=r[e])}}return t},Xt=t=>{let e=0;for(let r=0,n=t.length;r<n;r++)e+=t[r].length;const r=new Uint8Array(e);for(let e=0,n=0,i=t.length;e<i;e++){let i=t[e];r.set(i,n),n+=i.length}return r};let Qt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Qt=!1}const te=new Uint8Array(256);for(let t=0;t<256;t++)te[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;te[254]=te[254]=1;var ee=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,r,n,i,s,o=t.length,a=0;for(i=0;i<o;i++)r=t.charCodeAt(i),55296==(64512&r)&&i+1<o&&(n=t.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(a),s=0,i=0;s<a;i++)r=t.charCodeAt(i),55296==(64512&r)&&i+1<o&&(n=t.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|63&r):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|63&r):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|63&r);return e},re=(t,e)=>{const r=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let n,i;const s=new Array(2*r);for(i=0,n=0;n<r;){let e=t[n++];if(e<128){s[i++]=e;continue}let o=te[e];if(o>4)s[i++]=65533,n+=o-1;else{for(e&=2===o?31:3===o?15:7;o>1&&n<r;)e=e<<6|63&t[n++],o--;o>1?s[i++]=65533:e<65536?s[i++]=e:(e-=65536,s[i++]=55296|e>>10&1023,s[i++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Qt)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r})(s,i)},ne=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let r=e-1;for(;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+te[t[r]]>e?r:e},ie=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const se=Object.prototype.toString,{Z_NO_FLUSH:oe,Z_SYNC_FLUSH:ae,Z_FULL_FLUSH:ce,Z_FINISH:ue,Z_OK:he,Z_STREAM_END:le,Z_DEFAULT_COMPRESSION:de,Z_DEFAULT_STRATEGY:fe,Z_DEFLATED:pe}=Z;function ge(t){this.options=Jt({level:de,method:pe,chunkSize:16384,windowBits:15,memLevel:8,strategy:fe},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ie,this.strm.avail_out=0;let r=jt(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==he)throw new Error($[r]);if(e.header&&Vt(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?ee(e.dictionary):"[object ArrayBuffer]"===se.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,r=Gt(this.strm,t),r!==he)throw new Error($[r]);this._dict_set=!0}}function ye(t,e){const r=new ge(e);if(r.push(t,!0),r.err)throw r.msg||$[r.err];return r.result}ge.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize;let i,s;if(this.ended)return!1;for(s=e===~~e?e:!0===e?ue:oe,"string"==typeof t?r.input=ee(t):"[object ArrayBuffer]"===se.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(s===ae||s===ce)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=$t(r,s),i===le)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=Zt(this.strm),this.onEnd(i),this.ended=!0,i===he;if(0!==r.avail_out){if(s>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},ge.prototype.onData=function(t){this.chunks.push(t)},ge.prototype.onEnd=function(t){t===he&&(this.result=Xt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var me={Deflate:ge,deflate:ye,deflateRaw:function(t,e){return(e=e||{}).raw=!0,ye(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,ye(t,e)},constants:Z};const we=16209;var be=function(t,e){let r,n,i,s,o,a,c,u,h,l,d,f,p,g,y,m,w,b,v,_,k,S,E,A;const I=t.state;r=t.next_in,E=t.input,n=r+(t.avail_in-5),i=t.next_out,A=t.output,s=i-(e-t.avail_out),o=i+(t.avail_out-257),a=I.dmax,c=I.wsize,u=I.whave,h=I.wnext,l=I.window,d=I.hold,f=I.bits,p=I.lencode,g=I.distcode,y=(1<<I.lenbits)-1,m=(1<<I.distbits)-1;t:do{f<15&&(d+=E[r++]<<f,f+=8,d+=E[r++]<<f,f+=8),w=p[d&y];e:for(;;){if(b=w>>>24,d>>>=b,f-=b,b=w>>>16&255,0===b)A[i++]=65535&w;else{if(!(16&b)){if(64&b){if(32&b){I.mode=16191;break t}t.msg="invalid literal/length code",I.mode=we;break t}w=p[(65535&w)+(d&(1<<b)-1)];continue e}for(v=65535&w,b&=15,b&&(f<b&&(d+=E[r++]<<f,f+=8),v+=d&(1<<b)-1,d>>>=b,f-=b),f<15&&(d+=E[r++]<<f,f+=8,d+=E[r++]<<f,f+=8),w=g[d&m];;){if(b=w>>>24,d>>>=b,f-=b,b=w>>>16&255,16&b){if(_=65535&w,b&=15,f<b&&(d+=E[r++]<<f,f+=8,f<b&&(d+=E[r++]<<f,f+=8)),_+=d&(1<<b)-1,_>a){t.msg="invalid distance too far back",I.mode=we;break t}if(d>>>=b,f-=b,b=i-s,_>b){if(b=_-b,b>u&&I.sane){t.msg="invalid distance too far back",I.mode=we;break t}if(k=0,S=l,0===h){if(k+=c-b,b<v){v-=b;do{A[i++]=l[k++]}while(--b);k=i-_,S=A}}else if(h<b){if(k+=c+h-b,b-=h,b<v){v-=b;do{A[i++]=l[k++]}while(--b);if(k=0,h<v){b=h,v-=b;do{A[i++]=l[k++]}while(--b);k=i-_,S=A}}}else if(k+=h-b,b<v){v-=b;do{A[i++]=l[k++]}while(--b);k=i-_,S=A}for(;v>2;)A[i++]=S[k++],A[i++]=S[k++],A[i++]=S[k++],v-=3;v&&(A[i++]=S[k++],v>1&&(A[i++]=S[k++]))}else{k=i-_;do{A[i++]=A[k++],A[i++]=A[k++],A[i++]=A[k++],v-=3}while(v>2);v&&(A[i++]=A[k++],v>1&&(A[i++]=A[k++]))}break}if(64&b){t.msg="invalid distance code",I.mode=we;break t}w=g[(65535&w)+(d&(1<<b)-1)]}}break}}while(r<n&&i<o);v=f>>3,r-=v,f-=v<<3,d&=(1<<f)-1,t.next_in=r,t.next_out=i,t.avail_in=r<n?n-r+5:5-(r-n),t.avail_out=i<o?o-i+257:257-(i-o),I.hold=d,I.bits=f};const ve=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),_e=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ke=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Se=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Ee=(t,e,r,n,i,s,o,a)=>{const c=a.bits;let u,h,l,d,f,p,g=0,y=0,m=0,w=0,b=0,v=0,_=0,k=0,S=0,E=0,A=null;const I=new Uint16Array(16),x=new Uint16Array(16);let B,P,T,O=null;for(g=0;g<=15;g++)I[g]=0;for(y=0;y<n;y++)I[e[r+y]]++;for(b=c,w=15;w>=1&&0===I[w];w--);if(b>w&&(b=w),0===w)return i[s++]=20971520,i[s++]=20971520,a.bits=1,0;for(m=1;m<w&&0===I[m];m++);for(b<m&&(b=m),k=1,g=1;g<=15;g++)if(k<<=1,k-=I[g],k<0)return-1;if(k>0&&(0===t||1!==w))return-1;for(x[1]=0,g=1;g<15;g++)x[g+1]=x[g]+I[g];for(y=0;y<n;y++)0!==e[r+y]&&(o[x[e[r+y]]++]=y);if(0===t?(A=O=o,p=20):1===t?(A=ve,O=_e,p=257):(A=ke,O=Se,p=0),E=0,y=0,g=m,f=s,v=b,_=0,l=-1,S=1<<b,d=S-1,1===t&&S>852||2===t&&S>592)return 1;for(;;){B=g-_,o[y]+1<p?(P=0,T=o[y]):o[y]>=p?(P=O[o[y]-p],T=A[o[y]-p]):(P=96,T=0),u=1<<g-_,h=1<<v,m=h;do{h-=u,i[f+(E>>_)+h]=B<<24|P<<16|T}while(0!==h);for(u=1<<g-1;E&u;)u>>=1;if(0!==u?(E&=u-1,E+=u):E=0,y++,0===--I[g]){if(g===w)break;g=e[r+o[y]]}if(g>b&&(E&d)!==l){for(0===_&&(_=b),f+=m,v=g-_,k=1<<v;v+_<w&&(k-=I[v+_],!(k<=0));)v++,k<<=1;if(S+=1<<v,1===t&&S>852||2===t&&S>592)return 1;l=E&d,i[l]=b<<24|v<<16|f-s}}return 0!==E&&(i[f+E]=g-_<<24|64<<16),a.bits=b,0};const{Z_FINISH:Ae,Z_BLOCK:Ie,Z_TREES:xe,Z_OK:Be,Z_STREAM_END:Pe,Z_NEED_DICT:Te,Z_STREAM_ERROR:Oe,Z_DATA_ERROR:Me,Z_MEM_ERROR:Re,Z_BUF_ERROR:Le,Z_DEFLATED:Ce}=Z,Ue=16180,ze=16190,Ne=16191,Ke=16192,De=16194,We=16199,Fe=16200,He=16206,qe=16209,je=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Ve(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const $e=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Ue||e.mode>16211?1:0},Ze=t=>{if($e(t))return Oe;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=Ue,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,Be},Ge=t=>{if($e(t))return Oe;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Ze(t)},Ye=(t,e)=>{let r;if($e(t))return Oe;const n=t.state;return e<0?(r=0,e=-e):(r=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Oe:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,Ge(t))},Je=(t,e)=>{if(!t)return Oe;const r=new Ve;t.state=r,r.strm=t,r.window=null,r.mode=Ue;const n=Ye(t,e);return n!==Be&&(t.state=null),n};let Xe,Qe,tr=!0;const er=t=>{if(tr){Xe=new Int32Array(512),Qe=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Ee(1,t.lens,0,288,Xe,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Ee(2,t.lens,0,32,Qe,0,t.work,{bits:5}),tr=!1}t.lencode=Xe,t.lenbits=9,t.distcode=Qe,t.distbits=5},rr=(t,e,r,n)=>{let i;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(e.subarray(r-n,r-n+i),s.wnext),(n-=i)?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};var nr=Ge,ir=Je,sr=(t,e)=>{let r,n,i,s,o,a,c,u,h,l,d,f,p,g,y,m,w,b,v,_,k,S,E=0;const A=new Uint8Array(4);let I,x;const B=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if($e(t)||!t.output||!t.input&&0!==t.avail_in)return Oe;r=t.state,r.mode===Ne&&(r.mode=Ke),o=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,n=t.input,a=t.avail_in,u=r.hold,h=r.bits,l=a,d=c,S=Be;t:for(;;)switch(r.mode){case Ue:if(0===r.wrap){r.mode=Ke;break}for(;h<16;){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}if(2&r.wrap&&35615===u){0===r.wbits&&(r.wbits=15),r.check=0,A[0]=255&u,A[1]=u>>>8&255,r.check=V(r.check,A,2,0),u=0,h=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=qe;break}if((15&u)!==Ce){t.msg="unknown compression method",r.mode=qe;break}if(u>>>=4,h-=4,k=8+(15&u),0===r.wbits&&(r.wbits=k),k>15||k>r.wbits){t.msg="invalid window size",r.mode=qe;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=512&u?16189:Ne,u=0,h=0;break;case 16181:for(;h<16;){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}if(r.flags=u,(255&r.flags)!==Ce){t.msg="unknown compression method",r.mode=qe;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=qe;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&4&r.wrap&&(A[0]=255&u,A[1]=u>>>8&255,r.check=V(r.check,A,2,0)),u=0,h=0,r.mode=16182;case 16182:for(;h<32;){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}r.head&&(r.head.time=u),512&r.flags&&4&r.wrap&&(A[0]=255&u,A[1]=u>>>8&255,A[2]=u>>>16&255,A[3]=u>>>24&255,r.check=V(r.check,A,4,0)),u=0,h=0,r.mode=16183;case 16183:for(;h<16;){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&4&r.wrap&&(A[0]=255&u,A[1]=u>>>8&255,r.check=V(r.check,A,2,0)),u=0,h=0,r.mode=16184;case 16184:if(1024&r.flags){for(;h<16;){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&4&r.wrap&&(A[0]=255&u,A[1]=u>>>8&255,r.check=V(r.check,A,2,0)),u=0,h=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&(f=r.length,f>a&&(f=a),f&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+f),k)),512&r.flags&&4&r.wrap&&(r.check=V(r.check,n,f,s)),a-=f,s+=f,r.length-=f),r.length))break t;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===a)break t;f=0;do{k=n[s+f++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k))}while(k&&f<a);if(512&r.flags&&4&r.wrap&&(r.check=V(r.check,n,f,s)),a-=f,s+=f,k)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===a)break t;f=0;do{k=n[s+f++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k))}while(k&&f<a);if(512&r.flags&&4&r.wrap&&(r.check=V(r.check,n,f,s)),a-=f,s+=f,k)break t}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;h<16;){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}if(4&r.wrap&&u!==(65535&r.check)){t.msg="header crc mismatch",r.mode=qe;break}u=0,h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Ne;break;case 16189:for(;h<32;){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}t.adler=r.check=je(u),u=0,h=0,r.mode=ze;case ze:if(0===r.havedict)return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,r.hold=u,r.bits=h,Te;t.adler=r.check=1,r.mode=Ne;case Ne:if(e===Ie||e===xe)break t;case Ke:if(r.last){u>>>=7&h,h-=7&h,r.mode=He;break}for(;h<3;){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}switch(r.last=1&u,u>>>=1,h-=1,3&u){case 0:r.mode=16193;break;case 1:if(er(r),r.mode=We,e===xe){u>>>=2,h-=2;break t}break;case 2:r.mode=16196;break;case 3:t.msg="invalid block type",r.mode=qe}u>>>=2,h-=2;break;case 16193:for(u>>>=7&h,h-=7&h;h<32;){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}if((65535&u)!=(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=qe;break}if(r.length=65535&u,u=0,h=0,r.mode=De,e===xe)break t;case De:r.mode=16195;case 16195:if(f=r.length,f){if(f>a&&(f=a),f>c&&(f=c),0===f)break t;i.set(n.subarray(s,s+f),o),a-=f,s+=f,c-=f,o+=f,r.length-=f;break}r.mode=Ne;break;case 16196:for(;h<14;){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}if(r.nlen=257+(31&u),u>>>=5,h-=5,r.ndist=1+(31&u),u>>>=5,h-=5,r.ncode=4+(15&u),u>>>=4,h-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=qe;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;h<3;){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}r.lens[B[r.have++]]=7&u,u>>>=3,h-=3}for(;r.have<19;)r.lens[B[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,I={bits:r.lenbits},S=Ee(0,r.lens,0,19,r.lencode,0,r.work,I),r.lenbits=I.bits,S){t.msg="invalid code lengths set",r.mode=qe;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;E=r.lencode[u&(1<<r.lenbits)-1],y=E>>>24,m=E>>>16&255,w=65535&E,!(y<=h);){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}if(w<16)u>>>=y,h-=y,r.lens[r.have++]=w;else{if(16===w){for(x=y+2;h<x;){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}if(u>>>=y,h-=y,0===r.have){t.msg="invalid bit length repeat",r.mode=qe;break}k=r.lens[r.have-1],f=3+(3&u),u>>>=2,h-=2}else if(17===w){for(x=y+3;h<x;){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}u>>>=y,h-=y,k=0,f=3+(7&u),u>>>=3,h-=3}else{for(x=y+7;h<x;){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}u>>>=y,h-=y,k=0,f=11+(127&u),u>>>=7,h-=7}if(r.have+f>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=qe;break}for(;f--;)r.lens[r.have++]=k}}if(r.mode===qe)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=qe;break}if(r.lenbits=9,I={bits:r.lenbits},S=Ee(1,r.lens,0,r.nlen,r.lencode,0,r.work,I),r.lenbits=I.bits,S){t.msg="invalid literal/lengths set",r.mode=qe;break}if(r.distbits=6,r.distcode=r.distdyn,I={bits:r.distbits},S=Ee(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,I),r.distbits=I.bits,S){t.msg="invalid distances set",r.mode=qe;break}if(r.mode=We,e===xe)break t;case We:r.mode=Fe;case Fe:if(a>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,r.hold=u,r.bits=h,be(t,d),o=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,n=t.input,a=t.avail_in,u=r.hold,h=r.bits,r.mode===Ne&&(r.back=-1);break}for(r.back=0;E=r.lencode[u&(1<<r.lenbits)-1],y=E>>>24,m=E>>>16&255,w=65535&E,!(y<=h);){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}if(m&&!(240&m)){for(b=y,v=m,_=w;E=r.lencode[_+((u&(1<<b+v)-1)>>b)],y=E>>>24,m=E>>>16&255,w=65535&E,!(b+y<=h);){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}u>>>=b,h-=b,r.back+=b}if(u>>>=y,h-=y,r.back+=y,r.length=w,0===m){r.mode=16205;break}if(32&m){r.back=-1,r.mode=Ne;break}if(64&m){t.msg="invalid literal/length code",r.mode=qe;break}r.extra=15&m,r.mode=16201;case 16201:if(r.extra){for(x=r.extra;h<x;){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,h-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;E=r.distcode[u&(1<<r.distbits)-1],y=E>>>24,m=E>>>16&255,w=65535&E,!(y<=h);){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}if(!(240&m)){for(b=y,v=m,_=w;E=r.distcode[_+((u&(1<<b+v)-1)>>b)],y=E>>>24,m=E>>>16&255,w=65535&E,!(b+y<=h);){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}u>>>=b,h-=b,r.back+=b}if(u>>>=y,h-=y,r.back+=y,64&m){t.msg="invalid distance code",r.mode=qe;break}r.offset=w,r.extra=15&m,r.mode=16203;case 16203:if(r.extra){for(x=r.extra;h<x;){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,h-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=qe;break}r.mode=16204;case 16204:if(0===c)break t;if(f=d-c,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=qe;break}f>r.wnext?(f-=r.wnext,p=r.wsize-f):p=r.wnext-f,f>r.length&&(f=r.length),g=r.window}else g=i,p=o-r.offset,f=r.length;f>c&&(f=c),c-=f,r.length-=f;do{i[o++]=g[p++]}while(--f);0===r.length&&(r.mode=Fe);break;case 16205:if(0===c)break t;i[o++]=r.length,c--,r.mode=Fe;break;case He:if(r.wrap){for(;h<32;){if(0===a)break t;a--,u|=n[s++]<<h,h+=8}if(d-=c,t.total_out+=d,r.total+=d,4&r.wrap&&d&&(t.adler=r.check=r.flags?V(r.check,i,d,o-d):q(r.check,i,d,o-d)),d=c,4&r.wrap&&(r.flags?u:je(u))!==r.check){t.msg="incorrect data check",r.mode=qe;break}u=0,h=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;h<32;){if(0===a)break t;a--,u+=n[s++]<<h,h+=8}if(4&r.wrap&&u!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=qe;break}u=0,h=0}r.mode=16208;case 16208:S=Pe;break t;case qe:S=Me;break t;case 16210:return Re;default:return Oe}return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,r.hold=u,r.bits=h,(r.wsize||d!==t.avail_out&&r.mode<qe&&(r.mode<He||e!==Ae))&&rr(t,t.output,t.next_out,d-t.avail_out),l-=t.avail_in,d-=t.avail_out,t.total_in+=l,t.total_out+=d,r.total+=d,4&r.wrap&&d&&(t.adler=r.check=r.flags?V(r.check,i,d,t.next_out-d):q(r.check,i,d,t.next_out-d)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Ne?128:0)+(r.mode===We||r.mode===De?256:0),(0===l&&0===d||e===Ae)&&S===Be&&(S=Le),S},or=t=>{if($e(t))return Oe;let e=t.state;return e.window&&(e.window=null),t.state=null,Be},ar=(t,e)=>{if($e(t))return Oe;const r=t.state;return 2&r.wrap?(r.head=e,e.done=!1,Be):Oe},cr=(t,e)=>{const r=e.length;let n,i,s;return $e(t)?Oe:(n=t.state,0!==n.wrap&&n.mode!==ze?Oe:n.mode===ze&&(i=1,i=q(i,e,r,0),i!==n.check)?Me:(s=rr(t,e,r,r),s?(n.mode=16210,Re):(n.havedict=1,Be)))},ur=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const hr=Object.prototype.toString,{Z_NO_FLUSH:lr,Z_FINISH:dr,Z_OK:fr,Z_STREAM_END:pr,Z_NEED_DICT:gr,Z_STREAM_ERROR:yr,Z_DATA_ERROR:mr,Z_MEM_ERROR:wr}=Z;function br(t){this.options=Jt({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ie,this.strm.avail_out=0;let r=ir(this.strm,e.windowBits);if(r!==fr)throw new Error($[r]);if(this.header=new ur,ar(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=ee(e.dictionary):"[object ArrayBuffer]"===hr.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=cr(this.strm,e.dictionary),r!==fr)))throw new Error($[r])}function vr(t,e){const r=new br(e);if(r.push(t),r.err)throw r.msg||$[r.err];return r.result}br.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(o=e===~~e?e:!0===e?dr:lr,"[object ArrayBuffer]"===hr.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=sr(r,o),s===gr&&i&&(s=cr(r,i),s===fr?s=sr(r,o):s===mr&&(s=gr));r.avail_in>0&&s===pr&&r.state.wrap>0&&0!==t[r.next_in];)nr(r),s=sr(r,o);switch(s){case yr:case mr:case gr:case wr:return this.onEnd(s),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(0===r.avail_out||s===pr))if("string"===this.options.to){let t=ne(r.output,r.next_out),e=r.next_out-t,i=re(r.output,t);r.next_out=e,r.avail_out=n-e,e&&r.output.set(r.output.subarray(t,t+e),0),this.onData(i)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(s!==fr||0!==a){if(s===pr)return s=or(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},br.prototype.onData=function(t){this.chunks.push(t)},br.prototype.onEnd=function(t){t===fr&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Xt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var _r={Inflate:br,inflate:vr,inflateRaw:function(t,e){return(e=e||{}).raw=!0,vr(t,e)},ungzip:vr,constants:Z};const{Deflate:kr,deflate:Sr,deflateRaw:Er,gzip:Ar}=me,{Inflate:Ir,inflate:xr,inflateRaw:Br,ungzip:Pr}=_r;var Tr=xr,Or=r(228),Mr=r.n(Or);const Rr=t=>"version"in t;function Lr(t){return o().encode(t)}function Cr(t){return t.toString("base64")}function Ur(t){return e.Buffer.from(t,"base64")}function zr(t,...e){if(t.args.length!=e.length)throw new Error("Invalid argument length");const r={};let n=0;return t.args.forEach(t=>{r[t.name]=e[n],n+=1}),r}function Nr(t,e={}){t.forEach(t=>{if("accounts"in t)Nr(t.accounts,e[t.name]);else if(void 0===e[t.name])throw new Error(`Invalid arguments: ${t.name} not provided.`)})}function Kr(e){return e instanceof t.PublicKey?e:new t.PublicKey(e)}class Dr extends TypeError{constructor(t,e){let r;const{message:n,...i}=t,{path:s}=t;super(0===s.length?n:"At path: "+s.join(".")+" -- "+n),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var n;return null!=(n=r)?n:r=[t,...e()]}}}function Wr(t){return"object"==typeof t&&null!=t}function Fr(t){return"string"==typeof t?JSON.stringify(t):""+t}function Hr(t,e,r,n){if(!0===t)return;!1===t?t={}:"string"==typeof t&&(t={message:t});const{path:i,branch:s}=e,{type:o}=r,{refinement:a,message:c="Expected a value of type `"+o+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+Fr(n)+"`"}=t;return{value:n,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:c}}function*qr(t,e,r,n){var i;Wr(i=t)&&"function"==typeof i[Symbol.iterator]||(t=[t]);for(const i of t){const t=Hr(i,e,r,n);t&&(yield t)}}function*jr(t,e,r){void 0===r&&(r={});const{path:n=[],branch:i=[t],coerce:s=!1,mask:o=!1}=r,a={path:n,branch:i};if(s&&(t=e.coercer(t,a),o&&"type"!==e.type&&Wr(e.schema)&&Wr(t)&&!Array.isArray(t)))for(const r in t)void 0===e.schema[r]&&delete t[r];let c=!0;for(const r of e.validator(t,a))c=!1,yield[r,void 0];for(let[r,u,h]of e.entries(t,a)){const e=jr(u,h,{path:void 0===r?n:[...n,r],branch:void 0===r?i:[...i,u],coerce:s,mask:o});for(const n of e)n[0]?(c=!1,yield[n[0],void 0]):s&&(u=n[1],void 0===r?t=u:t instanceof Map?t.set(r,u):t instanceof Set?t.add(u):Wr(t)&&(t[r]=u))}if(c)for(const r of e.refiner(t,a))c=!1,yield[r,void 0];c&&(yield[void 0,t])}class Vr{constructor(t){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:e,schema:r,validator:n,refiner:i,coercer:s=t=>t,entries:o=function*(){}}=t;this.type=e,this.schema=r,this.entries=o,this.coercer=s,this.validator=n?(t,e)=>qr(n(t,e),e,this,t):()=>[],this.refiner=i?(t,e)=>qr(i(t,e),e,this,t):()=>[]}assert(t){return function(t,e){const r=Gr(t,e);if(r[0])throw r[0]}(t,this)}create(t){return $r(t,this)}is(t){return Zr(t,this)}mask(t){return function(t,e){const r=Gr(t,e,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}(t,this)}validate(t,e){return void 0===e&&(e={}),Gr(t,this,e)}}function $r(t,e){const r=Gr(t,e,{coerce:!0});if(r[0])throw r[0];return r[1]}function Zr(t,e){return!Gr(t,e)[0]}function Gr(t,e,r){void 0===r&&(r={});const n=jr(t,e,r),i=function(t){const{done:e,value:r}=t.next();return e?void 0:r}(n);return i[0]?[new Dr(i[0],function*(){for(const t of n)t[0]&&(yield t[0])}),void 0]:[void 0,i[1]]}function Yr(t,e){return new Vr({type:t,schema:null,validator:e})}function Jr(t){return new Vr({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer:t=>Array.isArray(t)?t.slice():t,validator:t=>Array.isArray(t)||"Expected an array value, but received: "+Fr(t)})}function Xr(t){const e=Fr(t),r=typeof t;return new Vr({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?t:null,validator:r=>r===t||"Expected the literal `"+e+"`, but received: "+Fr(r)})}function Qr(t){return new Vr({...t,validator:(e,r)=>null===e||t.validator(e,r),refiner:(e,r)=>null===e||t.refiner(e,r)})}function tn(){return Yr("number",t=>"number"==typeof t&&!isNaN(t)||"Expected a number, but received: "+Fr(t))}function en(t){return new Vr({...t,validator:(e,r)=>void 0===e||t.validator(e,r),refiner:(e,r)=>void 0===e||t.refiner(e,r)})}function rn(){return Yr("string",t=>"string"==typeof t||"Expected a string, but received: "+Fr(t))}function nn(t){const e=Object.keys(t);return new Vr({type:"type",schema:t,*entries(r){if(Wr(r))for(const n of e)yield[n,r[n],t[n]]},validator:t=>Wr(t)||"Expected an object, but received: "+Fr(t)})}function sn(t){const e=t.map(t=>t.type).join(" | ");return new Vr({type:"union",schema:null,coercer:(e,r)=>(t.find(t=>{const[r]=t.validate(e,{coerce:!0});return!r})||on()).coercer(e,r),validator(r,n){const i=[];for(const e of t){const[...t]=jr(r,e,n),[s]=t;if(!s[0])return[];for(const[e]of t)e&&i.push(e)}return["Expected the value to satisfy a union of `"+e+"`, but received: "+Fr(r),...i]}})}function on(){return Yr("unknown",()=>!0)}async function an(t,e,r){const n=null!=r?r:t.commitment,{value:i,context:s}=await t.getMultipleAccountsInfoAndContext(e,n);return i.map((t,r)=>null===t?null:{publicKey:e[r],account:t,context:s})}const cn=un(on());function un(t){return sn([nn({jsonrpc:Xr("2.0"),id:rn(),result:t}),nn({jsonrpc:Xr("2.0"),id:rn(),error:nn({code:on(),message:rn(),data:en(Yr("any",()=>!0))})})])}const hn=(dn=nn({err:Qr(sn([nn({}),rn()])),logs:Qr(Jr(rn())),accounts:en(Qr(Jr(Qr(nn({executable:Yr("boolean",t=>"boolean"==typeof t),owner:rn(),lamports:tn(),data:Jr(rn()),rentEpoch:en(tn())}))))),unitsConsumed:en(tn())}),function(t,e){return new Vr({...t,coercer:(r,n)=>Zr(r,e)?t.coercer((t=>"error"in t?t:{...t,result:$r(t.result,ln)})(r),n):t.coercer(r,n)})}(un(ln=nn({context:nn({slot:tn()}),value:dn})),cn));var ln,dn;class fn{constructor(t,e,r){this.connection=t,this.wallet=e,this.opts=r,this.publicKey=null==e?void 0:e.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(t,e){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(e,r,n){var i,s,o,a;if(void 0===n&&(n=this.opts),Rr(e))r&&e.sign(r);else if(e.feePayer=null!==(i=e.feePayer)&&void 0!==i?i:this.wallet.publicKey,e.recentBlockhash=(await this.connection.getLatestBlockhash(n.preflightCommitment)).blockhash,r)for(const t of r)e.partialSign(t);const c=(e=await this.wallet.signTransaction(e)).serialize();try{return await gn(this.connection,c,n)}catch(r){if(r instanceof yn){const n=Lr(Rr(e)?(null===(s=e.signatures)||void 0===s?void 0:s[0])||new Uint8Array:null!==(o=e.signature)&&void 0!==o?o:new Uint8Array),i=await this.connection.getTransaction(n,{commitment:"confirmed"});if(i){const e=null===(a=i.meta)||void 0===a?void 0:a.logMessages;throw e?new t.SendTransactionError(r.message,e):r}throw r}throw r}}async sendAll(e,r){var n,i,s;void 0===r&&(r=this.opts);const o=(await this.connection.getLatestBlockhash(r.preflightCommitment)).blockhash;let a=e.map(t=>{var e,r;if(Rr(t.tx)){let e=t.tx;return t.signers&&e.sign(t.signers),e}{let n=t.tx,i=null!==(e=t.signers)&&void 0!==e?e:[];return n.feePayer=null!==(r=n.feePayer)&&void 0!==r?r:this.wallet.publicKey,n.recentBlockhash=o,i.forEach(t=>{n.partialSign(t)}),n}});const c=await this.wallet.signAllTransactions(a),u=[];for(let e=0;e<a.length;e+=1){const o=c[e],a=o.serialize();try{u.push(await gn(this.connection,a,r))}catch(e){if(e instanceof yn){const r=Lr(Rr(o)?(null===(n=o.signatures)||void 0===n?void 0:n[0])||new Uint8Array:null!==(i=o.signature)&&void 0!==i?i:new Uint8Array),a=await this.connection.getTransaction(r,{commitment:"confirmed"});if(a){const r=null===(s=a.meta)||void 0===s?void 0:s.logMessages;throw r?new t.SendTransactionError(e.message,r):e}throw e}throw e}}return u}async simulate(e,r,n,i){let s,o=(await this.connection.getLatestBlockhash(null!=n?n:this.connection.commitment)).blockhash;if(Rr(e)?(r&&(e.sign(r),e=await this.wallet.signTransaction(e)),s=await this.connection.simulateTransaction(e,{commitment:n})):(e.feePayer=e.feePayer||this.wallet.publicKey,e.recentBlockhash=o,r&&(e=await this.wallet.signTransaction(e)),s=await async function(e,r,n,i,s){var o;n&&n.length>0&&r.sign(...n);const a=r._compile(),c=a.serialize(),u=r._serialize(c).toString("base64"),h={encoding:"base64",commitment:null!=i?i:e.commitment};if(s){const t=(Array.isArray(s)?s:a.nonProgramIds()).map(t=>t.toBase58());h.accounts={encoding:"base64",addresses:t}}n&&(h.sigVerify=!0);const l=[u,h],d=$r(await e._rpcRequest("simulateTransaction",l),hn);if("error"in d){let e;if("data"in d.error&&(e=null===(o=d.error.data)||void 0===o?void 0:o.logs,e&&Array.isArray(e))){const t="\n    ",r=t+e.join(t);console.error(d.error.message,r)}throw new t.SendTransactionError("failed to simulate transaction: "+d.error.message,e)}return d.result}(this.connection,e,r,n,i)),s.value.err)throw new pn(s.value);return s.value}}class pn extends Error{constructor(t,e){super(e),this.simulationResponse=t}}async function gn(t,e,r){const n=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment},i=await t.sendRawTransaction(e,n),s=(await t.confirmTransaction(i,r&&r.commitment)).value;if(s.err)throw new yn(`Raw transaction ${i} failed (${JSON.stringify(s)})`);return i}class yn extends Error{constructor(t){super(t)}}function mn(){return null===wn?fn.local():wn}let wn=null;new Set(["anchor-deprecated-state","debug-logs"]);const bn=new Map;function vn(t){return void 0!==bn.get(t)}class _n extends Error{constructor(t){super(t),this.name="IdlError"}}class kn{constructor(t){this.stack=t}static parse(e){var r;const n=/^Program (\w*) invoke/,i=/^Program \w* success/,s=[];for(let o=0;o<e.length;o++){if(i.exec(e[o])){s.pop();continue}const a=null===(r=n.exec(e[o]))||void 0===r?void 0:r[1];a&&s.push(new t.PublicKey(a))}return new kn(s)}}class Sn extends Error{constructor(t,e,r,n,i,s){super(r.join("\n").replace("Program log: ","")),this.errorLogs=r,this.logs=n,this.error={errorCode:t,errorMessage:e,comparedValues:s,origin:i},this._programErrorStack=kn.parse(n)}static parse(e){if(!e)return null;const r=e.findIndex(t=>t.startsWith("Program log: AnchorError"));if(-1===r)return null;const n=e[r],i=[n];let s;if(r+1<e.length)if("Program log: Left:"===e[r+1]){const n=/^Program log: (.*)$/,o=n.exec(e[r+2])[1],a=n.exec(e[r+4])[1];s=[new t.PublicKey(o),new t.PublicKey(a)],i.push(...e.slice(r+1,r+5))}else if(e[r+1].startsWith("Program log: Left:")){const t=/^Program log: (Left|Right): (.*)$/,n=t.exec(e[r+1])[2],o=t.exec(e[r+2])[2];i.push(...e.slice(r+1,r+3)),s=[n,o]}const o=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),a=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),c=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n);if(o){const[t,r,n]=o.slice(1,4),a={code:t,number:parseInt(r)};return new Sn(a,n,i,e,void 0,s)}if(a){const[t,r,n,o,c]=a.slice(1,6),u={code:n,number:parseInt(o)},h={file:t,line:parseInt(r)};return new Sn(u,c,i,e,h,s)}if(c){const[t,r,n,o]=c.slice(1,5),a=t,u={code:r,number:parseInt(n)};return new Sn(u,o,i,e,a,s)}return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class En extends Error{constructor(t,e,r){super(),this.code=t,this.msg=e,this.logs=r,r&&(this._programErrorStack=kn.parse(r))}static parse(t,e){const r=t.toString();let n,i;if(r.includes("custom program error:")){let t=r.split("custom program error: ");if(2!==t.length)return null;n=t[1]}else{const t=r.match(/"Custom":([0-9]+)}/g);if(!t||t.length>1)return null;n=t[0].match(/([0-9]+)/g)[0]}try{i=parseInt(n)}catch(t){return null}let s=e.get(i);return void 0!==s?new En(i,s,t.logs):(s=In.get(i),void 0!==s?new En(i,s,t.logs):null)}get program(){var t;return null===(t=this._programErrorStack)||void 0===t?void 0:t.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var t;return null===(t=this._programErrorStack)||void 0===t?void 0:t.stack}toString(){return this.msg}}function An(t,e){vn("debug-logs")&&console.log("Translating error:",t);const r=Sn.parse(t.logs);if(r)return r;const n=En.parse(t,e);if(n)return n;if(t.logs){const e={get:function(e,r){return"programErrorStack"===r?e.programErrorStack.stack:"program"===r?e.programErrorStack.stack[t.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return t.programErrorStack=kn.parse(t.logs),new Proxy(t,e)}return t}const In=new Map([[100,"8 byte instruction identifier not provided"],[101,"Fallback functions are not supported"],[102,"The program could not deserialize the given instruction"],[103,"The program could not serialize the given instruction"],[1e3,"The program was compiled without idl instructions"],[1001,"The transaction was given an invalid program for the IDL instruction"],[2e3,"A mut constraint was violated"],[2001,"A has one constraint was violated"],[2002,"A signer constraint was violated"],[2003,"A raw constraint was violated"],[2004,"An owner constraint was violated"],[2005,"A rent exemption constraint was violated"],[2006,"A seeds constraint was violated"],[2007,"An executable constraint was violated"],[2008,"Deprecated Error, feel free to replace with something else"],[2009,"An associated constraint was violated"],[2010,"An associated init constraint was violated"],[2011,"A close constraint was violated"],[2012,"An address constraint was violated"],[2013,"Expected zero account discriminant"],[2014,"A token mint constraint was violated"],[2015,"A token owner constraint was violated"],[2016,"A mint mint authority constraint was violated"],[2017,"A mint freeze authority constraint was violated"],[2018,"A mint decimals constraint was violated"],[2019,"A space constraint was violated"],[2020,"A required account for the constraint is None"],[2500,"A require expression was violated"],[2501,"A require_eq expression was violated"],[2502,"A require_keys_eq expression was violated"],[2503,"A require_neq expression was violated"],[2504,"A require_keys_neq expression was violated"],[2505,"A require_gt expression was violated"],[2506,"A require_gte expression was violated"],[3e3,"The account discriminator was already set on this account"],[3001,"No 8 byte discriminator was found on the account"],[3002,"8 byte discriminator did not match what was expected"],[3003,"Failed to deserialize the account"],[3004,"Failed to serialize the account"],[3005,"Not enough account keys given to the instruction"],[3006,"The given account is not mutable"],[3007,"The given account is owned by a different program than expected"],[3008,"Program ID was not as expected"],[3009,"Program account is not executable"],[3010,"The given account did not sign"],[3011,"The given account is not owned by the system program"],[3012,"The program expected this account to be already initialized"],[3013,"The given account is not a program data account"],[3014,"The given account is not the associated token account"],[3015,"The given public key does not match the required sysvar"],[3016,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[3017,"The account was duplicated for more than one reallocation"],[4100,"The declared program id does not match the actual program id"],[5e3,"The API being used is deprecated and should no longer be used"]]);var xn=function(){return xn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},xn.apply(this,arguments)},Bn=function(){return Bn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Bn.apply(this,arguments)};function Pn(t){return t.toLowerCase()}var Tn=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],On=/[^A-Z0-9]+/gi;function Mn(t,e,r){return e instanceof RegExp?t.replace(e,r):e.reduce(function(t,e){return t.replace(e,r)},t)}class Rn{static fieldLayout(t,e){const r=void 0!==t.name?c()(t.name):void 0;switch(t.type){case"bool":return u.bool(r);case"u8":return u.u8(r);case"i8":return u.i8(r);case"u16":return u.u16(r);case"i16":return u.i16(r);case"u32":return u.u32(r);case"i32":return u.i32(r);case"f32":return u.f32(r);case"u64":return u.u64(r);case"i64":return u.i64(r);case"f64":return u.f64(r);case"u128":return u.u128(r);case"i128":return u.i128(r);case"u256":return u.u256(r);case"i256":return u.i256(r);case"bytes":return u.vecU8(r);case"string":return u.str(r);case"publicKey":return u.publicKey(r);default:if("vec"in t.type)return u.vec(Rn.fieldLayout({name:void 0,type:t.type.vec},e),r);if("option"in t.type)return u.option(Rn.fieldLayout({name:void 0,type:t.type.option},e),r);if("defined"in t.type){if(!e)throw new _n("User defined types not provided");const n=t.type.defined,i=e.filter(t=>t.name===n);if(1!==i.length)throw new _n(`Type not found: ${JSON.stringify(t)}`);return Rn.typeDefLayout(i[0],e,r)}if("array"in t.type){let n=t.type.array[0],i=t.type.array[1],s=Rn.fieldLayout({name:void 0,type:n},e);return u.array(s,i,r)}throw new Error(`Not yet implemented: ${t}`)}}static typeDefLayout(t,e=[],r){switch(t.type.kind){case"struct":{const n=t.type.fields.map(t=>Rn.fieldLayout(t,e));return u.struct(n,r)}case"enum":{let n=t.type.variants.map(t=>{const r=c()(t.name);if(!t.fields)return u.struct([],r);const n=t.fields.map((t,r)=>(null==t?void 0:t.name)?Rn.fieldLayout(t,e):Rn.fieldLayout({type:t,name:r.toString()},e));return u.struct(n,r)});return void 0!==r?u.rustEnum(n).replicate(r):u.rustEnum(n,r)}case"alias":return Rn.fieldLayout({type:t.type.value,name:t.name},e)}}}const Ln="global";class Cn{constructor(t){this.idl=t,this.ixLayout=Cn.parseIxLayout(t);const e=new Map;t.instructions.forEach(t=>{const r=zn(Ln,t.name);e.set(o().encode(r),{layout:this.ixLayout.get(t.name),name:t.name})}),this.sighashLayouts=e}encode(t,e){return this._encode(Ln,t,e)}_encode(t,r,n){const i=e.Buffer.alloc(1e3),s=c()(r),o=this.ixLayout.get(s);if(!o)throw new Error(`Unknown method: ${s}`);const a=o.encode(n,i),u=i.slice(0,a);return e.Buffer.concat([zn(t,r),u])}static parseIxLayout(t){const e=t.instructions.map(e=>{let r=e.args.map(e=>{var r,n;return Rn.fieldLayout(e,Array.from([...null!==(r=t.accounts)&&void 0!==r?r:[],...null!==(n=t.types)&&void 0!==n?n:[]]))});const n=c()(e.name);return[n,u.struct(r,n)]});return new Map(e)}decode(t,r="hex"){"string"==typeof t&&(t="hex"===r?e.Buffer.from(t,"hex"):o().decode(t));let n=o().encode(t.slice(0,8)),i=t.slice(8);const s=this.sighashLayouts.get(n);return s?{data:s.layout.decode(i),name:s.name}:null}format(t,e){return Un.format(t,e,this.idl)}}class Un{static format(t,e,r){const n=r.instructions.filter(e=>t.name===e.name)[0];if(void 0===n)return console.error("Invalid instruction given"),null;const i=n.args.map(e=>({name:e.name,type:Un.formatIdlType(e.type),data:Un.formatIdlData(e,t.data[e.name],r.types)})),s=Un.flattenIdlAccounts(n.accounts);return{args:i,accounts:e.map((t,e)=>e<s.length?{name:s[e].name,...t}:{name:void 0,...t})}}static formatIdlType(t){if("string"==typeof t)return t;if("vec"in t)return`Vec<${this.formatIdlType(t.vec)}>`;if("option"in t)return`Option<${this.formatIdlType(t.option)}>`;if("defined"in t)return t.defined;if("array"in t)return`Array<${t.array[0]}; ${t.array[1]}>`;throw new Error(`Unknown IDL type: ${t}`)}static formatIdlData(t,e,r){if("string"==typeof t.type)return e.toString();if(t.type.hasOwnProperty("vec"))return"["+e.map(e=>this.formatIdlData({name:"",type:t.type.vec},e)).join(", ")+"]";if(t.type.hasOwnProperty("option"))return null===e?"null":this.formatIdlData({name:"",type:t.type.option},e,r);if(t.type.hasOwnProperty("defined")){if(void 0===r)throw new Error("User defined types not provided");const n=r.filter(e=>e.name===t.type.defined);if(1!==n.length)throw new Error(`Type not found: ${t.type.defined}`);return Un.formatIdlDataDefined(n[0],e,r)}return"unknown"}static formatIdlDataDefined(t,e,r){switch(t.type.kind){case"struct":{const n=t.type;return"{ "+Object.keys(e).map(t=>{const i=n.fields.find(e=>e.name===t);if(!i)throw new Error("Unable to find type");return t+": "+Un.formatIdlData(i,e[t],r)}).join(", ")+" }"}case"enum":if(0===t.type.variants.length)return"{}";if(t.type.variants[0].name){const n=t.type.variants,i=Object.keys(e)[0],s=e[i],o=Object.keys(s).map(t=>{var e;const o=s[t],a=null===(e=n[i])||void 0===e?void 0:e.find(e=>e.name===t);if(!a)throw new Error("Unable to find variant");return t+": "+Un.formatIdlData(a,o,r)}).join(", "),a=c()(i,{pascalCase:!0});return 0===o.length?a:`${a} { ${o} }`}return"Tuple formatting not yet implemented";case"alias":return Un.formatIdlType(t.type.value)}}static flattenIdlAccounts(t,e){return t.map(t=>{const r=function(t){const e=t.replace(/([A-Z])/g," $1");return e.charAt(0).toUpperCase()+e.slice(1)}(t.name);if(t.hasOwnProperty("accounts")){const n=e?`${e} > ${r}`:r;return Un.flattenIdlAccounts(t.accounts,n)}return{...t,name:e?`${e} > ${r}`:r}}).flat()}}function zn(t,r){var n;let i=`${t}:${void 0===n&&(n={}),function(t,e){return void 0===e&&(e={}),function(t,e){void 0===e&&(e={});for(var r=e.splitRegexp,n=void 0===r?Tn:r,i=e.stripRegexp,s=void 0===i?On:i,o=e.transform,a=void 0===o?Pn:o,c=e.delimiter,u=void 0===c?" ":c,h=Mn(Mn(t,n,"$1\0$2"),s,"\0"),l=0,d=h.length;"\0"===h.charAt(l);)l++;for(;"\0"===h.charAt(d-1);)d--;return h.slice(l,d).split("\0").map(a).join(u)}(t,Bn({delimiter:"."},e))}(r,xn({delimiter:"_"},n))}`;return e.Buffer.from((0,h.sc)(i).slice(0,8))}function Nn(t,e){switch(e.type.kind){case"struct":return e.type.fields.map(e=>Kn(t,e.type)).reduce((t,e)=>t+e,0);case"enum":{const r=e.type.variants.map(e=>e.fields?e.fields.map(e=>Kn(t,"object"==typeof e&&"name"in e?e.type:e)).reduce((t,e)=>t+e,0):0);return Math.max(...r)+1}case"alias":return Kn(t,e.type.value)}}function Kn(t,e){var r,n;switch(e){case"bool":case"u8":case"i8":case"bytes":case"string":return 1;case"i16":case"u16":return 2;case"u32":case"i32":case"f32":return 4;case"u64":case"i64":case"f64":return 8;case"u128":case"i128":return 16;case"u256":case"i256":case"publicKey":return 32;default:if("vec"in e)return 1;if("option"in e)return 1+Kn(t,e.option);if("coption"in e)return 4+Kn(t,e.coption);if("defined"in e){const i=null!==(n=null===(r=t.types)||void 0===r?void 0:r.filter(t=>t.name===e.defined))&&void 0!==n?n:[];if(1!==i.length)throw new _n(`Type not found: ${JSON.stringify(e)}`);return Nn(t,i[0])}if("array"in e){let r=e.array[0],n=e.array[1];return Kn(t,r)*n}throw new Error(`Invalid type ${JSON.stringify(e)}`)}}function Dn(t){return Buffer.from((0,h.sc)(t).slice(0,8))}class Wn{constructor(t){if(void 0===t.accounts)return void(this.accountLayouts=new Map);const e=t.accounts.map(e=>[e.name,Rn.typeDefLayout(e,t.types)]);this.accountLayouts=new Map(e),this.idl=t}async encode(t,r){const n=e.Buffer.alloc(1e3),i=this.accountLayouts.get(t);if(!i)throw new Error(`Unknown account: ${t}`);const s=i.encode(r,n);let o=n.slice(0,s),a=Wn.accountDiscriminator(t);return e.Buffer.concat([a,o])}decode(t,e){if(Wn.accountDiscriminator(t).compare(e.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(t,e)}decodeAny(t){const e=t.slice(0,8),r=Array.from(this.accountLayouts.keys()).find(t=>Wn.accountDiscriminator(t).equals(e));if(!r)throw new Error("Account descriminator not found");return this.decodeUnchecked(r,t)}decodeUnchecked(t,e){const r=e.subarray(8),n=this.accountLayouts.get(t);if(!n)throw new Error(`Unknown account: ${t}`);return n.decode(r)}memcmp(t,r){const n=Wn.accountDiscriminator(t);return{offset:0,bytes:o().encode(r?e.Buffer.concat([n,r]):n)}}size(t){var e;return 8+(null!==(e=Nn(this.idl,t))&&void 0!==e?e:0)}static accountDiscriminator(t){return Dn(`account:${c()(t,{pascalCase:!0,preserveConsecutiveUppercase:!0})}`)}}class Fn{constructor(t){if(void 0===t.events)return void(this.layouts=new Map);const e=t.events.map(e=>{let r={name:e.name,type:{kind:"struct",fields:e.fields.map(t=>({name:t.name,type:t.type}))}};return[e.name,Rn.typeDefLayout(r,t.types)]});this.layouts=new Map(e),this.discriminators=new Map(void 0===t.events?[]:t.events.map(t=>{return[Cr((e=t.name,Dn(`event:${e}`))),t.name];var e}))}decode(t){let e;try{e=Ur(t)}catch(t){return null}const r=Cr(e.slice(0,8)),n=this.discriminators.get(r);if(void 0===n)return null;const i=this.layouts.get(n);if(!i)throw new Error(`Unknown event: ${n}`);return{data:i.decode(e.slice(8)),name:n}}}class Hn{constructor(t){if(void 0===t.types)return void(this.typeLayouts=new Map);const e=t.types.map(e=>[e.name,Rn.typeDefLayout(e,t.types)]);this.typeLayouts=new Map(e),this.idl=t}encode(t,r){const n=e.Buffer.alloc(1e3),i=this.typeLayouts.get(t);if(!i)throw new Error(`Unknown type: ${t}`);const s=i.encode(r,n);return n.slice(0,s)}decode(t,e){const r=this.typeLayouts.get(t);if(!r)throw new Error(`Unknown type: ${t}`);return r.decode(e)}}class qn{constructor(t){this.instruction=new Cn(t),this.accounts=new Wn(t),this.events=new Fn(t),this.types=new Hn(t)}}var jn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};class Vn{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}decode(t,e){throw new Error("Layout is abstract")}encode(t,e,r){throw new Error("Layout is abstract")}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}var $n=Vn;class Zn extends Vn{isCount(){throw new Error("ExternalLayout is abstract")}}class Gn extends Zn{constructor(t,e,r){if(!(t instanceof Vn))throw new TypeError("layout must be a Layout");if(void 0===e)e=0;else if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Yn||this.layout instanceof Jn}decode(t,e){return void 0===e&&(e=0),this.layout.decode(t,e+this.offset)}encode(t,e,r){return void 0===r&&(r=0),this.layout.encode(t,e,r+this.offset)}}class Yn extends Vn{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return void 0===e&&(e=0),t.readUIntLE(e,this.span)}encode(t,e,r){return void 0===r&&(r=0),e.writeUIntLE(t,r,this.span),this.span}}class Jn extends Vn{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return void 0===e&&(e=0),t.readUIntBE(e,this.span)}encode(t,e,r){return void 0===r&&(r=0),e.writeUIntBE(t,r,this.span),this.span}}const Xn=Math.pow(2,32);function Qn(t){const e=Math.floor(t/Xn);return{hi32:e,lo32:t-e*Xn}}function ti(t,e){return t*Xn+e}class ei extends Vn{constructor(t){super(8,t)}decode(t,e){void 0===e&&(e=0);const r=t.readUInt32LE(e);return ti(t.readInt32LE(e+4),r)}encode(t,e,r){void 0===r&&(r=0);const n=Qn(t);return e.writeUInt32LE(n.lo32,r),e.writeInt32LE(n.hi32,r+4),8}}class ri extends Vn{constructor(t,e,r){if(!Array.isArray(t)||!t.reduce((t,e)=>t&&e instanceof Vn,!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof e&&void 0===r&&(r=e,e=void 0);for(const e of t)if(0>e.span&&void 0===e.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=t.reduce((t,e)=>t+e.getSpan(),0)}catch(t){}super(n,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e){if(0<=this.span)return this.span;void 0===e&&(e=0);let r=0;try{r=this.fields.reduce((r,n)=>{const i=n.getSpan(t,e);return e+=i,r+i},0)}catch(t){throw new RangeError("indeterminate span")}return r}decode(t,e){void 0===e&&(e=0);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(t,e)),e+=n.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r){void 0===r&&(r=0);const n=r;let i=0,s=0;for(const n of this.fields){let o=n.span;if(s=0<o?o:0,void 0!==n.property){const i=t[n.property];void 0!==i&&(s=n.encode(i,e,r),0>o&&(o=n.getSpan(e,r)))}i=r,r+=o}return i+s-n}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if("string"!=typeof t)throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}class ni{constructor(t){this.property=t}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class ii extends ni{constructor(t,e){if(!(t instanceof Zn&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}class si extends Vn{constructor(t,e,r){const n=t instanceof Yn||t instanceof Jn;if(n)t=new ii(new Gn(t));else if(t instanceof Zn&&t.isCount())t=new ii(t);else if(!(t instanceof ni))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===e&&(e=null),!(null===e||e instanceof Vn))throw new TypeError("defaultLayout must be null or a Layout");if(null!==e){if(0>e.span)throw new Error("defaultLayout must have constant span");void 0===e.property&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&n&&(i+=t.layout.span)),super(i,r),this.discriminator=t,this.usesPrefixDiscriminator=n,this.defaultLayout=e,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(t){return s(t)},this.configGetSourceVariant=function(t){s=t.bind(this)}}getSpan(t,e){if(0<=this.span)return this.span;void 0===e&&(e=0);const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(t.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&t.hasOwnProperty(this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||t.hasOwnProperty(e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(t.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(t,e){let r;void 0===e&&(e=0);const n=this.discriminator,i=n.decode(t,e);let s=this.registry[i];if(void 0===s){let o=0;s=this.defaultLayout,this.usesPrefixDiscriminator&&(o=n.layout.span),r=this.makeDestinationObject(),r[n.property]=i,r[s.property]=this.defaultLayout.decode(t,e+o)}else r=s.decode(t,e);return r}encode(t,e,r){void 0===r&&(r=0);const n=this.getSourceVariant(t);if(void 0===n){const n=this.discriminator,i=this.defaultLayout;let s=0;return this.usesPrefixDiscriminator&&(s=n.layout.span),n.encode(t[n.property],e,r),s+i.encode(t[i.property],e,r+s)}return n.encode(t,e,r)}addVariant(t,e,r){const n=new oi(this,t,e,r);return this.registry[t]=n,n}getVariant(t,e){let r=t;return Buffer.isBuffer(t)&&(void 0===e&&(e=0),r=this.discriminator.decode(t,e)),this.registry[r]}}class oi extends Vn{constructor(t,e,r,n){if(!(t instanceof si))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof Vn))throw new TypeError("layout must be a Layout");if(null!==t.defaultLayout&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof n)throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,n),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e){if(0<=this.span)return this.span;void 0===e&&(e=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(t,e+r)}decode(t,e){const r=this.makeDestinationObject();if(void 0===e&&(e=0),this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r){void 0===r&&(r=0);let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!t.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=n;if(this.layout&&(this.layout.encode(t[this.property],e,r+n),i+=this.layout.getSpan(e,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}class ai extends Vn{constructor(t,e){if(!(t instanceof Zn&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof Zn||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e){void 0===e&&(e=0);let r=this.span;return 0>r&&(r=this.length.decode(t,e)),t.slice(e,e+r)}encode(t,e,r){let n=this.length;if(this.length instanceof Zn&&(n=t.length),!Buffer.isBuffer(t)||n!==t.length)throw new TypeError((i="Blob.encode",(this.property?i+"["+this.property+"]":i)+" requires (length "+n+") Buffer as src"));var i;if(r+n>e.length)throw new RangeError("encoding overruns Buffer");return e.write(t.toString("hex"),r,n,"hex"),this.length instanceof Zn&&this.length.encode(n,e,r),n}}var ci=(t,e,r)=>new Gn(t,e,r),ui=t=>new Yn(4,t),hi=t=>new ei(t),li=(t,e,r)=>new ri(t,e,r),di=(t,e,r)=>new si(t,e,r),fi=(t,e)=>new ai(t,e);class pi extends $n{constructor(t){super(-1,t),this.property=t,this.layout=li([ui("length"),ui("lengthPadding"),fi(ci(ui(),-8),"chars")],this.property)}encode(t,e,r=0){if(null==t)return this.layout.span;const n={chars:Buffer.from(t,"utf8")};return this.layout.encode(n,e,r)}decode(t,e=0){return this.layout.decode(t,e).chars.toString()}getSpan(t,e=0){return ui().span+ui().span+new(i())(new Uint8Array(t).slice(e,e+4),10,"le").toNumber()}}function gi(t){return new pi(t)}function yi(t){return fi(32,t)}const mi=di(ui("instruction"));mi.addVariant(0,li([hi("lamports"),hi("space"),yi("owner")]),"createAccount"),mi.addVariant(1,li([yi("owner")]),"assign"),mi.addVariant(2,li([hi("lamports")]),"transfer"),mi.addVariant(3,li([yi("base"),gi("seed"),hi("lamports"),hi("space"),yi("owner")]),"createAccountWithSeed"),mi.addVariant(4,li([yi("authorized")]),"advanceNonceAccount"),mi.addVariant(5,li([hi("lamports")]),"withdrawNonceAccount"),mi.addVariant(6,li([yi("authorized")]),"initializeNonceAccount"),mi.addVariant(7,li([yi("authorized")]),"authorizeNonceAccount"),mi.addVariant(8,li([hi("space")]),"allocate"),mi.addVariant(9,li([yi("base"),gi("seed"),hi("space"),yi("owner")]),"allocateWithSeed"),mi.addVariant(10,li([yi("base"),gi("seed"),yi("owner")]),"assignWithSeed"),mi.addVariant(11,li([hi("lamports"),gi("seed"),yi("owner")]),"transferWithSeed"),Math.max(...Object.values(mi.registry).map(t=>t.span));class wi extends $n{constructor(t,e,r,n){super(t.span,n),this.layout=t,this.decoder=e,this.encoder=r}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,r){return this.layout.encode(this.encoder(t),e,r)}getSpan(t,e){return this.layout.getSpan(t,e)}}function bi(e){return new wi(fi(32),e=>new t.PublicKey(e),t=>t.toBuffer(),e)}li([ui("version"),ui("state"),bi("authorizedPubkey"),bi("nonce"),li([new class extends Vn{constructor(t){super(8,t)}decode(t,e){void 0===e&&(e=0);const r=t.readUInt32LE(e);return ti(t.readUInt32LE(e+4),r)}encode(t,e,r){void 0===r&&(r=0);const n=Qn(t);return e.writeUInt32LE(n.lo32,r),e.writeUInt32LE(n.hi32,r+4),8}}("lamportsPerSignature")],"feeCalculator")]);const vi=new t.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),_i=new t.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var ki={exports:{}};function Si(t){return"accounts"in t}!function(t,e){var r="undefined"!=typeof self?self:jn,n=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();!function(t){!function(e){var r="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),s="FormData"in t,o="ArrayBuffer"in t;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function u(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function h(t){return"string"!=typeof t&&(t=String(t)),t}function l(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function f(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function g(t){var e=new FileReader,r=p(e);return e.readAsArrayBuffer(t),r}function y(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():o&&i&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=y(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(t)||c(t))?this._bodyArrayBuffer=y(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,r=p(e);return e.readAsText(t),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(t,e){t=u(t),e=h(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},d.prototype.delete=function(t){delete this.map[u(t)]},d.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},d.prototype.set=function(t,e){this.map[u(t)]=h(e)},d.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},d.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),l(t)},d.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),l(t)},d.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),l(t)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t,e){var r,n,i=(e=e||{}).body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(n=(r=e.method||this.method||"GET").toUpperCase(),w.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function v(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}}),e}function _(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},m.call(b.prototype),m.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},_.error=function(){var t=new _(null,{status:0,statusText:""});return t.type="error",t};var k=[301,302,303,307,308];_.redirect=function(t,e){if(-1===k.indexOf(e))throw new RangeError("Invalid status code");return new _(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function S(t,r){return new Promise(function(n,s){var o=new b(t,r);if(o.signal&&o.signal.aborted)return s(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var t,e,r={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new d,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}}),e)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;n(new _(i,r))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.onabort=function(){s(new e.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),o.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),o.signal&&(o.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",c)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})}S.polyfill=!0,t.fetch||(t.fetch=S,t.Headers=d,t.Request=b,t.Response=_),e.Headers=d,e.Request=b,e.Response=_,e.fetch=S,Object.defineProperty(e,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e}(ki,ki.exports),u.rustEnum([u.struct([],"uninitialized"),u.struct([u.option(u.publicKey(),"authorityAddress")],"buffer"),u.struct([u.publicKey("programdataAddress")],"program"),u.struct([u.u64("slot"),u.option(u.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,u.u32());const Ei=u.struct([u.publicKey("authority"),u.vecU8("data")]);function Ai(t,e){var r,n;let i={};const s=t.args?t.args.length:0;if(e.length>s){if(e.length!==s+1)throw new Error(`provided too many arguments ${e} to instruction ${null==t?void 0:t.name} expecting: ${null!==(n=null===(r=t.args)||void 0===r?void 0:r.map(t=>t.name))&&void 0!==n?n:[]}`);i=e.pop()}return[e,i]}class Ii{static build(e,r,n){if("_inner"===e.name)throw new _n("the _inner name is reserved");const i=(...s)=>{const[o,a]=Ai(e,[...s]);Nr(e.accounts,a.accounts);const c=i.accounts(a.accounts);return void 0!==a.remainingAccounts&&c.push(...a.remainingAccounts),vn("debug-logs")&&console.log("Outgoing account metas:",c),new t.TransactionInstruction({keys:c,programId:n,data:r(e.name,zr(e,...o))})};return i.accounts=t=>Ii.accountsArray(t,e.accounts,n,e.name),i}static accountsArray(t,e,r,n){return t?e.map(e=>{if(void 0!==("accounts"in e?e.accounts:void 0)){const i=t[e.name];return Ii.accountsArray(i,e.accounts,r,n).flat()}{const i=e;let s;try{s=Kr(t[e.name])}catch(t){throw new Error(`Wrong input type for account "${e.name}" in the instruction accounts object${void 0!==n?' for instruction "'+n+'"':""}. Expected PublicKey or string.`)}const o=i.isOptional&&s.equals(r);return{pubkey:s,isWritable:i.isMut&&!o,isSigner:i.isSigner&&!o}}}).flat():[]}}class xi{static build(e,r){return(...n)=>{var i,s,o;const[,a]=Ai(e,[...n]),c=new t.Transaction;if(a.preInstructions&&a.instructions)throw new Error("instructions is deprecated, use preInstructions");return null===(i=a.preInstructions)||void 0===i||i.forEach(t=>c.add(t)),null===(s=a.instructions)||void 0===s||s.forEach(t=>c.add(t)),c.add(r(...n)),null===(o=a.postInstructions)||void 0===o||o.forEach(t=>c.add(t)),c}}}class Bi{static build(t,e,r,n){return async(...i)=>{var s;const o=e(...i),[,a]=Ai(t,[...i]);if(void 0===n.sendAndConfirm)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await n.sendAndConfirm(o,null!==(s=a.signers)&&void 0!==s?s:[],a.options)}catch(t){throw An(t,r)}}}}class Pi{static build(t,e,r,n){var i;const s={};return null===(i=t.accounts)||void 0===i||i.forEach(i=>{const o=c()(i.name);s[o]=new Ti(t,i,r,n,e)}),s}}class Ti{get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}get idlAccount(){return this._idlAccount}constructor(t,e,r,n,i){this._idlAccount=e,this._programId=r,this._provider=null!=n?n:mn(),this._coder=null!=i?i:new qn(t),this._size=this._coder.accounts.size(e)}async fetchNullable(t,e){const{data:r}=await this.fetchNullableAndContext(t,e);return r}async fetchNullableAndContext(t,e){const r=await this.getAccountInfoAndContext(t,e),{value:n,context:i}=r;return{data:n&&0!==n.data.length?this._coder.accounts.decode(this._idlAccount.name,n.data):null,context:i}}async fetch(t,e){const{data:r}=await this.fetchNullableAndContext(t,e);if(null===r)throw new Error(`Account does not exist or has no data ${t.toString()}`);return r}async fetchAndContext(t,e){const{data:r,context:n}=await this.fetchNullableAndContext(t,e);if(null===r)throw new Error(`Account does not exist ${t.toString()}`);return{data:r,context:n}}async fetchMultiple(t,e){return(await this.fetchMultipleAndContext(t,e)).map(t=>t?t.data:null)}async fetchMultipleAndContext(t,e){return(await async function(t,e,r){if(e.length<=99)return await an(t,e,r);{const n=function(t){return Array.apply(0,new Array(Math.ceil(t.length/99))).map((e,r)=>t.slice(99*r,99*(r+1)))}(e);return(await Promise.all(n.map(e=>an(t,e,r)))).flat()}}(this._provider.connection,t.map(t=>Kr(t)),e)).map(t=>{if(null==t)return null;const{account:e,context:r}=t;return{data:this._coder.accounts.decode(this._idlAccount.name,e.data),context:r}})}async all(t){const e=this.coder.accounts.memcmp(this._idlAccount.name,t instanceof Buffer?t:void 0),r=[];return null!=(null==e?void 0:e.offset)&&null!=(null==e?void 0:e.bytes)&&r.push({memcmp:{offset:e.offset,bytes:e.bytes}}),null!=(null==e?void 0:e.dataSize)&&r.push({dataSize:e.dataSize}),(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[...r,...Array.isArray(t)?t:[]]})).map(({pubkey:t,account:e})=>({publicKey:t,account:this._coder.accounts.decode(this._idlAccount.name,e.data)}))}subscribe(t,e){const r=Oi.get(t.toString());if(r)return r.ee;const n=new(Mr());t=Kr(t);const i=this._provider.connection.onAccountChange(t,t=>{const e=this._coder.accounts.decode(this._idlAccount.name,t.data);n.emit("change",e)},e);return Oi.set(t.toString(),{ee:n,listener:i}),n}async unsubscribe(t){let e=Oi.get(t.toString());e?Oi&&await this._provider.connection.removeAccountChangeListener(e.listener).then(()=>{Oi.delete(t.toString())}).catch(console.error):console.warn("Address is not subscribed")}async createInstruction(e,r){const n=this.size;if(void 0===this._provider.publicKey)throw new Error("This function requires the Provider interface implementor to have a 'publicKey' field.");return t.SystemProgram.createAccount({fromPubkey:this._provider.publicKey,newAccountPubkey:e.publicKey,space:null!=r?r:n,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(null!=r?r:n),programId:this._programId})}async associated(...t){const e=await this.associatedAddress(...t);return await this.fetch(e)}async associatedAddress(...r){return await function(r,...n){let i=[e.Buffer.from([97,110,99,104,111,114])];n.forEach(t=>{i.push(t instanceof e.Buffer?t:Kr(t).toBuffer())});const[s]=t.PublicKey.findProgramAddressSync(i,Kr(r));return s}(this._programId,...r)}async getAccountInfo(t,e){return await this._provider.connection.getAccountInfo(Kr(t),e)}async getAccountInfoAndContext(t,e){return await this._provider.connection.getAccountInfoAndContext(Kr(t),e)}}const Oi=new Map,Mi="Program log: ";class Ri{constructor(t,e,r){this._programId=t,this._provider=e,this._eventParser=new Li(t,r),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(t,e){var r;let n=this._listenerIdCount;return this._listenerIdCount+=1,this._eventListeners.has(t)||this._eventListeners.set(t,[]),this._eventListeners.set(t,(null!==(r=this._eventListeners.get(t))&&void 0!==r?r:[]).concat(n)),this._eventCallbacks.set(n,[t,e]),void 0!==this._onLogsSubscriptionId||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(t,e)=>{if(!t.err)for(const r of this._eventParser.parseLogs(t.logs)){const n=this._eventListeners.get(r.name);n&&n.forEach(n=>{const i=this._eventCallbacks.get(n);if(i){const[,n]=i;n(r.data,e.slot,t.signature)}})}})),n}async removeEventListener(t){const e=this._eventCallbacks.get(t);if(!e)throw new Error(`Event listener ${t} doesn't exist!`);const[r]=e;let n=this._eventListeners.get(r);if(!n)throw new Error(`Event listeners don't exist for ${r}!`);if(this._eventCallbacks.delete(t),n=n.filter(e=>e!==t),this._eventListeners.set(r,n),0===n.length&&this._eventListeners.delete(r),0===this._eventCallbacks.size){if(0!==this._eventListeners.size)throw new Error(`Expected event listeners size to be 0 but got ${this._eventListeners.size}`);void 0!==this._onLogsSubscriptionId&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0)}}}class Li{constructor(t,e){this.coder=e,this.programId=t}*parseLogs(t,e=!1){const r=new Ui(t),n=new Ci;let i=r.next();for(;null!==i;){let[t,s,o]=this.handleLog(n,i,e);t&&(yield t),s&&n.push(s),o&&n.pop(),i=r.next()}}handleLog(t,e,r){return t.stack.length>0&&t.program()===this.programId.toString()?this.handleProgramLog(e,r):[null,...this.handleSystemLog(e)]}handleProgramLog(t,e){if(t.startsWith(Mi)||t.startsWith("Program data: ")){const r=t.startsWith(Mi)?t.slice(13):t.slice(14),n=this.coder.events.decode(r);if(e&&null===n)throw new Error(`Unable to decode event ${r}`);return[n,null,!1]}return[null,...this.handleSystemLog(t)]}handleSystemLog(t){const e=t.split(":")[0];return null!==e.match(/^Program (.*) success/g)?[null,!0]:e.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:e.includes("invoke")?["cpi",!1]:[null,!1]}}class Ci{constructor(){this.stack=[]}program(){if(!this.stack.length)throw new Error("Expected the stack to have elements");return this.stack[this.stack.length-1]}push(t){this.stack.push(t)}pop(){if(!this.stack.length)throw new Error("Expected the stack to have elements");this.stack.pop()}}class Ui{constructor(t){this.logs=t}next(){if(0===this.logs.length)return null;let t=this.logs[0];return this.logs=this.logs.slice(1),t}}class zi{static build(t,e,r,n,i,s,o){return async(...a)=>{var c;const u=e(...a),[,h]=Ai(t,[...a]);let l;if(void 0===n.simulate)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{l=await n.simulate(u,h.signers,null===(c=h.options)||void 0===c?void 0:c.commitment)}catch(t){throw An(t,r)}if(void 0===l)throw new Error("Unable to simulate transaction");const d=l.logs;if(!d)throw new Error("Simulated logs not found");const f=[];if(o.events){let t=new Li(s,i);for(const e of t.parseLogs(d))f.push(e)}return{events:f,raw:d}}}}function Ni(t){return new Wi(fi(8),t=>Hi.fromBuffer(t),t=>t.toBuffer(),t)}function Ki(e){return new Wi(fi(32),e=>new t.PublicKey(e),t=>t.toBuffer(),e)}function Di(t,e){return new Fi(t,e)}class Wi extends $n{constructor(t,e,r,n){super(t.span,n),this.layout=t,this.decoder=e,this.encoder=r}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,r){return this.layout.encode(this.encoder(t),e,r)}getSpan(t,e){return this.layout.getSpan(t,e)}}class Fi extends $n{constructor(t,e){super(-1,e),this.layout=t,this.discriminator=ui()}encode(t,e,r=0){return null==t?this.layout.span+this.discriminator.encode(0,e,r):(this.discriminator.encode(1,e,r),this.layout.encode(t,e,r+4)+4)}decode(t,e=0){const r=this.discriminator.decode(t,e);if(0===r)return null;if(1===r)return this.layout.decode(t,e+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(t,e=0){return this.layout.getSpan(t,e+4)+4}}class Hi extends(i()){toBuffer(){const t=super.toArray().reverse(),e=Buffer.from(t);if(8===e.length)return e;if(e.length>=8)throw new Error("u64 too large");const r=Buffer.alloc(8);return e.copy(r),r}static fromBuffer(t){if(8!==t.length)throw new Error(`Invalid buffer length: ${t.length}`);return new Hi([...t].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}const qi=li([Ki("mint"),Ki("owner"),Ni("amount"),Di(Ki(),"delegate"),(()=>{const t=di(new Yn(1,"discriminator"),null,"state");return t.addVariant(0,li([]),"uninitialized"),t.addVariant(1,li([]),"initialized"),t.addVariant(2,li([]),"frozen"),t})(),Di(Ni(),"isNative"),Ni("delegatedAmount"),Di(Ki(),"closeAuthority")]);class ji{constructor(t,e,r,n,i,s,o,a){this._accounts=e,this._provider=r,this._programId=n,this._idlIx=i,this._idlTypes=o,this._customResolver=a,this._args=t,this._accountStore=new Vi(r,s,this._programId)}args(t){this._args=t}async resolve(){for(await this.resolveConst(this._idlIx.accounts),this._resolveEventCpi(this._idlIx.accounts);await this.resolvePdas(this._idlIx.accounts)+await this.resolveRelations(this._idlIx.accounts)+await this.resolveCustom()>0;);}async resolveCustom(){if(this._customResolver){const{accounts:t,resolved:e}=await this._customResolver({args:this._args,accounts:this._accounts,provider:this._provider,programId:this._programId,idlIx:this._idlIx});return this._accounts=t,e}return 0}resolveOptionalsHelper(t,e){const r={};for(const n of e){const e=n.name,i=t[e];void 0!==i&&(Zi(i)?Si(n)?r[e]=this.resolveOptionalsHelper(i,n.accounts):r[e]=Gi(i,!0):null!==i?r[e]=Kr(i):n.isOptional&&(r[e]=this._programId))}return r}resolveOptionals(t){Object.assign(this._accounts,this.resolveOptionalsHelper(t,this._idlIx.accounts))}get(t){const e=t.reduce((t,e)=>t&&t[e],this._accounts);if(e&&e.toBase58)return e}set(t,e){let r=this._accounts;t.forEach((n,i)=>{i==t.length-1&&(r[n]=e),r[n]=r[n]||{},r=r[n]})}async resolveConst(t,e=[]){for(let r=0;r<t.length;r+=1){const n=t[r],i=n.accounts;i&&await this.resolveConst(i,[...e,c()(n.name)]);const s=n,o=c()(n.name);if(s.isSigner&&!this.get([...e,o])){if(void 0===this._provider.wallet)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this.set([...e,o],this._provider.wallet.publicKey)}Reflect.has(ji.CONST_ACCOUNTS,o)&&!this.get([...e,o])&&this.set([...e,o],ji.CONST_ACCOUNTS[o])}}_resolveEventCpi(e,r=[]){for(const n in e){const i=e[n],s=i.accounts;s&&this._resolveEventCpi(s,[...r,c()(i.name)]);const o=+n+1;if(o===e.length)return;const a=c()(e[n].name),u=c()(e[o].name);if("eventAuthority"===a&&"program"===u){const e=[...r,a],n=[...r,u];return this.get(e)||this.set(e,t.PublicKey.findProgramAddressSync([Buffer.from("__event_authority")],this._programId)[0]),void(this.get(n)||this.set(n,this._programId))}}}async resolvePdas(t,e=[]){let r=0;for(let n=0;n<t.length;n+=1){const i=t[n],s=i.accounts;s&&(r+=await this.resolvePdas(s,[...e,c()(i.name)]));const o=i,a=c()(i.name);o.pda&&o.pda.seeds.length>0&&!this.get([...e,a])&&Boolean(await this.autoPopulatePda(o,e))&&(r+=1)}return r}async resolveRelations(t,e=[]){let r=0;for(let n=0;n<t.length;n+=1){const i=t[n],s=i.accounts;s&&(r+=await this.resolveRelations(s,[...e,c()(i.name)]));const o=i.relations||[],a=c()(i.name),u=[...e,a],h=this.get(u);if(h){const t=o.filter(t=>!this.get([...e,c()(t)]));if(r+=t.length,t.length>0){const r=await this._accountStore.fetchAccount({publicKey:h});await Promise.all(t.map(async t=>{const n=c()(t);return this.set([...e,n],r[n]),r[n]}))}}}return r}async autoPopulatePda(e,r=[]){if(!e.pda||!e.pda.seeds)throw new Error("Must have seeds");const n=await Promise.all(e.pda.seeds.map(t=>this.toBuffer(t,r)));if(n.some(t=>void 0===t))return;const i=await this.parseProgramId(e,r);if(!i)return;const[s]=await t.PublicKey.findProgramAddress(n,i);this.set([...r,c()(e.name)],s)}async parseProgramId(e,r=[]){var n;if(!(null===(n=e.pda)||void 0===n?void 0:n.programId))return this._programId;switch(e.pda.programId.kind){case"const":return new t.PublicKey(this.toBufferConst(e.pda.programId.value));case"arg":return this.argValue(e.pda.programId);case"account":return await this.accountValue(e.pda.programId,r);default:throw new Error(`Unexpected program seed kind: ${e.pda.programId.kind}`)}}async toBuffer(t,e=[]){switch(t.kind){case"const":return this.toBufferConst(t);case"arg":return await this.toBufferArg(t);case"account":return await this.toBufferAccount(t,e);default:throw new Error(`Unexpected seed kind: ${t.kind}`)}}getType(t,e=[]){if(e.length>0&&t.defined){const r=this._idlTypes.find(e=>e.name===t.defined);if(!r)throw new Error(`Cannot find type ${t.defined}`);const n=r.type.fields.find(t=>t.name===e[0]);return this.getType(n.type,e.slice(1))}return t}toBufferConst(t){return this.toBufferValue(this.getType(t.type,(t.path||"").split(".").slice(1)),t.value)}async toBufferArg(t){const e=this.argValue(t);if(void 0!==e)return this.toBufferValue(this.getType(t.type,(t.path||"").split(".").slice(1)),e)}argValue(t){const e=t.path.split("."),r=c()(e[0]),n=this._idlIx.args.findIndex(t=>t.name===r);if(-1===n)throw new Error(`Unable to find argument for seed: ${r}`);return e.slice(1).reduce((t,e)=>(t||{})[e],this._args[n])}async toBufferAccount(t,e=[]){const r=await this.accountValue(t,e);if(r)return this.toBufferValue(t.type,r)}async accountValue(t,e=[]){const r=t.path.split("."),n=r[0],i=this.get([...e,c()(n)]);if(null===i)throw new Error("fieldPubkey is null");if(1===r.length)return i;const s=await this._accountStore.fetchAccount({publicKey:i,name:t.account});return this.parseAccountValue(s,r.slice(1))}parseAccountValue(t,e){let r;for(;e.length>0;)r=t[c()(e[0])],e=e.slice(1);return r}toBufferValue(t,e){switch(t){case"u8":return Buffer.from([e]);case"u16":let n=Buffer.alloc(2);return n.writeUInt16LE(e),n;case"u32":let i=Buffer.alloc(4);return i.writeUInt32LE(e),i;case"u64":let s=Buffer.alloc(8);return s.writeBigUInt64LE(BigInt(e)),s;case"string":return Buffer.from((r=e,(new TextEncoder).encode(r)));case"publicKey":return e.toBuffer();default:if(t.array)return Buffer.from(e);throw new Error(`Unexpected seed type: ${t}`)}var r}}ji.CONST_ACCOUNTS={associatedTokenProgram:_i,rent:t.SYSVAR_RENT_PUBKEY,systemProgram:t.SystemProgram.programId,tokenProgram:vi,clock:t.SYSVAR_CLOCK_PUBKEY};class Vi{constructor(t,e,r){this._provider=t,this._programId=r,this._cache=new Map,this._idls={},this._idls[r.toBase58()]=e}async ensureIdl(t){if(!this._idls[t.toBase58()]){const e=await Qi.fetchIdl(t,this._provider);if(e){const r=new Qi(e,t,this._provider);this._idls[t.toBase58()]=r.account}}return this._idls[t.toBase58()]}async fetchAccount({publicKey:t,name:e,programId:r=this._programId}){const n=t.toString();if(!this._cache.has(n))if("TokenAccount"===e){const e=await this._provider.connection.getAccountInfo(t);if(null===e)throw new Error(`invalid account info for ${n}`);const r=(i=e.data,qi.decode(i));this._cache.set(n,r)}else if(e){const i=await this.ensureIdl(r);if(i){const r=i[c()(e)];if(r){const e=await r.fetch(t);this._cache.set(n,e)}}}else{const e=await this._provider.connection.getAccountInfo(t);if(null===e)throw new Error(`invalid account info for ${n}`);const r=e.data,i=await this.ensureIdl(e.owner);if(i){const t=Object.values(i)[0];if(!t)throw new Error("No accounts for this program");const e=t.coder.accounts.decodeAny(r);this._cache.set(n,e)}}var i;return this._cache.get(n)}}class $i{static build(t,e,r,n,i,s,o,a,c,u,h){return(...l)=>new Yi(l,n,i,s,o,a,t,e,r,c,u,h)}}function Zi(t){return"object"==typeof t&&null!==t&&!("_bn"in t)}function Gi(t,e){const r={};for(const n in t){const i=t[n];if(null!==i)r[n]=Zi(i)?Gi(i,!0):Kr(i);else if(e)throw new Error("Failed to resolve optionals due to IDL type mismatch with input accounts!")}return r}class Yi{constructor(t,e,r,n,i,s,o,a,c,u,h,l){this._ixFn=e,this._txFn=r,this._rpcFn=n,this._simulateFn=i,this._viewFn=s,this._programId=a,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._autoResolveAccounts=!0,this._args=t,this._accountsResolver=new ji(t,this._accounts,o,a,c,u,h,l)}args(t){this._args=t,this._accountsResolver.args(t)}async pubkeys(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._accounts}accounts(t){return this._autoResolveAccounts=!0,this._accountsResolver.resolveOptionals(t),this}accountsStrict(t){return this._autoResolveAccounts=!1,this._accountsResolver.resolveOptionals(t),this}signers(t){return this._signers=this._signers.concat(t),this}remainingAccounts(t){return this._remainingAccounts=this._remainingAccounts.concat(t),this}preInstructions(t){return this._preInstructions=this._preInstructions.concat(t),this}postInstructions(t){return this._postInstructions=this._postInstructions.concat(t),this}async rpc(t){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async rpcAndKeys(t){return{pubkeys:await this.pubkeys(),signature:await this.rpc(t)}}async view(t){if(this._autoResolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async simulate(t){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async instruction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async prepare(){return{instruction:await this.instruction(),pubkeys:await this.pubkeys(),signers:await this._signers}}async transaction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class Ji{static build(t,e,r,n){const i=e.accounts.find(t=>t.isMut),s=!!e.returns;if(!i&&s)return async(...i)=>{var s,o;let a=await r(...i);const c=`Program return: ${t} `;let u=a.raw.find(t=>t.startsWith(c));if(!u)throw new Error("View expected return log");let h=Ur(u.slice(c.length)),l=e.returns;if(!l)throw new Error("View expected return type");return Rn.fieldLayout({type:l},Array.from([...null!==(s=n.accounts)&&void 0!==s?s:[],...null!==(o=n.types)&&void 0!==o?o:[]])).decode(h)}}}class Xi{static build(t,e,r,n,i){const s={},o={},a={},u={},h={},l={},d=function(t){const e=new Map;return t.errors&&t.errors.forEach(t=>{var r;let n=null!==(r=t.msg)&&void 0!==r?r:t.name;e.set(t.code,n)}),e}(t),f=t.accounts?Pi.build(t,e,r,n):{};return t.instructions.forEach(p=>{const g=Ii.build(p,(t,r)=>e.instruction.encode(t,r),r),y=xi.build(p,g),m=Bi.build(p,y,d,n),w=zi.build(p,y,d,n,e,r,t),b=Ji.build(r,p,w,t),v=$i.build(n,r,p,g,y,m,w,b,f,t.types||[],i&&i(p)),_=c()(p.name);o[_]=g,a[_]=y,s[_]=m,u[_]=w,h[_]=v,b&&(l[_]=b)}),[s,o,a,f,u,h,l]}}class Qi{get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}constructor(t,e,r,n,i){e=Kr(e),r||(r=mn()),this._idl=t,this._provider=r,this._programId=e,this._coder=null!=n?n:new qn(t),this._events=new Ri(this._programId,r,this._coder);const[s,o,a,c,u,h,l]=Xi.build(t,this._coder,e,r,null!=i?i:()=>{});this.rpc=s,this.instruction=o,this.transaction=a,this.account=c,this.simulate=u,this.methods=h,this.views=l}static async at(t,e){const r=Kr(t),n=await Qi.fetchIdl(r,e);if(!n)throw new Error(`IDL not found for program: ${t.toString()}`);return new Qi(n,r,e)}static async fetchIdl(e,r){r=null!=r?r:mn();const n=Kr(e),i=await async function(e){const r=(await t.PublicKey.findProgramAddress([],e))[0];return await t.PublicKey.createWithSeed(r,"anchor:idl",e)}(n),s=await r.connection.getAccountInfo(i);if(!s)return null;let o=(a=s.data.slice(8),Ei.decode(a));var a;const c=Tr(o.data);return JSON.parse(function(t){return new TextDecoder("utf-8").decode(t)}(c))}addEventListener(t,e){return this._events.addEventListener(t,e)}async removeEventListener(t){return await this._events.removeEventListener(t)}}function ts(t){return ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ts(t)}function es(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,s,o,a=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){u=!0,i=t}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}(t,e)||ns(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rs(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=ns(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw s}}}}function ns(t,e){if(t){if("string"==typeof t)return is(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?is(t,e):void 0}}function is(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function ss(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,i,s){var c=n&&n.prototype instanceof a?n:a,u=Object.create(c.prototype);return os(u,"_invoke",function(r,n,i){var s,a,c,u=0,h=i||[],l=!1,d={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,r){return s=e,a=0,c=t,d.n=r,o}};function f(r,n){for(a=r,c=n,e=0;!l&&u&&!i&&e<h.length;e++){var i,s=h[e],f=d.p,p=s[2];r>3?(i=p===n)&&(c=s[(a=s[4])?5:(a=3,3)],s[4]=s[5]=t):s[0]<=f&&((i=r<2&&f<s[1])?(a=0,d.v=n,d.n=s[1]):f<p&&(i=r<3||s[0]>n||n>p)&&(s[4]=r,s[5]=n,d.n=p,a=0))}if(i||r>1)return o;throw l=!0,n}return function(i,h,p){if(u>1)throw TypeError("Generator is already running");for(l&&1===h&&f(h,p),a=h,c=p;(e=a<2?t:c)||!l;){s||(a?a<3?(a>1&&(d.n=-1),f(a,c)):d.n=c:d.v=c);try{if(u=2,s){if(a||(i="next"),e=s[i]){if(!(e=e.call(s,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,a<2&&(a=0)}else 1===a&&(e=s.return)&&e.call(s),a<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),a=1);s=t}else if((e=(l=d.n<0)?c:r.call(n,d))!==o)break}catch(e){s=t,a=1,c=e}finally{u=1}}return{value:e,done:l}}}(r,i,s),!0),u}var o={};function a(){}function c(){}function u(){}e=Object.getPrototypeOf;var h=[][n]?e(e([][n]())):(os(e={},n,function(){return this}),e),l=u.prototype=a.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,os(t,i,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=u,os(l,"constructor",u),os(u,"constructor",c),c.displayName="GeneratorFunction",os(u,i,"GeneratorFunction"),os(l),os(l,i,"Generator"),os(l,n,function(){return this}),os(l,"toString",function(){return"[object Generator]"}),(ss=function(){return{w:s,m:d}})()}function os(t,e,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}os=function(t,e,r,n){function s(e,r){os(t,e,function(t){return this._invoke(e,r,t)})}e?i?i(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(s("next",0),s("throw",1),s("return",2))},os(t,e,r,n)}function as(t,e,r,n,i,s,o){try{var a=t[s](o),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,i)}function cs(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var s=t.apply(e,r);function o(t){as(s,n,i,o,a,"next",t)}function a(t){as(s,n,i,o,a,"throw",t)}o(void 0)})}}function us(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hs(n.key),n)}}function hs(t){var e=function(t){if("object"!=ts(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=ts(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ts(e)?e:e+""}new t.PublicKey("11111111111111111111111111111111");var ls=function(){return e=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.connection=null,this.wallet=null,this.network="devnet",this.program=null,this.isConnected=!1,this.keeperBot=null,this.init()},r=[{key:"init",value:(B=cs(ss().m(function t(){return ss().w(function(t){for(;;)switch(t.n){case 0:return console.log("gado Wallet Background Service Worker starting..."),t.n=1,this.loadSettings();case 1:return t.n=2,this.setupConnection();case 2:this.setupMessageListeners(),this.setupPeriodicTasks(),console.log(" Background service worker initialized");case 3:return t.a(2)}},t,this)})),function(){return B.apply(this,arguments)})},{key:"loadSettings",value:(x=cs(ss().m(function e(){var r,n,i;return ss().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,chrome.storage.local.get(["wallet","network","privateKey","isConnected"]);case 1:if(r=e.v,this.network=r.network||"devnet",this.isConnected=r.isConnected||!1,!r.privateKey||!r.wallet){e.n=4;break}e.p=2,n=new Uint8Array(JSON.parse(r.privateKey)),this.wallet={keypair:t.Keypair.fromSecretKey(n),publicKey:r.wallet.publicKey},this.isConnected=!0,console.log(" Wallet restored from storage"),e.n=4;break;case 3:return e.p=3,i=e.v,console.error("Failed to restore wallet:",i),e.n=4,this.clearWallet();case 4:return e.a(2)}},e,this,[[2,3]])})),function(){return x.apply(this,arguments)})},{key:"setupConnection",value:(I=cs(ss().m(function e(){var r;return ss().w(function(e){for(;;)switch(e.n){case 0:if(r=this.getRpcUrl(this.network),this.connection=new t.Connection(r,"confirmed"),!this.isConnected||!this.wallet){e.n=1;break}return e.n=1,this.setupProgram();case 1:console.log(" Connected to ".concat(this.network,": ").concat(r));case 2:return e.a(2)}},e,this)})),function(){return I.apply(this,arguments)})},{key:"setupProgram",value:(A=cs(ss().m(function t(){var e,r,n,i,s=this;return ss().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,fetch(chrome.runtime.getURL("idl/gado.json"));case 1:return e=t.v,t.n=2,e.json();case 2:r=t.v,n=new fn(this.connection,{publicKey:this.wallet.keypair.publicKey,signTransaction:function(){var t=cs(ss().m(function t(e){return ss().w(function(t){for(;;)if(0===t.n)return e.partialSign(s.wallet.keypair),t.a(2,e)},t)}));return function(e){return t.apply(this,arguments)}}(),signAllTransactions:function(){var t=cs(ss().m(function t(e){return ss().w(function(t){for(;;)if(0===t.n)return e.forEach(function(t){return t.partialSign(s.wallet.keypair)}),t.a(2,e)},t)}));return function(e){return t.apply(this,arguments)}}()},{commitment:"confirmed"}),this.program=new Qi(r,n),console.log(" Anchor program setup complete"),t.n=4;break;case 3:t.p=3,i=t.v,console.error("Failed to setup program:",i);case 4:return t.a(2)}},t,this,[[0,3]])})),function(){return A.apply(this,arguments)})},{key:"setupMessageListeners",value:function(){var t=this;chrome.runtime.onMessage.addListener(function(e,r,n){return t.handleMessage(e,r,n),!0})}},{key:"handleMessage",value:(E=cs(ss().m(function t(e,r,n){var i,s;return ss().w(function(t){for(;;)switch(t.p=t.n){case 0:t.p=0,i=e.type,t.n="CONNECT_WALLET"===i?1:"GET_WALLET_STATUS"===i?3:"SWITCH_NETWORK"===i?5:"GET_BALANCE"===i?7:"SEND_TRANSACTION"===i?9:"GET_INHERITANCE_STATS"===i?11:"GET_INHERITANCES"===i?13:"GET_TRANSACTIONS"===i?15:"GET_RECENT_ACTIVITY"===i?17:"GET_KEEPER_STATUS"===i?19:"UPDATE_ACTIVITY"===i?21:"CANCEL_INHERITANCE"===i?23:"EXPORT_WALLET"===i?25:"RESET_WALLET"===i?27:"CREATE_INHERITANCE"===i?29:31;break;case 1:return t.n=2,this.connectWallet(e.network,n);case 2:return t.a(3,32);case 3:return t.n=4,this.getWalletStatus(n);case 4:return t.a(3,32);case 5:return t.n=6,this.switchNetwork(e.network,n);case 6:return t.a(3,32);case 7:return t.n=8,this.getBalance(n);case 8:return t.a(3,32);case 9:return t.n=10,this.sendTransaction(e,n);case 10:return t.a(3,32);case 11:return t.n=12,this.getInheritanceStats(n);case 12:return t.a(3,32);case 13:return t.n=14,this.getInheritances(n);case 14:return t.a(3,32);case 15:return t.n=16,this.getTransactions(e.limit,n);case 16:return t.a(3,32);case 17:return t.n=18,this.getRecentActivity(e.limit,n);case 18:return t.a(3,32);case 19:return t.n=20,this.getKeeperStatus(n);case 20:return t.a(3,32);case 21:return t.n=22,this.updateActivity(e.inheritanceAddress,n);case 22:return t.a(3,32);case 23:return t.n=24,this.cancelInheritance(e.inheritanceAddress,n);case 24:return t.a(3,32);case 25:return t.n=26,this.exportWallet(n);case 26:return t.a(3,32);case 27:return t.n=28,this.resetWallet(n);case 28:return t.a(3,32);case 29:return t.n=30,this.createInheritance(e,n);case 30:return t.a(3,32);case 31:n({success:!1,error:"Unknown message type"});case 32:t.n=34;break;case 33:t.p=33,s=t.v,console.error("Message handling error:",s),n({success:!1,error:s.message});case 34:return t.a(2)}},t,this,[[0,33]])})),function(t,e,r){return E.apply(this,arguments)})},{key:"connectWallet",value:(S=cs(ss().m(function e(r,n){var i,s,o,a;return ss().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,chrome.storage.local.get(["privateKey"]);case 1:if(!(s=e.v).privateKey){e.n=2;break}o=new Uint8Array(JSON.parse(s.privateKey)),i=t.Keypair.fromSecretKey(o),e.n=3;break;case 2:return i=t.Keypair.generate(),e.n=3,chrome.storage.local.set({privateKey:JSON.stringify(Array.from(i.secretKey))});case 3:return this.wallet={keypair:i,publicKey:i.publicKey.toString()},this.network=r,this.isConnected=!0,e.n=4,this.setupConnection();case 4:return e.n=5,chrome.storage.local.set({wallet:{publicKey:this.wallet.publicKey},network:this.network,isConnected:!0});case 5:n({success:!0,wallet:{publicKey:this.wallet.publicKey},network:this.network}),console.log(" Wallet connected:",this.wallet.publicKey),e.n=7;break;case 6:e.p=6,a=e.v,console.error("Wallet connection error:",a),n({success:!1,error:a.message});case 7:return e.a(2)}},e,this,[[0,6]])})),function(t,e){return S.apply(this,arguments)})},{key:"getWalletStatus",value:(k=cs(ss().m(function t(e){return ss().w(function(t){for(;;)switch(t.n){case 0:e({success:!0,isConnected:this.isConnected,wallet:this.wallet?{publicKey:this.wallet.publicKey}:null,network:this.network});case 1:return t.a(2)}},t,this)})),function(t){return k.apply(this,arguments)})},{key:"switchNetwork",value:(_=cs(ss().m(function t(e,r){var n;return ss().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,this.network=e,t.n=1,this.setupConnection();case 1:return t.n=2,chrome.storage.local.set({network:this.network});case 2:r({success:!0,network:this.network}),console.log(" Switched to network: ".concat(e)),t.n=4;break;case 3:t.p=3,n=t.v,console.error("Network switch error:",n),r({success:!1,error:n.message});case 4:return t.a(2)}},t,this,[[0,3]])})),function(t,e){return _.apply(this,arguments)})},{key:"getBalance",value:(v=cs(ss().m(function e(r){var n,i,s;return ss().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,this.isConnected&&this.wallet){e.n=1;break}throw new Error("Wallet not connected");case 1:return e.n=2,this.connection.getBalance(this.wallet.keypair.publicKey);case 2:n=e.v,i=n/t.LAMPORTS_PER_SOL,r({success:!0,balance:i,lamports:n}),e.n=4;break;case 3:e.p=3,s=e.v,console.error("Balance fetch error:",s),r({success:!1,error:s.message});case 4:return e.a(2)}},e,this,[[0,3]])})),function(t){return v.apply(this,arguments)})},{key:"sendTransaction",value:(b=cs(ss().m(function e(r,n){var i,s,o,a,c,u,h,l,d,f,p;return ss().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,this.isConnected&&this.wallet){e.n=1;break}throw new Error("Wallet not connected");case 1:return i=r.to,s=r.amount,o=r.memo,a=new t.PublicKey(i),c=Math.floor(s*t.LAMPORTS_PER_SOL),u=(new t.Transaction).add(t.SystemProgram.transfer({fromPubkey:this.wallet.keypair.publicKey,toPubkey:a,lamports:c})),o&&(h=new t.TransactionInstruction({keys:[],programId:new t.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),data:Buffer.from(o,"utf8")}),u.add(h)),e.n=2,this.connection.getLatestBlockhash();case 2:return l=e.v,d=l.blockhash,u.recentBlockhash=d,u.feePayer=this.wallet.keypair.publicKey,e.n=3,this.connection.sendTransaction(u,[this.wallet.keypair]);case 3:return f=e.v,e.n=4,this.connection.confirmTransaction(f,"confirmed");case 4:return e.n=5,this.storeTransaction({signature:f,type:"send",amount:-c,to:i,memo:o,timestamp:Math.floor(Date.now()/1e3),status:"confirmed"});case 5:n({success:!0,signature:f}),console.log(" Transaction sent:",f),e.n=7;break;case 6:e.p=6,p=e.v,console.error("Send transaction error:",p),n({success:!1,error:p.message});case 7:return e.a(2)}},e,this,[[0,6]])})),function(t,e){return b.apply(this,arguments)})},{key:"getInheritanceStats",value:(w=cs(ss().m(function e(r){var n,i,s,o,a,c,u;return ss().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,this.program){e.n=1;break}return r({success:!0,stats:{totalHeirs:0,protectedSOL:0,solInheritances:0,tokenInheritances:0}}),e.a(2);case 1:return e.n=2,this.program.account.solHeir.all([{memcmp:{offset:8,bytes:this.wallet.keypair.publicKey.toBase58()}}]);case 2:return n=e.v,e.n=3,this.program.account.tokenHeir.all([{memcmp:{offset:8,bytes:this.wallet.keypair.publicKey.toBase58()}}]);case 3:i=e.v,s=0,o=rs(n);try{for(o.s();!(a=o.n()).done;)(c=a.value).account.isClaimed||(s+=c.account.amount.toNumber()/t.LAMPORTS_PER_SOL)}catch(t){o.e(t)}finally{o.f()}r({success:!0,stats:{totalHeirs:n.length+i.length,protectedSOL:s,solInheritances:n.length,tokenInheritances:i.length}}),e.n=5;break;case 4:e.p=4,u=e.v,console.error("Inheritance stats error:",u),r({success:!1,error:u.message});case 5:return e.a(2)}},e,this,[[0,4]])})),function(t){return w.apply(this,arguments)})},{key:"getInheritances",value:(m=cs(ss().m(function t(e){var r,n,i,s,o;return ss().w(function(t){for(;;)switch(t.p=t.n){case 0:if(t.p=0,this.program){t.n=1;break}return e({success:!0,inheritances:{sol:[],tokens:[]}}),t.a(2);case 1:return t.n=2,this.program.account.solHeir.all([{memcmp:{offset:8,bytes:this.wallet.keypair.publicKey.toBase58()}}]);case 2:return r=t.v,t.n=3,this.program.account.tokenHeir.all([{memcmp:{offset:8,bytes:this.wallet.keypair.publicKey.toBase58()}}]);case 3:n=t.v,i=function(t){return{address:t.publicKey.toString(),owner:t.account.owner.toString(),heir:t.account.heir.toString(),amount:t.account.amount.toNumber(),inactivityPeriodSeconds:t.account.inactivityPeriodSeconds.toNumber(),lastActivity:t.account.lastActivity.toNumber(),isClaimed:t.account.isClaimed}},s=function(t){return{address:t.publicKey.toString(),owner:t.account.owner.toString(),heir:t.account.heir.toString(),tokenMint:t.account.tokenMint.toString(),amount:t.account.amount.toNumber(),inactivityPeriodSeconds:t.account.inactivityPeriodSeconds.toNumber(),lastActivity:t.account.lastActivity.toNumber(),isClaimed:t.account.isClaimed}},e({success:!0,inheritances:{sol:r.map(i),tokens:n.map(s)}}),t.n=5;break;case 4:t.p=4,o=t.v,console.error("Get inheritances error:",o),e({success:!1,error:o.message});case 5:return t.a(2)}},t,this,[[0,4]])})),function(t){return m.apply(this,arguments)})},{key:"getTransactions",value:(y=cs(ss().m(function t(e,r){var n,i,s,o;return ss().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,chrome.storage.local.get(["transactions"]);case 1:n=t.v,i=n.transactions||[],s=i.sort(function(t,e){return e.timestamp-t.timestamp}).slice(0,e||20),r({success:!0,transactions:s}),t.n=3;break;case 2:t.p=2,o=t.v,console.error("Get transactions error:",o),r({success:!1,error:o.message});case 3:return t.a(2)}},t,null,[[0,2]])})),function(t,e){return y.apply(this,arguments)})},{key:"getRecentActivity",value:(g=cs(ss().m(function t(e,r){var n,i,s,o;return ss().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,chrome.storage.local.get(["activities"]);case 1:n=t.v,i=n.activities||[],s=i.sort(function(t,e){return e.timestamp-t.timestamp}).slice(0,e||5),r({success:!0,activities:s}),t.n=3;break;case 2:t.p=2,o=t.v,console.error("Get recent activity error:",o),r({success:!1,error:o.message});case 3:return t.a(2)}},t,null,[[0,2]])})),function(t,e){return g.apply(this,arguments)})},{key:"getKeeperStatus",value:(p=cs(ss().m(function e(r){var n,i,s,o,a;return ss().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,n={isRunning:!0,totalSolHeirs:0,totalTokenHeirs:0,eligibleSolHeirs:0,eligibleTokenHeirs:0,totalSolValue:0,checkInterval:5},!this.program){e.n=3;break}return e.n=1,this.program.account.solHeir.all();case 1:return i=e.v,e.n=2,this.program.account.tokenHeir.all();case 2:s=e.v,n.totalSolHeirs=i.length,n.totalTokenHeirs=s.length,o=Math.floor(Date.now()/1e3),n.eligibleSolHeirs=i.filter(function(t){return o-t.account.lastActivity.toNumber()>t.account.inactivityPeriodSeconds.toNumber()&&!t.account.isClaimed}).length,n.eligibleTokenHeirs=s.filter(function(t){return o-t.account.lastActivity.toNumber()>t.account.inactivityPeriodSeconds.toNumber()&&!t.account.isClaimed}).length,n.totalSolValue=i.reduce(function(e,r){return e+r.account.amount.toNumber()/t.LAMPORTS_PER_SOL},0);case 3:r({success:!0,status:n}),e.n=5;break;case 4:e.p=4,a=e.v,console.error("Keeper status error:",a),r({success:!1,error:a.message});case 5:return e.a(2)}},e,this,[[0,4]])})),function(t){return p.apply(this,arguments)})},{key:"updateActivity",value:(f=cs(ss().m(function e(r,n){var i,s,o,a;return ss().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,this.program){e.n=1;break}throw new Error("Program not initialized");case 1:return i=new t.PublicKey(r),e.p=2,e.n=3,this.program.account.solHeir.fetch(i);case 3:return e.v,e.n=4,this.program.methods.updateActivity().accounts({solHeir:i,owner:this.wallet.keypair.publicKey}).rpc();case 4:return s=e.v,e.n=5,this.storeActivity({type:"activity_update",title:"Activity Updated",subtitle:"SOL inheritance activity updated",timestamp:Math.floor(Date.now()/1e3)});case 5:return n({success:!0,signature:s}),e.a(2);case 6:return e.p=6,e.v,e.p=7,e.n=8,this.program.account.tokenHeir.fetch(i);case 8:return e.v,e.n=9,this.program.methods.updateTokenActivity().accounts({tokenHeir:i,owner:this.wallet.keypair.publicKey}).rpc();case 9:return o=e.v,e.n=10,this.storeActivity({type:"activity_update",title:"Activity Updated",subtitle:"Token inheritance activity updated",timestamp:Math.floor(Date.now()/1e3)});case 10:return n({success:!0,signature:o}),e.a(2);case 11:throw e.p=11,e.v,new Error("Inheritance not found");case 12:e.p=12,a=e.v,console.error("Update activity error:",a),n({success:!1,error:a.message});case 13:return e.a(2)}},e,this,[[7,11],[2,6],[0,12]])})),function(t,e){return f.apply(this,arguments)})},{key:"cancelInheritance",value:(d=cs(ss().m(function e(r,n){var i,s,o,a,c,u,h,l,d,f,p;return ss().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,this.program){e.n=1;break}throw new Error("Program not initialized");case 1:return i=new t.PublicKey(r),e.p=2,e.n=3,this.program.account.solHeir.fetch(i);case 3:return e.v,e.n=4,this.program.methods.cancelSolInheritance().accounts({solHeir:i,owner:this.wallet.keypair.publicKey,systemProgram:t.SystemProgram.programId}).rpc();case 4:return s=e.v,e.n=5,this.storeActivity({type:"inheritance_cancel",title:"Inheritance Cancelled",subtitle:"SOL inheritance cancelled and funds returned",timestamp:Math.floor(Date.now()/1e3)});case 5:return n({success:!0,signature:s}),e.a(2);case 6:return e.p=6,e.v,e.p=7,e.n=8,this.program.account.tokenHeir.fetch(i);case 8:return o=e.v,a=t.PublicKey.findProgramAddressSync([i.toBuffer(),new t.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA").toBuffer(),o.tokenMint.toBuffer()],new t.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL")),c=es(a,1),u=c[0],h=t.PublicKey.findProgramAddressSync([this.wallet.keypair.publicKey.toBuffer(),new t.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA").toBuffer(),o.tokenMint.toBuffer()],new t.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL")),l=es(h,1),d=l[0],e.n=9,this.program.methods.cancelTokenInheritance().accounts({tokenHeir:i,escrowTokenAccount:u,ownerTokenAccount:d,tokenMint:o.tokenMint,owner:this.wallet.keypair.publicKey,tokenProgram:new t.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),associatedTokenProgram:new t.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),systemProgram:t.SystemProgram.programId}).rpc();case 9:return f=e.v,e.n=10,this.storeActivity({type:"inheritance_cancel",title:"Inheritance Cancelled",subtitle:"Token inheritance cancelled and tokens returned",timestamp:Math.floor(Date.now()/1e3)});case 10:return n({success:!0,signature:f}),e.a(2);case 11:throw e.p=11,e.v,new Error("Inheritance not found");case 12:e.p=12,p=e.v,console.error("Cancel inheritance error:",p),n({success:!1,error:p.message});case 13:return e.a(2)}},e,this,[[7,11],[2,6],[0,12]])})),function(t,e){return d.apply(this,arguments)})},{key:"exportWallet",value:(l=cs(ss().m(function t(e){var r,n,i;return ss().w(function(t){for(;;)switch(t.p=t.n){case 0:if(t.p=0,this.wallet){t.n=1;break}throw new Error("No wallet to export");case 1:r=Array.from(this.wallet.keypair.secretKey),n=JSON.stringify(r),e({success:!0,privateKey:n}),t.n=3;break;case 2:t.p=2,i=t.v,console.error("Export wallet error:",i),e({success:!1,error:i.message});case 3:return t.a(2)}},t,this,[[0,2]])})),function(t){return l.apply(this,arguments)})},{key:"resetWallet",value:(h=cs(ss().m(function t(e){var r;return ss().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.clearWallet();case 1:e({success:!0}),t.n=3;break;case 2:t.p=2,r=t.v,console.error("Reset wallet error:",r),e({success:!1,error:r.message});case 3:return t.a(2)}},t,this,[[0,2]])})),function(t){return h.apply(this,arguments)})},{key:"createInheritance",value:(u=cs(ss().m(function e(r,n){var s,o,a,c,u,h,l,d,f,p,g,y,m,w,b,v,_,k,S,E,A,I,x,B;return ss().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,this.program){e.n=1;break}throw new Error("Program not initialized");case 1:if(s=r.type,o=r.heirAddress,a=r.amount,c=r.inactivityDays,u=r.tokenMint,h=new t.PublicKey(o),l=24*c*60*60,"SOL"!==s){e.n=4;break}return d=Math.floor(a*t.LAMPORTS_PER_SOL),f=t.PublicKey.findProgramAddressSync([Buffer.from("sol_heir"),this.wallet.keypair.publicKey.toBuffer(),h.toBuffer()],this.program.programId),p=es(f,1),g=p[0],e.n=2,this.program.methods.createSolHeir(h,new(i())(d),new(i())(l)).accounts({solHeir:g,owner:this.wallet.keypair.publicKey,systemProgram:t.SystemProgram.programId}).rpc();case 2:return y=e.v,e.n=3,this.storeActivity({type:"heir_setup",title:"SOL Inheritance Created",subtitle:"".concat(a," SOL inheritance set up for ").concat(o.slice(0,8),"..."),timestamp:Math.floor(Date.now()/1e3)});case 3:n({success:!0,signature:y,heirAddress:g.toString()}),e.n=7;break;case 4:if("TOKEN"!==s){e.n=7;break}return m=new t.PublicKey(u),w=t.PublicKey.findProgramAddressSync([Buffer.from("token_heir"),this.wallet.keypair.publicKey.toBuffer(),h.toBuffer(),m.toBuffer()],this.program.programId),b=es(w,1),v=b[0],_=t.PublicKey.findProgramAddressSync([this.wallet.keypair.publicKey.toBuffer(),new t.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA").toBuffer(),m.toBuffer()],new t.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL")),k=es(_,1),S=k[0],E=t.PublicKey.findProgramAddressSync([v.toBuffer(),new t.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA").toBuffer(),m.toBuffer()],new t.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL")),A=es(E,1),I=A[0],e.n=5,this.program.methods.createTokenHeir(h,new(i())(a),new(i())(l)).accounts({tokenHeir:v,ownerTokenAccount:S,escrowTokenAccount:I,tokenMint:m,owner:this.wallet.keypair.publicKey,tokenProgram:new t.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),associatedTokenProgram:new t.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),systemProgram:t.SystemProgram.programId}).rpc();case 5:return x=e.v,e.n=6,this.storeActivity({type:"heir_setup",title:"Token Inheritance Created",subtitle:"".concat(a," tokens inheritance set up for ").concat(o.slice(0,8),"..."),timestamp:Math.floor(Date.now()/1e3)});case 6:n({success:!0,signature:x,heirAddress:v.toString()});case 7:e.n=9;break;case 8:e.p=8,B=e.v,console.error("Create inheritance error:",B),n({success:!1,error:B.message});case 9:return e.a(2)}},e,this,[[0,8]])})),function(t,e){return u.apply(this,arguments)})},{key:"getRpcUrl",value:function(t){switch(t){case"mainnet-beta":return"https://api.mainnet-beta.solana.com";case"testnet":return"https://api.testnet.solana.com";default:return"https://api.devnet.solana.com"}}},{key:"storeTransaction",value:(c=cs(ss().m(function t(e){var r,n;return ss().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,chrome.storage.local.get(["transactions"]);case 1:return r=t.v,(n=r.transactions||[]).unshift(e),n.length>100&&n.splice(100),t.n=2,chrome.storage.local.set({transactions:n});case 2:return t.a(2)}},t)})),function(t){return c.apply(this,arguments)})},{key:"storeActivity",value:(a=cs(ss().m(function t(e){var r,n;return ss().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,chrome.storage.local.get(["activities"]);case 1:return r=t.v,(n=r.activities||[]).unshift(e),n.length>50&&n.splice(50),t.n=2,chrome.storage.local.set({activities:n});case 2:return t.a(2)}},t)})),function(t){return a.apply(this,arguments)})},{key:"clearWallet",value:(o=cs(ss().m(function t(){return ss().w(function(t){for(;;)switch(t.n){case 0:return this.wallet=null,this.isConnected=!1,this.program=null,t.n=1,chrome.storage.local.clear();case 1:console.log(" Wallet cleared");case 2:return t.a(2)}},t,this)})),function(){return o.apply(this,arguments)})},{key:"setupPeriodicTasks",value:function(){var t=this;chrome.alarms.create("updateBalance",{periodInMinutes:5}),chrome.alarms.create("keeperCheck",{periodInMinutes:1}),chrome.alarms.onAlarm.addListener(function(e){"updateBalance"===e.name&&t.isConnected?t.updateBalance():"keeperCheck"===e.name&&t.isConnected&&t.checkKeeperBot()})}},{key:"updateBalance",value:(s=cs(ss().m(function e(){var r,n,i,s;return ss().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.isConnected&&this.wallet){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,this.connection.getBalance(this.wallet.keypair.publicKey);case 2:return r=e.v,e.n=3,chrome.storage.local.get(["lastBalance"]);case 3:if(n=e.v,i=n.lastBalance||0,!(Math.abs(r-i)>.001*t.LAMPORTS_PER_SOL)){e.n=5;break}return e.n=4,this.storeActivity({type:"balance_update",title:"Balance Updated",subtitle:"New balance: ".concat((r/t.LAMPORTS_PER_SOL).toFixed(4)," SOL"),timestamp:Math.floor(Date.now()/1e3)});case 4:return e.n=5,chrome.storage.local.set({lastBalance:r});case 5:e.n=7;break;case 6:e.p=6,s=e.v,console.error("Balance update error:",s);case 7:return e.a(2)}},e,this,[[1,6]])})),function(){return s.apply(this,arguments)})},{key:"checkKeeperBot",value:(n=cs(ss().m(function t(){return ss().w(function(t){for(;;)switch(t.n){case 0:console.log(" Keeper bot check (placeholder)");case 1:return t.a(2)}},t)})),function(){return n.apply(this,arguments)})}],r&&us(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n,s,o,a,c,u,h,l,d,f,p,g,y,m,w,b,v,_,k,S,E,A,I,x,B}();new ls})()})();
//# sourceMappingURL=background.js.map