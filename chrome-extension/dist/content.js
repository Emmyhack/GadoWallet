/*! For license information please see content.js.LICENSE.txt */
(()=>{function e(){var t,r,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.toStringTag||"@@toStringTag";function i(e,o,a,c){var i=o&&o.prototype instanceof u?o:u,l=Object.create(i.prototype);return n(l,"_invoke",function(e,n,o){var a,c,i,u=0,l=o||[],p=!1,d={p:0,n:0,v:t,a:w,f:w.bind(t,4),d:function(e,n){return a=e,c=0,i=t,d.n=n,s}};function w(e,n){for(c=e,i=n,r=0;!p&&u&&!o&&r<l.length;r++){var o,a=l[r],w=d.p,f=a[2];e>3?(o=f===n)&&(i=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=w&&((o=e<2&&w<a[1])?(c=0,d.v=n,d.n=a[1]):w<f&&(o=e<3||a[0]>n||n>f)&&(a[4]=e,a[5]=n,d.n=f,c=0))}if(o||e>1)return s;throw p=!0,n}return function(o,l,f){if(u>1)throw TypeError("Generator is already running");for(p&&1===l&&w(l,f),c=l,i=f;(r=c<2?t:i)||!p;){a||(c?c<3?(c>1&&(d.n=-1),w(c,i)):d.n=i:d.v=i);try{if(u=2,a){if(c||(o="next"),r=a[o]){if(!(r=r.call(a,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,c<2&&(c=0)}else 1===c&&(r=a.return)&&r.call(a),c<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((r=(p=d.n<0)?i:e.call(n,d))!==s)break}catch(e){a=t,c=1,i=e}finally{u=1}}return{value:r,done:p}}}(e,a,c),!0),l}var s={};function u(){}function l(){}function p(){}r=Object.getPrototypeOf;var d=[][a]?r(r([][a]())):(n(r={},a,function(){return this}),r),w=p.prototype=u.prototype=Object.create(d);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,n(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e}return l.prototype=p,n(w,"constructor",p),n(p,"constructor",l),l.displayName="GeneratorFunction",n(p,c,"GeneratorFunction"),n(w),n(w,c,"Generator"),n(w,a,function(){return this}),n(w,"toString",function(){return"[object Generator]"}),(e=function(){return{w:i,m:f}})()}function n(e,t,r,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}n=function(e,t,r,o){function c(t,r){n(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r:(c("next",0),c("throw",1),c("return",2))},n(e,t,r,o)}function t(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,c,i=[],s=!0,u=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=a.call(t)).done)&&(i.push(r.value),i.length!==n);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=t.return&&(c=t.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(e,n)||function(e,n){if(e){if("string"==typeof e)return r(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function o(e,n,t,r,o,a,c){try{var i=e[a](c),s=i.value}catch(e){return void t(e)}i.done?n(s):Promise.resolve(s).then(r,o)}function a(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var c=e.apply(n,t);function i(e){o(c,r,a,i,s,"next",e)}function s(e){o(c,r,a,i,s,"throw",e)}i(void 0)})}}!function(){"use strict";var n;function r(){return(r=a(e().m(function n(t){var r,a;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:e.p=0,r=t.type,e.n="CONNECT_REQUEST"===r?1:"SIGN_TRANSACTION"===r?3:"SIGN_ALL_TRANSACTIONS"===r?5:"SIGN_MESSAGE"===r?7:"GET_ACCOUNT"===r?9:11;break;case 1:return e.n=2,o(t);case 2:return e.a(3,12);case 3:return e.n=4,i(t);case 4:return e.a(3,12);case 5:return e.n=6,u(t);case 6:return e.a(3,12);case 7:return e.n=8,p(t);case 8:return e.a(3,12);case 9:return e.n=10,w(t);case 10:return e.a(3,12);case 11:console.warn("Unknown message type:",t.type);case 12:e.n=14;break;case 13:e.p=13,a=e.v,console.error("Content script message handling error:",a),window.postMessage({source:"gada-wallet-content",type:t.type+"_RESPONSE",requestId:t.requestId,error:a.message},window.location.origin);case 14:return e.a(2)}},n,null,[[0,13]])}))).apply(this,arguments)}function o(e){return c.apply(this,arguments)}function c(){return(c=a(e().m(function n(t){var r,o;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,chrome.runtime.sendMessage({type:"DAPP_CONNECT_REQUEST",origin:window.location.origin,name:t.appName||document.title,icon:t.appIcon||E()});case 1:if(!(r=e.v).success){e.n=3;break}return window.postMessage({source:"gada-wallet-content",type:"CONNECT_RESPONSE",requestId:t.requestId,publicKey:r.publicKey,success:!0},window.location.origin),e.n=2,h(window.location.origin,{name:t.appName||document.title,icon:t.appIcon||E(),connectedAt:Date.now()});case 2:e.n=4;break;case 3:throw new Error(r.error||"Connection rejected");case 4:e.n=6;break;case 5:e.p=5,o=e.v,window.postMessage({source:"gada-wallet-content",type:"CONNECT_RESPONSE",requestId:t.requestId,error:o.message,success:!1},window.location.origin);case 6:return e.a(2)}},n,null,[[0,5]])}))).apply(this,arguments)}function i(e){return s.apply(this,arguments)}function s(){return(s=a(e().m(function n(t){var r,o;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,g(window.location.origin);case 1:if(e.v){e.n=2;break}throw new Error("Not connected to this dApp");case 2:return e.n=3,chrome.runtime.sendMessage({type:"DAPP_SIGN_TRANSACTION",origin:window.location.origin,transaction:t.transaction,message:t.message});case 3:if(!(r=e.v).success){e.n=4;break}window.postMessage({source:"gada-wallet-content",type:"SIGN_TRANSACTION_RESPONSE",requestId:t.requestId,signature:r.signature,publicKey:r.publicKey,success:!0},window.location.origin),e.n=5;break;case 4:throw new Error(r.error||"Transaction signing failed");case 5:e.n=7;break;case 6:e.p=6,o=e.v,window.postMessage({source:"gada-wallet-content",type:"SIGN_TRANSACTION_RESPONSE",requestId:t.requestId,error:o.message,success:!1},window.location.origin);case 7:return e.a(2)}},n,null,[[0,6]])}))).apply(this,arguments)}function u(e){return l.apply(this,arguments)}function l(){return(l=a(e().m(function n(t){var r,o;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,g(window.location.origin);case 1:if(e.v){e.n=2;break}throw new Error("Not connected to this dApp");case 2:return e.n=3,chrome.runtime.sendMessage({type:"DAPP_SIGN_ALL_TRANSACTIONS",origin:window.location.origin,transactions:t.transactions,message:t.message});case 3:if(!(r=e.v).success){e.n=4;break}window.postMessage({source:"gada-wallet-content",type:"SIGN_ALL_TRANSACTIONS_RESPONSE",requestId:t.requestId,signatures:r.signatures,publicKey:r.publicKey,success:!0},window.location.origin),e.n=5;break;case 4:throw new Error(r.error||"Transaction signing failed");case 5:e.n=7;break;case 6:e.p=6,o=e.v,window.postMessage({source:"gada-wallet-content",type:"SIGN_ALL_TRANSACTIONS_RESPONSE",requestId:t.requestId,error:o.message,success:!1},window.location.origin);case 7:return e.a(2)}},n,null,[[0,6]])}))).apply(this,arguments)}function p(e){return d.apply(this,arguments)}function d(){return(d=a(e().m(function n(t){var r,o;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,g(window.location.origin);case 1:if(e.v){e.n=2;break}throw new Error("Not connected to this dApp");case 2:return e.n=3,chrome.runtime.sendMessage({type:"DAPP_SIGN_MESSAGE",origin:window.location.origin,message:t.message,display:t.display});case 3:if(!(r=e.v).success){e.n=4;break}window.postMessage({source:"gada-wallet-content",type:"SIGN_MESSAGE_RESPONSE",requestId:t.requestId,signature:r.signature,publicKey:r.publicKey,success:!0},window.location.origin),e.n=5;break;case 4:throw new Error(r.error||"Message signing failed");case 5:e.n=7;break;case 6:e.p=6,o=e.v,window.postMessage({source:"gada-wallet-content",type:"SIGN_MESSAGE_RESPONSE",requestId:t.requestId,error:o.message,success:!1},window.location.origin);case 7:return e.a(2)}},n,null,[[0,6]])}))).apply(this,arguments)}function w(e){return f.apply(this,arguments)}function f(){return(f=a(e().m(function n(t){var r,o;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,g(window.location.origin);case 1:if(e.v){e.n=2;break}throw new Error("Not connected to this dApp");case 2:return e.n=3,chrome.runtime.sendMessage({type:"GET_WALLET_STATUS"});case 3:if(!(r=e.v).success||!r.isConnected){e.n=4;break}window.postMessage({source:"gada-wallet-content",type:"GET_ACCOUNT_RESPONSE",requestId:t.requestId,publicKey:r.wallet.publicKey,success:!0},window.location.origin),e.n=5;break;case 4:throw new Error("Wallet not connected");case 5:e.n=7;break;case 6:e.p=6,o=e.v,window.postMessage({source:"gada-wallet-content",type:"GET_ACCOUNT_RESPONSE",requestId:t.requestId,error:o.message,success:!1},window.location.origin);case 7:return e.a(2)}},n,null,[[0,6]])}))).apply(this,arguments)}function g(e){return y.apply(this,arguments)}function y(){return(y=a(e().m(function n(t){var r,o,a;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,chrome.storage.local.get(["dappConnections"]);case 1:return r=e.v,o=r.dappConnections||{},e.a(2,!!o[t]);case 2:return e.p=2,a=e.v,console.error("Connection check error:",a),e.a(2,!1)}},n,null,[[0,2]])}))).apply(this,arguments)}function h(e,n){return m.apply(this,arguments)}function m(){return(m=a(e().m(function n(t,r){var o,a,c;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,chrome.storage.local.get(["dappConnections"]);case 1:return o=e.v,(a=o.dappConnections||{})[t]=r,e.n=2,chrome.storage.local.set({dappConnections:a});case 2:e.n=4;break;case 3:e.p=3,c=e.v,console.error("Store connection error:",c);case 4:return e.a(2)}},n,null,[[0,3]])}))).apply(this,arguments)}function E(){var e=document.querySelector('link[rel="icon"], link[rel="shortcut icon"]');return e?e.href:"".concat(window.location.origin,"/favicon.ico")}function S(){return(S=a(e().m(function n(){var t,r;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,g(window.location.origin);case 1:if(!e.v){e.n=3;break}return e.n=2,chrome.runtime.sendMessage({type:"GET_WALLET_STATUS"});case 2:(t=e.v).success&&t.isConnected&&window.postMessage({source:"gada-wallet-content",type:"AUTO_CONNECTED",publicKey:t.wallet.publicKey},window.location.origin);case 3:e.n=5;break;case 4:e.p=4,r=e.v,console.error("Auto-connect error:",r);case 5:return e.a(2)}},n,null,[[0,4]])}))).apply(this,arguments)}console.log("🔗 gado Wallet content script loaded"),("https:"===window.location.protocol||"localhost"===window.location.hostname)&&(!(window.solana||window.phantom||window.solflare)||(console.log("🚫 Another Solana wallet already detected"),!1))&&((n=document.createElement("script")).src=chrome.runtime.getURL("injected.js"),n.onload=function(){this.remove()},(document.head||document.documentElement).appendChild(n),console.log("✅ gado Wallet provider injected")),window.addEventListener("message",function(e){e.source===window&&e.origin===window.location.origin&&e.data&&"gada-wallet-injected"===e.data.source&&function(e){r.apply(this,arguments)}(e.data)}),chrome.runtime.onMessage.addListener(function(e,n,t){"WALLET_DISCONNECTED"===e.type&&window.postMessage({source:"gada-wallet-content",type:"WALLET_DISCONNECTED"},window.location.origin),"ACCOUNT_CHANGED"===e.type&&window.postMessage({source:"gada-wallet-content",type:"ACCOUNT_CHANGED",publicKey:e.publicKey},window.location.origin),"NETWORK_CHANGED"===e.type&&window.postMessage({source:"gada-wallet-content",type:"NETWORK_CHANGED",network:e.network},window.location.origin)}),setTimeout(function(){return S.apply(this,arguments)},1e3),setInterval(a(e().m(function n(){var r,o,a,c,i,s,u,l,p;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,chrome.storage.local.get(["dappConnections"]);case 1:for(r=e.v,o=r.dappConnections||{},a=Date.now()-2592e6,c=!1,i=0,s=Object.entries(o);i<s.length;i++)u=t(s[i],2),l=u[0],u[1].connectedAt<a&&(delete o[l],c=!0);if(!c){e.n=2;break}return e.n=2,chrome.storage.local.set({dappConnections:o});case 2:e.n=4;break;case 3:e.p=3,p=e.v,console.error("Connection cleanup error:",p);case 4:return e.a(2)}},n,null,[[0,3]])})),6e4)}()})();
//# sourceMappingURL=content.js.map